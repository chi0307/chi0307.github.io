var Ye=Object.defineProperty;var Ze=(o,t,a)=>t in o?Ye(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a;var U=(o,t,a)=>Ze(o,typeof t!="symbol"?t+"":t,a);import{d as ae,e as oe,c as q,B as w,g as _,v as I,C as v,x as i,D as O,t as T,u as C,b as $,o as qe,f as Q,j as R,k as f,E as Qe,G as et,y as W,F as J,l as z,z as tt,w as $e,H as at,m as Ie,I as nt,K as lt,A as ot}from"../index-BowmzhhQ.js";import{d as st,s as de,c as it}from"../pinia-fND0KbYN.js";import{f as te,C as rt,v as dt}from"../StorageManager-iRTHDWsh.js";import{a as Oe,b as Ve}from"../sorts-DmEn6gXZ.js";import{f as De,r as re,b as Ue,g as L,a as ve}from"../index-f1g9dClV.js";import{_ as Fe}from"../_plugin-vue_export-helper-DlAUqK2U.js";const Te=ae({__name:"ClipList",props:{modelValue:{},list:{},label:{},message:{},searchable:{type:Boolean,default:!1},addable:{type:Boolean,default:!1},showSelected:{type:Boolean,default:!1},hideDetails:{type:Boolean,default:!1}},emits:["update:model-value"],setup(o,{emit:t}){const a=oe("comboboxComponent"),s=oe("autocompleteComponent"),l=oe("selectComponent"),u=t,h=q(()=>Oe(o.list));function m(d){const g=o.modelValue.filter(S=>S!==d);P(g)}function P([...d]){u("update:model-value",d)}function A(d){return function(g){!g&&d!==null&&d.blur()}}return(d,g)=>{const S=w("v-chip"),y=w("v-combobox"),V=w("v-autocomplete"),e=w("v-select");return d.addable?(_(),I(y,{key:0,ref_key:"comboboxComponent",ref:a,"model-value":d.modelValue,items:h.value,messages:d.message??"",label:d.label,multiple:"","hide-details":d.hideDetails,"hide-selected":!d.showSelected,"onUpdate:modelValue":P,"onUpdate:menu":g[0]||(g[0]=r=>A(C(a)))},{selection:v(({item:r})=>[i(S,{closable:"","onClick:close":D=>m(r.value)},{default:v(()=>[O(T(r.value),1)]),_:2},1032,["onClick:close"])]),_:1},8,["model-value","items","messages","label","hide-details","hide-selected"])):d.searchable?(_(),I(V,{key:1,ref_key:"autocompleteComponent",ref:s,"model-value":d.modelValue,items:h.value,messages:d.message??"","hide-details":d.hideDetails,label:d.label,multiple:"","hide-selected":!d.showSelected,"clear-on-select":"","onUpdate:modelValue":P,"onUpdate:menu":g[1]||(g[1]=r=>A(C(s)))},{selection:v(({item:r})=>[i(S,{closable:"","onClick:close":D=>m(r.value)},{default:v(()=>[O(T(r.value),1)]),_:2},1032,["onClick:close"])]),_:1},8,["model-value","items","messages","hide-details","label","hide-selected"])):(_(),I(e,{key:2,ref_key:"selectComponent",ref:l,"model-value":d.modelValue,items:h.value,messages:d.message??"","hide-details":d.hideDetails,label:d.label,multiple:"","hide-selected":!d.showSelected,"onUpdate:modelValue":P,"onUpdate:menu":g[2]||(g[2]=r=>A(C(l)))},{selection:v(({item:r})=>[i(S,{closable:"","onClick:close":D=>m(r.value)},{default:v(()=>[O(T(r.value),1)]),_:2},1032,["onClick:close"])]),_:1},8,["model-value","items","messages","hide-details","label","hide-selected"]))}}}),Je=De(0),ct=re(0),Le=re(2);class fe{constructor({type:t,name:a}){U(this,"_name");U(this,"_type");this._type=t,this._name=a}get name(){return this._name}get type(){return this._type}calculateRangePointsCost(t,a){const s=[];for(let m=t;m<=a;m++){const P=Le(m/this.calculatePoints(m));isNaN(P)||P===1/0||P===-1/0||s.push(P)}s.sort((m,P)=>m-P);const l=s[s.length-1],u=s[0];if(l===void 0||u===void 0)throw new Error("cannot be calculated");const h=s.reduce((m,P)=>m+P,0)/s.length;return{max:l,min:u,average:Le(h)}}}class ut extends fe{constructor({pointBackRates:a,...s}){super(s);U(this,"_pointBackRates");this._pointBackRates=a}get _maxRete(){return this._pointBackRates.reduce((a,{rate:s})=>a+s,0)}get pointBackRates(){return this._pointBackRates}get description(){return`消費${this._pointBackRates.length>1?"最高":""}${this._maxRete.toString()}%回饋點數(四捨五入)`}calculatePoints(a){let s=0;for(const{rate:l,limit:u=1/0}of this._pointBackRates)s+=Math.min(ct(a*(l/100)),u);return s}toJSON(){return{name:this._name,type:this._type,pointBackRates:this._pointBackRates}}}class pt extends fe{constructor({pointBackRates:a,...s}){super(s);U(this,"_pointBackRates");this._pointBackRates=a}get _maxRete(){return this._pointBackRates.reduce((a,{rate:s})=>a+s,0)}get pointBackRates(){return this._pointBackRates}get description(){return`消費${this._pointBackRates.length>1?"最高":""}${this._maxRete.toString()}%回饋點數(無條件捨去)`}calculatePoints(a){let s=0;for(const{rate:l,limit:u=1/0}of this._pointBackRates)s+=Math.min(Je(a*(l/100)),u);return s}toJSON(){return{name:this._name,type:this._type,pointBackRates:this._pointBackRates}}}class mt extends fe{constructor({spendingPerPoint:a,...s}){super({...s});U(this,"_spendingPerPoint");this._spendingPerPoint=a}get spendingPerPoint(){return this._spendingPerPoint}get description(){return`每消費${this._spendingPerPoint.toString()}元累積1點 (小數會累計)`}calculatePoints(a){return Le(a/this._spendingPerPoint)}toJSON(){return{name:this._name,type:this._type,spendingPerPoint:this._spendingPerPoint}}}class yt extends fe{constructor({spendingPerPoint:a,...s}){super({...s});U(this,"_spendingPerPoint");this._spendingPerPoint=a}get spendingPerPoint(){return this._spendingPerPoint}get description(){return`每消費${this._spendingPerPoint.toString()}元累積1點 (小數不累計)`}calculatePoints(a){return Je(a/this._spendingPerPoint)}toJSON(){return{name:this._name,type:this._type,spendingPerPoint:this._spendingPerPoint}}}const gt={RoundedPercentageReward:ut,TruncatedPercentageReward:pt,AccumulatedPointsReward:mt,FixedRatePointsReward:yt};function vt(o){return new gt[o.type](o)}class ft{constructor(t,a,s,l){U(this,"_name");U(this,"_description");U(this,"_rewards");U(this,"_condition");if(this._name=t,this._description=a,this._condition=s,l.length===0)throw new Error(`Plan "${t}" must have at least one reward rule.`);this._rewards=l}get name(){return this._name}get description(){return this._description}get storeList(){return Ue(this._rewards.flatMap(t=>[...t.stores,...t.storeBlackList]))}checkPlanIsVisible(t){return this._condition===null||!!(t!=null&&t.includes(this._condition))}getApplicableReward({transactionStore:t=null,acceptedPayments:a=[],transactionAttributesType:s,currentConditions:l=null}){return this._condition!==null&&!(l!=null&&l.includes(this._condition))?null:this._rewards.find(({stores:u,payments:h,transactionType:m,paymentBlackList:P,storeBlackList:A,condition:d})=>{const g=t===null||u.size===0||u.has(t),S=t===null||A.size===0||!A.has(t),y=a.length===0||h.size===0||a.some(D=>h.has(D)),V=a.length===0||P.size===0||a.some(D=>!P.has(D)),e=m===null||s===m,r=d===null||!!(l!=null&&l.includes(d));return g&&S&&y&&V&&e&&r})??null}getRewardMiles({transactionStore:t,acceptedPayments:a,amount:s,transactionAttributesType:l,currentConditions:u}){const h=this.getApplicableReward({acceptedPayments:a,transactionStore:t,transactionAttributesType:l,currentConditions:u});if(h===null)return null;const m=a===void 0?[...h.payments.values()]:a.filter(P=>h.payments.has(P));return{rewardName:h.rewardStrategy.name,rewardPoints:h.rewardStrategy.calculatePoints(s),payments:m.filter(P=>!h.paymentBlackList.has(P)),rewardStrategy:h.rewardStrategy}}toJSON(){return{name:this._name,description:this._description,condition:this._condition,rewards:this._rewards.map(({rewardStrategy:t,stores:a,payments:s,transactionType:l,paymentBlackList:u,storeBlackList:h,condition:m})=>({rewardStrategy:t.toJSON(),stores:[...a],storeBlackList:[...h],payments:[...s],paymentBlackList:[...u],transactionType:l,condition:m}))}}}const Ke=["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"];class Pt{constructor({name:t,description:a,plans:s,storeBlackList:l,paymentBlackList:u,cardUrl:h,updateAt:m,pointExchanges:P,selectedPlanId:A,selectedPointExchangeId:d}){U(this,"_selectedPlanId");U(this,"_selectedPointExchangeId");U(this,"_name");U(this,"_description");U(this,"_plans");U(this,"_cardUrl");U(this,"_storeBlackList");U(this,"_paymentBlackList");U(this,"_updateAt");U(this,"_pointExchanges");this._name=t,this._description=a,this._plans=s,this._cardUrl=h,this._storeBlackList=l,this._paymentBlackList=u,this._updateAt=m,this._pointExchanges=P;const g=A??this._plans.keys().next().value??null;if(g===null)throw new Error(`this plan id ${g} not found`);this._selectedPlanId=g;const S=d??this._pointExchanges.keys().next().value??null;if(S===null)throw new Error(`this point exchange id ${S} not found`);this._selectedPointExchangeId=S}get name(){return this._name}get description(){return this._description}get selectedPlanId(){return this._selectedPlanId}get selectedPlan(){return this._getPlan(this._selectedPlanId)}get selectedPointExchangeId(){return this._selectedPointExchangeId}get selectedPointExchange(){return this._getPointExchangeStrategy(this._selectedPointExchangeId)}get selectablePlan(){return[...this._plans.entries()].map(([t,{name:a,description:s}])=>({id:t,name:a,description:s}))}get selectablePointExchange(){return[...this._pointExchanges.entries()].map(([t,{name:a,description:s}])=>({id:t,name:a,description:s}))}get storeList(){return Ue([...[...this._plans.values()].flatMap(t=>t.storeList),...this._storeBlackList])}get cardUrl(){return this._cardUrl}_getPlan(t){const a=this._plans.get(t);if(a===void 0)throw new Error(`plan id ${t} not found. Available plans: ${[...this._plans.keys()].join(", ")}`);return a}_getPointExchangeStrategy(t){const a=this._pointExchanges.get(t);if(a===void 0)throw new Error(`pointExchangeStrategy id ${t} not found. Available pointExchanges: ${[...this._plans.keys()].join(", ")}`);return a}_rewardMilesWithPlan(t,a,s){var d;const l=this._getPlan(t),u=this._getPointExchangeStrategy(a),h={planId:t,planName:l.name,rewardName:null,rewardPoints:0,payments:[],rewardStrategy:null,pointExchangeStrategy:u,pointExchangeName:u.name,airlineCode:u.airlineCode,miles:0},m=s.transactionStore!==void 0&&this._storeBlackList.has(s.transactionStore),P=(d=s.acceptedPayments)==null?void 0:d.some(g=>this._paymentBlackList.has(g));if(m||P)return h;const A=l.getRewardMiles(s);return A===null?h:{planId:t,planName:l.name,pointExchangeStrategy:u,pointExchangeName:u.name,miles:u.calculateMiles(A.rewardPoints),airlineCode:u.airlineCode,...A}}getRewardInfos(t,{onlyCurrentPlan:a=!1,onlyCurrentExchangeStrategy:s=!1}={}){const l=a?[[this._selectedPlanId,this.selectedPlan]]:[...this._plans.entries()],u=s?[this._selectedPointExchangeId]:[...this._pointExchanges.keys()],h=[];for(const[m,P]of l)if(P.checkPlanIsVisible(t.currentConditions??null))for(const d of u){const g=this._rewardMilesWithPlan(m,d,t);h.push(g)}return h}toJSON(){return{name:this._name,description:this._description,cardUrl:this._cardUrl,storeBlackList:[...this._storeBlackList],paymentBlackList:[...this._paymentBlackList],selectedPlanId:this._selectedPlanId,plans:[...this._plans].map(([t,a])=>({id:t,config:a.toJSON()})),updateAt:this._updateAt.toISOString(),selectedPointExchangeId:this._selectedPointExchangeId,pointExchanges:[...this._pointExchanges].map(([t,a])=>({id:t,config:a.toJSON()}))}}}const _t=re(2);class ht{constructor({name:t,airlineCode:a,pointsPerMile:s,milesPerUnit:l}){U(this,"_name");U(this,"_airlineCode");U(this,"_pointsPerMile");U(this,"_milesPerUnit");this._name=t,this._airlineCode=a,this._pointsPerMile=s,this._milesPerUnit=l}get name(){return this._name}get description(){return`${this._pointsPerMile}點可以交換${this._milesPerUnit}哩程`}get airlineCode(){return this._airlineCode}get pointsPerMile(){return this._pointsPerMile}get milesPerUnit(){return this._milesPerUnit}calculateMiles(t){return _t(t*this._milesPerUnit/this._pointsPerMile)}toJSON(){return{name:this._name,airlineCode:this._airlineCode,pointsPerMile:this._pointsPerMile,milesPerUnit:this._milesPerUnit}}}function Ne({name:o,description:t,storeBlackList:a,paymentBlackList:s,cardUrl:l,plans:u,updateAt:h,pointExchanges:m,selectedPlanId:P,selectedPointExchangeId:A}){const d=new Map(u.map(({id:g,config:{name:S,description:y,condition:V,rewards:e}})=>[g,new ft(S,y??null,V??null,e.map(({stores:r,payments:D,transactionType:H,rewardStrategy:B,paymentBlackList:c,storeBlackList:p,condition:b})=>({rewardStrategy:vt(B),stores:new Set(r),storeBlackList:new Set(p),payments:new Set(D),paymentBlackList:new Set(c),transactionType:H??null,condition:b??null})))]));return new Pt({name:o,description:t??null,plans:d,storeBlackList:new Set(a),paymentBlackList:new Set(s),cardUrl:l,updateAt:new Date(h),selectedPlanId:P??null,selectedPointExchangeId:A??null,pointExchanges:new Map(m.map(({id:g,config:S})=>[g,new ht(S)]))})}const me=Pe("2024/12/31"),se=Pe("2025/6/30","2025/1/1");function Pe(o,t){return t===void 0?`權益 ~${te(o,"yyyy/M/d")}`:te(t,"yyyy")===te(o,"yyyy")?`權益 ${te(t,"yyyy/M/d")}~${te(o,"M/d")}`:`權益 ${te(t,"yyyy/M/d")}~${te(o,"yyyy/M/d")}`}const _e=["分期付款"],he=[],we=["信用卡","Apple Pay","Samsung Pay","Google Pay","Fitbit Pay","Garmin Pay","Hami Pay"];function xe(o){const t={rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:.3}]}};return[{id:L(),config:{name:"集精選",description:"量販超市, 指定加油, 指定超商, 生活家居",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:2}]},stores:["家樂福","LOPIA台灣","全聯福利中心","台灣中油-直營","7-ELEVEN","全家便利商店","IKEA"],payments:[...we,"PX Pay","My FamiPay","OPEN錢包"]},t]}},{id:L(),config:{name:"玩數位",description:"數位/串流平台, 網購平台, 國際電商, 辦公神器",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:o}]},stores:["App Store","Apple Music","iCloud","Apple TV+","Apple Arcade","Apple One","iTunes","Google Play","Disney+","Netflix","Spotify","KKBOX","YouTube Premium","Max","蝦皮購物","momo購物網","PChome 24h購物(不含儲值及電子票券)","小樹購","Coupang 酷澎(台灣)","淘寶/天貓","ChatGPT","Dropbox","Surfshark","NordVPN","McAfee","Microsoft","LinkedIn","Whoscall","Zoom"],paymentBlackList:["Line Pay","街口支付"]},{...t,storeBlackList:["全聯福利中心"]}]}},{id:L(),config:{name:"樂饗購",description:"國內指定百貨, 國內外送平台, 國內餐飲, 國內藥妝",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:o}]},stores:["遠東SOGO百貨","遠東Garden City","太平洋百貨","新光三越","SKM Park","BELLAVITA","微風廣場","遠東百貨","Big City遠東巨城購物中心","誠品生活","環球購物中心","CITYLINK","統一時代","台北101","ATT 4 FUN","明曜百貨","京站","美麗華","大葉高島屋","比漾廣場","大江國際購物中心","中友百貨","廣三SOGO","Tiger City","勤美誠品綠園道","大魯閣新時代","耐斯廣場","南紡購物中心","夢時代","漢神百貨","漢神巨蛋","MITSUI OUTLET PARK 林口","MITSUI OUTLET PARK 台中港","MITSUI OUTLET PARK 台南","Mitsui Shopping Park LaLaport 台中","義大世界購物廣場","華泰名品城","義享天地","麗寶OUTLET Mall","秀泰生活","台茂購物中心","新月廣場","三創生活","宏匯廣場","NOKE忠泰樂生活","Uber Eats","foodpanda","foodomo","國內餐飲(不含餐券)","麥當勞","康是美","屈臣氏"],payments:we},{...t,storeBlackList:["全聯福利中心"]}]}},{id:L(),config:{name:"趣旅行",description:"指定海外消費, 日本指定遊樂園, 國內外交通, 指定航空公司, 指定飯店住宿, 旅遊/訂房平台, 指定旅行社",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:o}]},stores:["海外實體消費","東京迪士尼樂園","東京華納兄弟哈利波特影城","大阪環球影城(USJ)","Apple Wallet SUICA","Apple Wallet PASMO","Apple Wallet ICOCA","Uber","Grab","台灣高鐵","yoxi","台灣大車隊","iRent","和運租車","格上租車","中華航空","長榮航空","星宇航空","台灣虎航","國泰航空","樂桃航空","阿聯酋航空","酷航","捷星航空","日本航空","亞洲航空","聯合航空","ANA全日空","新加坡航空","越捷航空","大韓航空","達美航空","土耳其航空","卡達航空","法國航空","國內飯店住宿","星野集團","全球迪士尼飯店","東橫INN","KKday","Agoda","Klook","Airbnb","Hotels.com","Expedia","Booking.com","Trip.com","AsiaYo","ezTravel易遊網","雄獅旅遊","可樂旅遊","東南旅遊","五福旅遊","燦星旅遊","山富旅遊","長汎假期","鳳凰旅行社","Ezfly易飛網","理想旅遊","永利旅行社","三賀旅行社"],payments:we},{...t,storeBlackList:["全聯福利中心"]}]}},{id:L(),config:{name:"來支付",description:"LINE Pay消費",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:2}]},payments:["Line Pay"]},{...t,storeBlackList:["全聯福利中心"]}]}},{id:L(),config:{name:"慶生月",description:"指定百貨/休閒娛樂/國內外送平台 3.5%, 國外精選遊樂園實體消費/國內人氣樂園/指定蛋糕甜點店/指定咖啡廳/指定國內餐廳/KTV/派對/電玩 10%",condition:"Birthday",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:10}]},stores:["東京迪士尼樂園","大阪環球影城(USJ)","名古屋樂高樂園","紅葉蛋糕官方網站","法朋烘焙甜點坊","興波咖啡 華山旗艦店","海底撈火鍋","輕井澤鍋物","老四川巴蜀麻辣燙","二本松涮涮屋","橋山.壽喜燒","Umai屋馬燒肉","老井極上燒肉","燒肉中山(台中大墩)","藏壽司台灣","貳樓","膳馨民間創作料理","馨苑小料理","雅室牛排 仁愛圓環店","ABV餐飲集團","WAT","臺虎精釀(信義 | 西門 | 臺中 | 啜飲室大安)","BAR Bodega","BAR MED","JiN Her 今鶴","錢櫃KTV","好樂迪KTV","星聚點KTV","享溫馨KTV","Nintendo","巴哈姆特動畫瘋","閃動格子CyberCube"]},{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:3.5}]},stores:["新光三越","Uber Eats (不含 Uber One)","Agoda","Trip.com","Klook","國內飯店住宿","星野集團","全球迪士尼飯店","東橫INN"]},{...t,storeBlackList:["全聯福利中心"]}]}}]}const Ae=[{id:L(),config:{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:360,milesPerUnit:1e3}},{id:L(),config:{name:"長榮航空哩程 + 長榮世界卡",airlineCode:"EVA",pointsPerMile:300,milesPerUnit:1e3}}],Ge=[{name:"Cube 卡",description:`Cube 卡 (Level 1) 回饋方案 (${se})`,cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/cube/",storeBlackList:_e,paymentBlackList:he,updateAt:"2024-12-01T00:00:00.000Z",plans:xe(2),pointExchanges:Ae},{name:"Cube 卡",description:`Cube 卡 (Level 2) 回饋方案 (${se})`,cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/cube/",storeBlackList:_e,paymentBlackList:he,updateAt:"2024-12-01T00:00:00.000Z",plans:xe(3),pointExchanges:Ae},{name:"Cube 卡",description:`Cube 卡 (Level 3) 回饋方案 (${se})`,cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/cube/",storeBlackList:_e,paymentBlackList:he,updateAt:"2024-12-01T00:00:00.000Z",plans:xe(3.3),pointExchanges:Ae}],wt=Ge[1];function ke(o){return[{id:L(),config:{name:"預設",description:"部分回饋需要另外登錄",rewards:[{rewardStrategy:{type:"FixedRatePointsReward",name:`Expedia專屬網頁線上訂房 ${Pe("2025/12/31")}`,spendingPerPoint:8},stores:["Expedia"],payments:["Apple Pay","Samsung Pay","Google Pay","Fitbit Pay","Garmin Pay","Hami Pay"]},{rewardStrategy:{type:"FixedRatePointsReward",name:"長榮官網購票/機上免稅品",spendingPerPoint:10},stores:["長榮機上免稅品","長榮官網購票"]},{rewardStrategy:{type:"FixedRatePointsReward",name:"海外消費",spendingPerPoint:10},transactionType:"Foreign"},{rewardStrategy:{type:"FixedRatePointsReward",name:"國內旅行社 (需登錄) 銀行並未公告符合商家",spendingPerPoint:10},transactionType:"Domestic",stores:["雄獅旅遊","可樂旅遊","東南旅遊","五福旅遊","燦星旅遊","山富旅遊","長汎假期","鳳凰旅行社","Ezfly易飛網","理想旅遊","永利旅行社","三賀旅行社"]},{rewardStrategy:{type:"FixedRatePointsReward",name:"國外自由行、團體旅遊 (需登錄) 銀行並未公告符合商家",spendingPerPoint:10},transactionType:"Foreign"},{rewardStrategy:{type:"FixedRatePointsReward",name:"一般消費",spendingPerPoint:o}}]}}]}const ue=[{id:L(),config:{name:"長榮航空哩程 (每1000哩為單位自動轉換至哩程帳戶)",airlineCode:"EVA",pointsPerMile:1e3,milesPerUnit:1e3}}],pe=Pe("2025/3/31","2025/1/1"),je=[{name:"長榮極致無限卡",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/eva/",description:pe,updateAt:"2024-12-29T00:00:00.000Z",plans:ke(20),pointExchanges:ue},{name:"長榮無限卡",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/eva/",description:pe,updateAt:"2024-12-29T00:00:00.000Z",plans:ke(22),pointExchanges:ue},{name:"長榮極致御璽卡",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/eva/",description:pe,updateAt:"2024-12-29T00:00:00.000Z",plans:ke(30),pointExchanges:ue},{name:"長榮御璽卡",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/eva/",description:pe,updateAt:"2024-12-29T00:00:00.000Z",plans:[{id:L(),config:{name:"預設",description:null,rewards:[{rewardStrategy:{type:"FixedRatePointsReward",name:"一般消費",spendingPerPoint:30}}]}}],pointExchanges:ue}],xt=je[1],ye=["政府稅款","公共事業代扣繳","交通違規罰鍰","分期付款","全聯福利中心","7-ELEVEN","全家便利商店"],ge=[],At=[{name:"星宇世界卡",description:me,cardUrl:"https://www.esunbank.com/zh-tw/personal/credit-card/intro/co-branded-card/starlux-card",storeBlackList:ye,paymentBlackList:ge,pointExchanges:[{id:L(),config:{name:"星宇航空哩程",airlineCode:"SJX",pointsPerMile:1,milesPerUnit:1}}],plans:[{id:L(),config:{name:"預設",rewards:[{rewardStrategy:{type:"FixedRatePointsReward",name:"國外消費 (生日兩倍)",spendingPerPoint:5},transactionType:"Foreign",condition:"Birthday"},{rewardStrategy:{type:"FixedRatePointsReward",name:"國外消費",spendingPerPoint:10},transactionType:"Foreign"},{rewardStrategy:{type:"FixedRatePointsReward",name:"國內消費",spendingPerPoint:20},transactionType:"Domestic"}]}}],updateAt:new Date("2024/12/01 00:00:00").toISOString()},{name:"星宇商務鈦金卡",description:me,cardUrl:"https://www.esunbank.com/zh-tw/personal/credit-card/intro/co-branded-card/starlux-card",storeBlackList:ye,paymentBlackList:ge,pointExchanges:[{id:L(),config:{name:"星宇航空哩程",airlineCode:"SJX",pointsPerMile:1,milesPerUnit:1}}],plans:[{id:L(),config:{name:"預設",rewards:[{rewardStrategy:{type:"FixedRatePointsReward",name:"國外消費",spendingPerPoint:7.5},transactionType:"Foreign",condition:"Birthday"},{rewardStrategy:{type:"FixedRatePointsReward",name:"國外消費",spendingPerPoint:15},transactionType:"Foreign"},{rewardStrategy:{type:"FixedRatePointsReward",name:"國內消費",spendingPerPoint:25},transactionType:"Domestic"}]}}],updateAt:new Date("2024/12/01 00:00:00").toISOString()},{name:"星宇鈦金卡",description:me,cardUrl:"https://www.esunbank.com/zh-tw/personal/credit-card/intro/co-branded-card/starlux-card",storeBlackList:ye,paymentBlackList:ge,pointExchanges:[{id:L(),config:{name:"星宇航空哩程",airlineCode:"SJX",pointsPerMile:1,milesPerUnit:1}}],plans:[{id:L(),config:{name:"預設",rewards:[{rewardStrategy:{type:"FixedRatePointsReward",name:"國外消費",spendingPerPoint:20},transactionType:"Foreign"},{rewardStrategy:{type:"FixedRatePointsReward",name:"國內消費",spendingPerPoint:28},transactionType:"Domestic"}]}}],updateAt:new Date("2024/12/01 00:00:00").toISOString()}],be=["台灣中油-直營","台灣大車隊","台鐵","台灣高鐵","UBER","Yoxi","LINEGO","新光三越","遠東百貨","遠東SOGO百貨","誠品生活","漢神百貨","微風廣場","微風信義","微風南京","微風南山","微風台北車站","環球購物中心","台北101","華泰名品城","MITSUI OUTLET PARK 林口","MITSUI OUTLET PARK 台中港","MITSUI OUTLET PARK 台南","Big City遠東巨城購物中心","昇恆昌","夢時代購物中心","京站","美麗華","南紡購物中心","秀泰生活","台茂購物中心","Mitsui Shopping Park LaLaport 台中","統領廣場","采盟","Uber Eats","foodpanda","星巴克","EZTABLE","王品瘋美食","摩斯漢堡","foodomo","漢來美食","饗Joy","饗食天堂","果然匯","小福利","饗饗","旭集","開飯","饗泰多","真珠","瓦城","非常泰","大心","1010","時時香","BOBO","乾杯集團","路易莎","中華航空","長榮航空","日本航空","台灣虎航","樂桃航空","酷航","立榮航空","華信航空","Agoda","booking.com","Hotels.com","AsiaYo","Expedia","KKday","Klook","雄獅旅遊","可樂旅遊","東南旅行社","Apple直營店","小米台灣","全國電子","燦坤","迪卡儂","屈臣氏","康是美","IKEA","特力屋","特力和樂","UNIQLO","NET","大樹藥局","丁丁藥妝","momo購物網","蝦皮購物","淘寶網","Coupang酷澎","東森購物","雅虎奇摩購物中心","博客來","玉山Wallet愛心捐款-單筆捐款","玉山Wallet愛心捐款-定期定額","特斯拉","Gogoro電池資費","YouBike 2.0","日本實體店","韓國實體店","泰國實體店","越南實體店","新加坡實體店","中國實體店","香港實體店","澳門實體店","美國實體店","英國實體店","法國實體店","德國實體店","義大利實體店"],Ce={rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7}]}},ze=[{name:"UniCard 卡",description:me,cardUrl:"https://www.esunbank.com/zh-tw/personal/credit-card/intro/bank-card/unicard",storeBlackList:ye,paymentBlackList:ge,pointExchanges:[{id:L(),config:{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:200,milesPerUnit:300}}],plans:[{id:L(),config:{name:"任意選 (需要切換店家)",description:"玉山Wallet設定8家特店",rewards:[{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2.5,limit:500}]},stores:be,payments:["信用卡","Apple Pay","Samsung Pay","Google Pay"]},{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2.5,limit:500}]},payments:["Line Pay","街口支付","悠遊付","橘子支付","icash pay"]},Ce]}},{id:L(),config:{name:"簡單選",rewards:[{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2,limit:500}]},stores:be,payments:["信用卡","Apple Pay","Samsung Pay","Google Pay"]},{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2,limit:500}]},payments:["Line Pay","街口支付","悠遊付","橘子支付","icash pay"]},Ce]}},{id:L(),config:{name:"UP選",description:"完成指定任務或99點玉山e point訂閱",rewards:[{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:3.5,limit:2e3}]},stores:be,payments:["信用卡","Apple Pay","Samsung Pay","Google Pay"]},{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:3.5,limit:2e3}]},payments:["Line Pay","街口支付","悠遊付","橘子支付","icash pay"]},Ce]}}],updateAt:new Date("2024/12/01 00:00:00").toISOString()}],kt=ze[0],Se=["政府稅款","公共事業代扣繳","交通違規罰鍰","分期付款"],Re=["全盈+PAY","icash pay","OPEN錢包","My FamiPay"],We=[{name:"旅人無限卡",description:se,cardUrl:"https://www.hsbc.com.tw/credit-cards/products/travel/visa-infinite/",storeBlackList:Se,paymentBlackList:Re,pointExchanges:[{id:L(),config:{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:1,milesPerUnit:1}}],plans:[{id:L(),config:{name:"預設",rewards:[{rewardStrategy:{type:"AccumulatedPointsReward",name:"國外消費",spendingPerPoint:10},transactionType:"Foreign"},{rewardStrategy:{type:"AccumulatedPointsReward",name:"國內消費",spendingPerPoint:18},transactionType:"Domestic"}]}}],updateAt:new Date("2024/12/01 00:00:00").toISOString()},{name:"旅人御璽卡",description:se,cardUrl:"https://www.hsbc.com.tw/credit-cards/products/travel/visa-signature/",storeBlackList:Se,paymentBlackList:Re,pointExchanges:[{id:L(),config:{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:1,milesPerUnit:1}}],plans:[{id:L(),config:{name:"預設",rewards:[{rewardStrategy:{type:"AccumulatedPointsReward",name:"國外消費",spendingPerPoint:15},transactionType:"Foreign"},{rewardStrategy:{type:"AccumulatedPointsReward",name:"國內消費",spendingPerPoint:18},transactionType:"Domestic"}]}}],updateAt:new Date("2024/12/01 00:00:00").toISOString()},{name:"旅人輕旅卡",description:se,cardUrl:"https://www.hsbc.com.tw/credit-cards/products/travel/visa-light/",storeBlackList:Se,paymentBlackList:Re,pointExchanges:[{id:L(),config:{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:1,milesPerUnit:1}}],plans:[{id:L(),config:{name:"預設",rewards:[{rewardStrategy:{type:"AccumulatedPointsReward",name:"國外消費",spendingPerPoint:20},transactionType:"Foreign"},{rewardStrategy:{type:"AccumulatedPointsReward",name:"國內消費",spendingPerPoint:20},transactionType:"Domestic"}]}}],updateAt:new Date("2024/12/01 00:00:00").toISOString()}],bt=We[2],Ct=[xt,wt,bt,kt],St=[...je,...Ge,...We,...At,...ze],Be=o=>Array.isArray(o)&&o.every(t=>Array.isArray(t)&&t.length===2&&typeof t[0]=="string"&&Array.isArray(t[1])&&t[1].every(a=>typeof a=="string")),He=[["7-ELEVEN",["7-11","Seven Eleven","統一超商","小7"]],["ANA全日空",["ANA","全日空","All Nippon Airways","NH"]],["ATT 4 FUN",["ATT4FUN","ATT信義"]],["App Store",["蘋果應用商店"]],["Apple Arcade",["蘋果遊戲訂閱服務"]],["Apple Music",["蘋果音樂","Apple音樂"]],["Apple One",["蘋果One訂閱"]],["Apple TV+",["Apple TV Plus"]],["Apple Wallet ICOCA",["ICOCA電子票","Apple錢包ICOCA"]],["Apple Wallet PASMO",["PASMO電子票","Apple錢包PASMO"]],["Apple Wallet SUICA",["SUICA電子票","Apple錢包SUICA"]],["CITYLINK",["City Link"]],["Disney+",["Disney Plus","迪士尼+"]],["Google Play",["Google應用商店"]],["Grab",["Grab Taxi","Grab叫車"]],["MITSUI OUTLET PARK 台中港",["三井台中港","三井OUTLET台中"]],["MITSUI OUTLET PARK 台南",["三井台南","三井OUTLET台南"]],["MITSUI OUTLET PARK 林口",["三井林口","三井OUTLET林口"]],["Mitsui Shopping Park LaLaport 台中",["LaLaport台中","三井LaLaport台中"]],["Netflix",["網飛"]],["Nintendo",["任天堂","Switch","老任"]],["PChome 24h購物(不含儲值及電子票券)",["PChome","PChome購物"]],["Tiger City",["老虎城","Tiger City購物中心"]],["Trip.com",["攜程"]],["Uber Eats (不含 Uber One)",["優步外送"]],["foodpanda",["熊貓外送","Food Panda"]],["iCloud",["蘋果雲端","iCloud雲端"]],["iRent",["i Rent"]],["iTunes",["蘋果iTunes"]],["中友百貨",["中友"]],["中華航空",["China Airlines","CAL","CI","華航"]],["亞洲航空",["AirAsia","亞航","AXM","AK"]],["京站",["Q Square","京站商場"]],["全家便利商店",["FamilyMart","全家"]],["全球迪士尼飯店",["Disney Hotels"]],["全聯福利中心",["PX Mart"]],["南紡購物中心",["Tainan Spinnery Mall","南紡"]],["博客來",["Books.com.tw"]],["卡達航空",["Qatar Airways","卡航","QTR","QR"]],["可樂旅遊",["Cola Travel","可樂旅行社"]],["台北101",["Taipei 101","101大樓"]],["台灣中油-直營",["中油直營","直營中油"]],["台灣大車隊",["Taiwan Taxi","大車隊"]],["台灣虎航",["Tigerair Taiwan","台虎","TWA","IT"]],["台灣高鐵",["Taiwan High Speed Rail"]],["台茂購物中心",["TaiMall"]],["吉卜力公園",["Ghibli Park"]],["國泰航空",["Cathay Pacific","國泰","CPA","CX","Cathay Pacific Airways"]],["土耳其航空",["Turkish Airlines","土航","THY","TK"]],["夢時代",["Dream Mall"]],["大阪環球影城(USJ)",["Universal Studios Japan"]],["大韓航空",["Korean Air","韓航","KAL","KE"]],["大魯閣新時代",["Taroko Mall","大魯閣"]],["太平洋百貨",["Pacific Department Store","太平洋"]],["好樂迪KTV",["Holiday"]],["家樂福",["Carrefour"]],["屈臣氏",["Watsons"]],["康是美",["Cosmed"]],["捷星航空",["JST","JQ","Jetstar Airways"]],["新加坡航空",["SIA","SQ","Singapore Airlines"]],["日本航空",["JAL","JL","Japan Airlines"]],["星宇航空",["starlux","SJX","JX","STARLUX Airlines"]],["樂桃航空",["APJ","MM","Peach Aviation"]],["法國航空",["AFR","AF","Air France"]],["聯合航空",["UAL","UA","United Airlines"]],["蝦皮購物",["shopee"]],["越捷航空",["VJC","VJ","VietJet Air"]],["達美航空",["DAL","DL","Delta Air Lines"]],["遠東百貨",["遠百"]],["酷航",["SCO","TR","Scoot"]],["長榮航空",["EVA","BR","EVA Airlines","EVA Air"]],["阿聯酋航空",["UAE","EK","Emirates"]],["麥當勞",["McDonald's"]],["IKEA",["宜家家居"]],["星巴克",["starbucks"]]],j=new rt(localStorage,{onlyShowCurrentPlan:o=>typeof o=="boolean",onlyShowCurrentPointExchange:o=>typeof o=="boolean",commonPaymentMethods:(()=>{const o=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]);return t=>Array.isArray(t)&&t.every(a=>o.has(a)===!0)})(),cardConfigs:(()=>{const o=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]),t=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]),a=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]),s=e=>typeof e.name=="string"&&(e.description===null||e.description===void 0||typeof e.description=="string")&&(e.cardUrl===null||typeof e.cardUrl=="string")&&(e.storeBlackList===void 0||Array.isArray(e.storeBlackList)&&e.storeBlackList.every(r=>typeof r=="string"))&&(e.paymentBlackList===void 0||Array.isArray(e.paymentBlackList)&&e.paymentBlackList.every(r=>o.has(r)===!0))&&(e.selectedPlanId===void 0||typeof e.selectedPlanId=="string"&&RegExp(/(.*)\x2d(.*)\x2d(.*)\x2d(.*)\x2d(.*)/).test(e.selectedPlanId))&&Array.isArray(e.plans)&&e.plans.every(r=>typeof r=="object"&&r!==null&&l(r))&&typeof e.updateAt=="string"&&RegExp(/^[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\x2d[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\x2d[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?T[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?:[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?:[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\.[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?Z$/).test(e.updateAt)&&(e.selectedPointExchangeId===void 0||typeof e.selectedPointExchangeId=="string"&&RegExp(/(.*)\x2d(.*)\x2d(.*)\x2d(.*)\x2d(.*)/).test(e.selectedPointExchangeId))&&Array.isArray(e.pointExchanges)&&e.pointExchanges.every(r=>typeof r=="object"&&r!==null&&S(r)),l=e=>typeof e.id=="string"&&RegExp(/(.*)\x2d(.*)\x2d(.*)\x2d(.*)\x2d(.*)/).test(e.id)&&typeof e.config=="object"&&e.config!==null&&u(e.config),u=e=>typeof e.name=="string"&&(e.description===null||e.description===void 0||typeof e.description=="string")&&Array.isArray(e.rewards)&&e.rewards.every(r=>typeof r=="object"&&r!==null&&h(r))&&(e.condition===null||e.condition===void 0||e.condition==="Birthday"),h=e=>typeof e.rewardStrategy=="object"&&e.rewardStrategy!==null&&V(e.rewardStrategy)&&(e.transactionType===null||e.transactionType===void 0||e.transactionType==="Domestic"||e.transactionType==="Foreign")&&(e.stores===void 0||Array.isArray(e.stores)&&e.stores.every(r=>typeof r=="string"))&&(e.storeBlackList===void 0||Array.isArray(e.storeBlackList)&&e.storeBlackList.every(r=>typeof r=="string"))&&(e.payments===void 0||Array.isArray(e.payments)&&e.payments.every(r=>t.has(r)===!0))&&(e.paymentBlackList===void 0||Array.isArray(e.paymentBlackList)&&e.paymentBlackList.every(r=>a.has(r)===!0))&&(e.condition===null||e.condition===void 0||e.condition==="Birthday"),m=e=>Array.isArray(e.pointBackRates)&&e.pointBackRates.every(r=>typeof r=="object"&&r!==null&&P(r))&&(e.name===null||typeof e.name=="string")&&e.type==="RoundedPercentageReward",P=e=>typeof e.rate=="number"&&(e.limit===void 0||typeof e.limit=="number"),A=e=>Array.isArray(e.pointBackRates)&&e.pointBackRates.every(r=>typeof r=="object"&&r!==null&&P(r))&&(e.name===null||typeof e.name=="string")&&e.type==="TruncatedPercentageReward",d=e=>typeof e.spendingPerPoint=="number"&&(e.name===null||typeof e.name=="string")&&e.type==="AccumulatedPointsReward",g=e=>typeof e.spendingPerPoint=="number"&&(e.name===null||typeof e.name=="string")&&e.type==="FixedRatePointsReward",S=e=>typeof e.id=="string"&&RegExp(/(.*)\x2d(.*)\x2d(.*)\x2d(.*)\x2d(.*)/).test(e.id)&&typeof e.config=="object"&&e.config!==null&&y(e.config),y=e=>typeof e.name=="string"&&typeof e.airlineCode=="string"&&typeof e.pointsPerMile=="number"&&typeof e.milesPerUnit=="number",V=e=>e.type==="TruncatedPercentageReward"?A(e):e.type==="RoundedPercentageReward"?m(e):e.type==="FixedRatePointsReward"?g(e):e.type==="AccumulatedPointsReward"?d(e):!1;return e=>Array.isArray(e)&&e.every(r=>typeof r=="object"&&r!==null&&s(r))})(),conditionTypes:o=>Array.isArray(o)&&o.every(t=>t==="Birthday"),aliasType:o=>o==="default"||o==="additional"||o==="custom",customAliases:Be},"bestMileageCards"),Xe=["default","additional","custom"],ce=st("BestMileageCards",()=>{const o=$(null);function t(n){o.value=n}function a(){o.value=null}qe(()=>{const n=j.get("cardConfigs")??[];A.value=new Map(n.map(x=>[L(),x]))});const s=$(j.get("onlyShowCurrentPlan")??!1);function l(n){j.set("onlyShowCurrentPlan",n),s.value=n}const u=$(j.get("onlyShowCurrentPointExchange")??!1);function h(n){j.set("onlyShowCurrentPointExchange",n),u.value=n}const m=$(j.get("commonPaymentMethods")??["信用卡","Apple Pay","Line Pay","街口支付"]);function P([...n]){n=[...new Set(n)],j.set("commonPaymentMethods",n),m.value=n}const A=$(new Map),d=q(()=>new Map([...A.value.entries()].map(([n,x])=>[n,Ne(x)]))),g=q(()=>d.value.size===0?Ct.map(n=>Ne(n)):[...d.value.values()]);function S(n,x){A.value.set(n,x),j.set("cardConfigs",[...A.value.values()])}function y(n){A.value.delete(n),j.set("cardConfigs",[...A.value.values()])}function V(n,x){const N=A.value.get(n);if(N===void 0)return!1;try{A.value.set(n,{...N,selectedPlanId:x})}catch{return!1}return j.set("cardConfigs",[...A.value.values()]),!0}function e(n,x){const N=A.value.get(n);if(N===void 0)return!1;try{A.value.set(n,{...N,selectedPointExchangeId:x})}catch{return!1}return j.set("cardConfigs",[...A.value.values()]),!0}const r=q(()=>Oe(Ue(g.value.flatMap(n=>n.storeList)))),D=$(j.get("conditionTypes")??[]);function H([...n]){D.value=n,j.set("conditionTypes",n)}const B=$(j.get("aliasType")??"default");function c(n){Xe.includes(n)&&(B.value=n,j.set("aliasType",n))}const p=$(new Map(j.get("customAliases")??[]));function b(n,x){x.length===0?p.value.delete(n):p.value.set(n,x),j.set("customAliases",[...p.value])}function k(n){p.value=new Map(n),j.set("customAliases",n)}const K=q(()=>{const n=[];["default","additional"].includes(B.value)&&n.push(...He),["additional","custom"].includes(B.value)&&n.push(...p.value);const x=new Map;for(const[N,G]of n){const M=x.get(N)??new Set;for(const X of G)M.add(X);x.set(N,M)}return x});return{dialog:Q(o),openDialog:t,closeDialog:a,onlyShowCurrentPlan:Q(s),updateOnlyShowCurrentPlan:l,onlyShowCurrentPointExchange:Q(u),updateOnlyShowCurrentPointExchange:h,commonPaymentMethods:Q(m),updateCommonPaymentMethods:P,cardConfigs:Q(A),cards:d,showCards:g,updateCardConfig:S,deleteCardConfig:y,updatePlan:V,updatePointExchange:e,storeList:Q(r),conditionTypes:Q(D),updateConditionTypes:H,aliasType:Q(B),storeAliases:K,updateAliasType:c,customAliases:Q(p),updateCustomAliases:b,updateAllCustomAliases:k}}),Rt={class:"flex-col gap-24px my-16px"},Et={class:"gap-8px flex justify-around"},Tt={class:"flex mx-16px"},Lt=ae({__name:"CommonSettings",setup(o){const t=ce(),{onlyShowCurrentPlan:a,onlyShowCurrentPointExchange:s,commonPaymentMethods:l,conditionTypes:u}=de(t);return(h,m)=>{const P=w("v-switch"),A=w("v-label");return _(),R("div",Rt,[f("div",Et,[i(P,{"model-value":C(a),"hide-details":"",color:"blue","onUpdate:modelValue":m[0]||(m[0]=d=>d!==null&&C(t).updateOnlyShowCurrentPlan(d))},{label:v(()=>m[4]||(m[4]=[f("p",{class:"text-0.75rem"},"只顯示當前方案",-1)])),_:1},8,["model-value"]),i(P,{"model-value":C(s),"hide-details":"",color:"blue","onUpdate:modelValue":m[1]||(m[1]=d=>d!==null&&C(t).updateOnlyShowCurrentPointExchange(d))},{label:v(()=>m[5]||(m[5]=[f("p",{class:"text-0.75rem"},"只顯示當前交換方式",-1)])),_:1},8,["model-value"])]),i(Te,{label:"使用中的付款方式","model-value":[...C(l)],list:C(Ke),"hide-details":"","show-selected":"","onUpdate:modelValue":m[2]||(m[2]=d=>d!==null&&C(t).updateCommonPaymentMethods(d))},null,8,["model-value","list"]),f("div",null,[i(A,{text:"其他設定"}),f("div",Tt,[i(P,{"model-value":C(u),label:"生日中",value:"Birthday","hide-details":"",color:"blue","onUpdate:modelValue":m[3]||(m[3]=d=>d!==null&&C(t).updateConditionTypes(d))},null,8,["model-value"])])])])}}}),Bt={class:"relative"},Ut={key:0,class:"text-red ml-2px"},Ee=ae({__name:"TextFiled",props:Qe({required:{type:Boolean,default:!1},label:{},isUrl:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const t=et(o,"modelValue"),a=q(()=>{const l=[];return o.required&&l.push(u=>!!u||"此欄位為必填"),o.isUrl&&l.push(u=>!!(u===null||u===""||u.startsWith("https://"))||"請填寫正確的網址 (需為 https:// 開頭)"),l});function s(l){l=(l==null?void 0:l.trim())??null,t.value=ve(l)?l:null}return(l,u)=>{const h=w("v-text-field");return _(),I(h,{clearable:"",rules:a.value,"model-value":t.value,"onUpdate:modelValue":s},{label:v(()=>[f("p",Bt,[O(T(l.label)+" ",1),l.required?(_(),R("span",Ut,"*")):W("",!0)])]),_:1},8,["rules","model-value"])}}});function le(o){if(o===null||typeof o!="object")return o;if(Array.isArray(o))return o.map(a=>le(a));if(o instanceof Map)return new Map(Array.from(o.entries()).map(([a,s])=>[le(a),le(s)]));if(o instanceof Set)return new Set(Array.from(o.values()).map(a=>le(a)));if(o instanceof Date)return new Date(o.getTime());if(o instanceof RegExp)return new RegExp(o.source,o.flags);const t={};return Object.keys(o).forEach(a=>{t[a]=le(o[a])}),t}const Mt={class:"flex-col gap-4px h-full overflow-hidden"},$t={class:"flex"},It={class:"flex-1 gap-8px flex-col overflow-y-auto py-8px"},Vt={class:"flex items-center justify-between"},Nt=["onClick"],Ot={key:0,class:"flex-col overflow-y-auto gap-2 p-16px"},Dt={class:"flex-col gap-8px mb-8"},Ft={class:"flex items-center justify-between gap-4px min-h-1rem"},Jt={class:"flex-col gap-8px mb-8"},Kt={class:"flex items-center justify-between gap-4px min-h-1rem"},Gt={class:"overflow-y-auto w-full p-24px"},jt={key:0,class:"flex-col gap-8px"},zt={class:"flex items-center justify-between gap-4px min-h-1rem"},Wt={class:"flex-col gap-1"},Ht={key:0,class:"opacity-50 text-0.75rem"},Xt={key:0,class:"mdi text-24px mdi-check-circle"},Yt={class:"flex items-center justify-between min-h-1rem gap-4px"},Zt={class:"flex-col gap-4px"},qt={class:"opacity-50 text-0.75rem"},Qt={key:0,class:"mdi mdi-check-circle text-24px"},ea={class:"flex-col gap-2 p-16px overflow-y-auto"},ta={class:"flex-col"},aa={class:"text-1rem"},na={class:"text-0.75rem"},la=ae({__name:"CreditCardManagement",setup(o){const t=ce(),{cardConfigs:a,cards:s}=de(t),l=$(null),u=$(null),h=q(()=>{const S=u.value===null?null:s.value.get(u.value)??null;return S===null?null:S}),m=$(!1),P=$([]);function A(){for(const S of P.value)t.updateCardConfig(L(),S),m.value=!1}function d(){l.value!==null&&(t.updateCardConfig(l.value.id,l.value.config),l.value=null)}function g(){l.value!==null&&(t.deleteCardConfig(l.value.id),l.value=null)}return(S,y)=>{const V=w("v-label"),e=w("v-btn"),r=w("v-card"),D=w("v-toolbar-title"),H=w("v-spacer"),B=w("v-toolbar-items"),c=w("v-toolbar"),p=w("v-card-text"),b=w("v-dialog"),k=w("v-card-actions"),K=w("v-checkbox");return _(),R(J,null,[f("div",Mt,[f("div",$t,[i(V,{class:"ml-4px flex-grow !text-0.9rem"},{default:v(()=>y[14]||(y[14]=[O(" 點擊 "),f("span",{class:"mdi mdi-pencil mx-4px"},null,-1),O(" 編輯卡片，點擊卡片切換方案 ")])),_:1}),i(e,{text:"匯入",onClick:y[0]||(y[0]=()=>{P.value=[],m.value=!0})})]),f("div",It,[(_(!0),R(J,null,z(C(a).entries(),([n,x],N)=>(_(),I(r,{key:N,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined",title:x.name,text:x.description??"",onClick:()=>u.value=n},{title:v(()=>[f("div",Vt,[O(T(x.name)+" ",1),f("span",{class:"mdi mdi-pencil absolute top-0 py-0.625rem px-1rem right-0",onClick:tt(()=>l.value={id:n,config:C(le)(x)},["stop"])},null,8,Nt)])]),_:2},1032,["title","text","onClick"]))),128))])]),i(b,{"model-value":!!l.value,fullscreen:"","onUpdate:modelValue":y[8]||(y[8]=n=>l.value=null)},{default:v(()=>[i(r,null,{default:v(()=>[i(c,null,{default:v(()=>[i(e,{icon:"mdi-close",onClick:y[1]||(y[1]=n=>l.value=null)}),i(D,null,{default:v(()=>y[15]||(y[15]=[O("編輯卡片")])),_:1}),i(H),i(B,null,{default:v(()=>[i(e,{text:"Save",onClick:d})]),_:1})]),_:1}),l.value?(_(),R("div",Ot,[i(Ee,{modelValue:l.value.config.name,"onUpdate:modelValue":y[2]||(y[2]=n=>l.value.config.name=n),label:"卡片名稱",required:""},null,8,["modelValue"]),i(Ee,{"model-value":l.value.config.description??"",label:"卡片描述","onUpdate:modelValue":y[3]||(y[3]=n=>l.value===null?null:l.value.config.description=n)},null,8,["model-value"]),i(Ee,{modelValue:l.value.config.cardUrl,"onUpdate:modelValue":y[4]||(y[4]=n=>l.value.config.cardUrl=n),"is-url":"",label:"信用卡網頁"},null,8,["modelValue"]),i(Te,{addable:"",label:"卡片不回饋清單","model-value":l.value.config.storeBlackList??[],list:C(t).storeList,"onUpdate:modelValue":y[5]||(y[5]=n=>l.value===null?null:l.value.config.storeBlackList=n)},null,8,["model-value","list"]),i(Te,{label:"卡片不回饋支付方式",searchable:"","model-value":l.value.config.paymentBlackList??[],list:C(Ke),"onUpdate:modelValue":y[6]||(y[6]=n=>l.value===null?null:l.value.config.paymentBlackList=n)},null,8,["model-value","list"]),f("div",Dt,[i(V,{class:"flex-shrink-0 w-full",text:"方案設定"}),(_(!0),R(J,null,z(l.value.config.plans,(n,x)=>(_(),I(r,{key:x,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined"},{default:v(()=>[i(p,null,{default:v(()=>[f("div",Ft,[f("p",null,T(n.config.name),1),y[16]||(y[16]=f("span",{class:"mdi mdi-delete text-24px"},null,-1))])]),_:2},1024)]),_:2},1024))),128)),i(r,{density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined"},{default:v(()=>[i(p,null,{default:v(()=>y[17]||(y[17]=[f("div",{class:"flex items-center justify-center min-h-1rem"},[f("span",{class:"mdi text-24px mdi-plus"})],-1)])),_:1})]),_:1})]),f("div",Jt,[i(V,{class:"flex-shrink-0 w-full",text:"點數交換方式"}),(_(!0),R(J,null,z(l.value.config.pointExchanges,(n,x)=>(_(),I(r,{key:x,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined"},{default:v(()=>[i(p,null,{default:v(()=>[f("div",Kt,[O(T(n.config.name)+" ",1),y[18]||(y[18]=f("span",{class:"mdi mdi-delete text-24px"},null,-1))])]),_:2},1024)]),_:2},1024))),128)),i(r,{density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined"},{default:v(()=>[i(p,null,{default:v(()=>y[19]||(y[19]=[f("div",{class:"flex items-center justify-center min-h-1rem"},[f("span",{class:"mdi mdi-plus text-24px"})],-1)])),_:1})]),_:1})]),i(e,{class:"text-red",text:"刪除",onClick:y[7]||(y[7]=n=>C(t).openDialog({text:"確定要刪除嗎？",events:[{text:"取消"},{text:"刪除",event:g,class:"text-red"}]}))})])):W("",!0)]),_:1})]),_:1},8,["model-value"]),i(b,{"model-value":!!u.value,"onUpdate:modelValue":y[10]||(y[10]=n=>u.value=null)},{default:v(()=>[i(r,{"min-width":"100%"},{default:v(()=>[i(p,{class:"overflow-hidden flex max-h-80dvh !p-0"},{default:v(()=>[f("div",Gt,[h.value!==null?(_(),R("div",jt,[y[20]||(y[20]=O(" 切換方案 ")),(_(!0),R(J,null,z(h.value.selectablePlan??[],(n,x)=>(_(),I(r,{key:x,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined",onClick:()=>u.value&&h.value&&n.id!==h.value.selectedPlanId&&C(t).updatePlan(u.value,n.id)},{default:v(()=>[i(p,null,{default:v(()=>[f("div",zt,[f("p",Wt,[O(T(n.name)+" ",1),n.description?(_(),R("span",Ht,T(n.description),1)):W("",!0)]),n.id===h.value.selectedPlanId?(_(),R("span",Xt)):W("",!0)])]),_:2},1024)]),_:2},1032,["onClick"]))),128)),y[21]||(y[21]=O(" 切換點數交換方式 ")),(_(!0),R(J,null,z(h.value.selectablePointExchange??[],(n,x)=>(_(),I(r,{key:x,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined",onClick:()=>u.value&&h.value&&n.id!==h.value.selectedPointExchangeId&&C(t).updatePointExchange(u.value,n.id)},{default:v(()=>[i(p,null,{default:v(()=>[f("div",Yt,[f("p",Zt,[O(T(n.name)+" ",1),f("span",qt,T(n.description),1)]),n.id===h.value.selectedPointExchangeId?(_(),R("span",Qt)):W("",!0)])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):W("",!0)])]),_:1}),i(k,null,{default:v(()=>[i(e,{class:"ms-auto",text:"Close",onClick:y[9]||(y[9]=n=>u.value=null)})]),_:1})]),_:1})]),_:1},8,["model-value"]),i(b,{modelValue:m.value,"onUpdate:modelValue":y[13]||(y[13]=n=>m.value=n),fullscreen:""},{default:v(()=>[i(r,null,{default:v(()=>[i(c,null,{default:v(()=>[i(e,{icon:"mdi-close",onClick:y[11]||(y[11]=n=>m.value=!1)}),i(D,null,{default:v(()=>y[22]||(y[22]=[O("請選擇卡片")])),_:1}),i(H),i(B,null,{default:v(()=>[i(e,{text:"匯入",onClick:A})]),_:1})]),_:1}),f("div",ea,[(_(!0),R(J,null,z(C(St),(n,x)=>(_(),I(K,{key:x,modelValue:P.value,"onUpdate:modelValue":y[12]||(y[12]=N=>P.value=N),value:n,"hide-details":"",color:"blue",density:"comfortable",class:"import-card-checkbox"},{label:v(()=>[f("div",ta,[f("p",aa,T(n.name),1),f("p",na,T(n.description),1)])]),_:2},1032,["modelValue","value"]))),128))])]),_:1})]),_:1},8,["modelValue"])],64)}}}),oa=Fe(la,[["__scopeId","data-v-a19275d2"]]),sa={class:"gap-8px h-full flex-col"},ia={class:"flex items-center flex-wrap gap-x-8px"},ra={class:"gap-8px flex-center"},da={ref:"rewardCardList",class:"flex-col gap-4px overflow-y-auto flex-grow-1"},ca={class:"flex items-center gap-4px overflow-hidden w-full"},ua={class:"opacity-50 flex-grow-1 text-12px truncate"},pa={key:0,class:"fa-solid fa-circle-check"},ma={class:"flex-col gap-8px"},ya={class:"text-0.75rem"},ga={class:"text-wrap"},va={class:"flex-col"},fa={class:"flex justify-between"},Pa=["href"],_a={key:0},ha={key:1},wa="其他店家",xa=ae({__name:"SearchReward",setup(o){const t=re(0),a=re(2),s=De(0),{onlyShowCurrentPlan:l,onlyShowCurrentPointExchange:u,commonPaymentMethods:h,showCards:m,conditionTypes:P,storeAliases:A,storeList:d}=de(ce()),g=$(0),S=$(null),y=$("Domestic"),V=$([]),e=oe("rewardCardList"),r=oe("storeAutoComplete"),D=q(()=>{const b=d.value.map(k=>({store:k,aliases:[...A.value.get(k)??[]]}));return[{store:wa},...b]});function H(b,k,K){return k=k.toLowerCase(),[b,...(K==null?void 0:K.raw.aliases)??[]].map(x=>x.toLowerCase()).some(x=>x.includes(k))}const B=q(()=>{var K;const b={amount:g.value,acceptedPayments:V.value,transactionAttributesType:y.value,currentConditions:[...P.value]};ve(S.value)&&(b.transactionStore=S.value);const k=[];for(const n of m.value){const x=n.getRewardInfos(b,{onlyCurrentPlan:l.value,onlyCurrentExchangeStrategy:u.value}),N=!l.value||!u.value,G=!u.value&&n.selectablePointExchange.length>1;for(const M of x){const X={cardName:n.name,planName:M.planName,rewardName:M.rewardName,miles:M.miles,payments:M.payments,airLinesCode:M.airlineCode,isSelectedPlan:N&&M.planId===n.selectedPlanId,calculateDetail:p(M.rewardStrategy,M.pointExchangeStrategy),description:M.rewardStrategy===null?null:`${M.rewardStrategy.description}，${M.pointExchangeStrategy.description}`,cardUrl:n.cardUrl,cardDescription:n.description,pointExchangeName:G?M.pointExchangeName:null};k.push(X)}}return(K=e.value)==null||K.scrollTo({top:0,behavior:"smooth"}),Ve(Ve(k,"isSelectedPlan","desc"),"miles","desc")}),c=$(null);function p(b,k){const{pointsPerMile:K,milesPerUnit:n,airlineCode:x}=k,N="回饋計算:";switch(b==null?void 0:b.type){case"RoundedPercentageReward":case"TruncatedPercentageReward":{const G=b.type==="RoundedPercentageReward"?t:s;let M=0;return[N,...b.pointBackRates.map(({rate:X,limit:ee})=>{const ne=Math.min(G(g.value*X/100),ee??1/0);M+=ne;const E=ee!==void 0?` (limit ${ee})`:"";return`${g.value} * ${X}% = ${ne}${E}`}),`總計 ${M} points`,`${M} / ${K} * ${n} = ${k.calculateMiles(M)} ${x}`]}case"AccumulatedPointsReward":{const G=a(g.value/b.spendingPerPoint);return[N,`${g.value} / ${b.spendingPerPoint} = ${G} points`,`${G} / ${K} * ${n} = ${k.calculateMiles(G)} ${x}`]}case"FixedRatePointsReward":{const G=s(g.value/b.spendingPerPoint);return[N,`${g.value} / ${b.spendingPerPoint} = ${G} points (小數省略)`,`${G} / ${K} * ${n} = ${k.calculateMiles(G)} ${x}`]}default:return[]}}return(b,k)=>{const K=w("v-text-field"),n=w("v-autocomplete"),x=w("v-label"),N=w("v-checkbox"),G=w("v-radio"),M=w("v-radio-group"),X=w("v-card"),ee=w("v-btn"),ne=w("v-dialog");return _(),R(J,null,[f("div",sa,[i(K,{"model-value":g.value,class:"flex-grow-0",density:"comfortable","hide-details":"",label:"交易金額",inputmode:"decimal",clearable:g.value!==0,"onUpdate:modelValue":k[0]||(k[0]=E=>g.value=isNaN(parseFloat(E))?0:parseFloat(E))},null,8,["model-value","clearable"]),i(n,{ref:"storeAutoComplete",modelValue:S.value,"onUpdate:modelValue":k[1]||(k[1]=E=>S.value=E),"custom-filter":H,class:"flex-grow-0",density:"comfortable","hide-details":"","item-value":"store","item-title":"store",items:D.value,clearable:C(ve)(S.value),placeholder:"全部店家","onUpdate:menu":k[2]||(k[2]=E=>{var Y;return!E&&((Y=C(r))==null?void 0:Y.blur())})},null,8,["modelValue","items","clearable"]),f("div",null,[i(x,{text:"店家可使用的付款方式"}),f("div",ia,[(_(!0),R(J,null,z(C(h),(E,Y)=>(_(),I(N,{key:Y,modelValue:V.value,"onUpdate:modelValue":k[3]||(k[3]=F=>V.value=F),density:"compact",value:E,"hide-details":"",label:E},null,8,["modelValue","value","label"]))),128))])]),f("div",ra,[i(x,{text:"交易類型"}),i(M,{modelValue:y.value,"onUpdate:modelValue":k[4]||(k[4]=E=>y.value=E),"hide-details":"",inline:""},{default:v(()=>[i(G,{density:"compact",label:"國內交易",value:"Domestic"}),i(G,{density:"compact",label:"國外交易",value:"Foreign"})]),_:1},8,["modelValue"])]),f("div",da,[(_(!0),R(J,null,z(B.value,(E,Y)=>(_(),I(X,{key:Y,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined",onClick:()=>c.value=E},{title:v(()=>[f("div",ca,[O(T(E.miles)+" ",1),f("p",ua,T(E.airLinesCode)+" "+T(E.payments.length===0?"":` (限定支付: ${E.payments.join(", ")})`),1),E.isSelectedPlan?(_(),R("i",pa)):W("",!0)])]),text:v(()=>[f("div",ma,[f("p",ya,T(`${E.cardName} ${E.planName??""} ${E.rewardName??""} ${E.pointExchangeName??""}`),1)])]),_:2},1032,["onClick"]))),128))],512)]),i(ne,{"model-value":!!c.value,"onUpdate:modelValue":k[6]||(k[6]=E=>c.value=null)},{default:v(()=>[c.value?(_(),I(X,{key:0,class:"mx-auto reward-detail-dialog","min-width":"100%",title:`${c.value.cardName} ${c.value.planName??""} ${c.value.rewardName??""}`},{subtitle:v(()=>[f("p",ga,T(c.value.description??""),1)]),text:v(()=>[f("div",va,[f("p",fa,[k[7]||(k[7]=O(" 卡片說明： ")),c.value.cardUrl!==null?(_(),R("a",{key:0,target:"_blank",class:"underline",href:c.value.cardUrl}," 網站 ",8,Pa)):W("",!0)]),c.value.cardDescription!==""||c.value.cardDescription!==null?(_(),R("p",_a,T(c.value.cardDescription),1)):W("",!0),c.value.pointExchangeName!==""?(_(),R("p",ha,T(c.value.pointExchangeName),1)):W("",!0),k[8]||(k[8]=f("br",null,null,-1)),f("p",null,"消費金額: "+T(g.value),1),f("p",null,"哩程預估: "+T(c.value.miles)+" "+T(c.value.airLinesCode),1),k[9]||(k[9]=f("br",null,null,-1)),(_(!0),R(J,null,z(c.value.calculateDetail,(E,Y)=>(_(),R("p",{key:Y},T(E),1))),128))])]),actions:v(()=>[i(ee,{class:"ms-auto",text:"Close",onClick:k[5]||(k[5]=E=>c.value=null)})]),_:1},8,["title"])):W("",!0)]),_:1},8,["model-value"])],64)}}}),Aa=Fe(xa,[["__scopeId","data-v-f3a51665"]]),ka={class:"flex-col h-full overflow-hidden gap-8px"},ba={class:"flex-shrink-0 flex-col gap-8px"},Ca={key:0,class:"flex justify-between items-center"},Sa={class:"flex gap-8px"},Ra={key:0,class:"gap-4px flex-col flex-grow-1 overflow-y-auto"},Ea={class:"text-1rem"},Ta={class:"text-0.8rem"},La={key:1,class:"flex-grow-1"},Ba={class:"flex-col gap-24px m-8px"},Ua={class:"flex-col gap-4px"},Ma=ae({__name:"StoreAliasManagement",setup(o){const t=ce(),{aliasType:a,customAliases:s,storeAliases:l}=de(t),u=oe("storeList"),h={default:"系統預設",additional:"預設+自定義",custom:"自定義"},m=$(!0),P=$(!1),A=$(!0),d=$("[]"),g=$(null),S=q(()=>{let c;return a.value==="default"?c=He:a.value==="additional"?c=[...l.value].map(([p,b])=>[p,[...b]]):c=[...s.value],c.map(([p,b])=>({title:p,aliases:[...b]}))});$e(()=>{var c;return(c=g.value)==null?void 0:c.title},c=>{if(c==null||g.value===null)return;const p=[...s.value.get(c)??[]];p[p.length-1]!==""&&p.push(""),g.value.aliases=p}),$e(m,H),at(()=>{H(),P.value=!1,A.value=!0,m.value=!0});function y(c,p){if(g.value===null)return;let b=g.value.aliases;b[p]=c,b[b.length-1]!==""&&b.push("")}function V(c){if(a.value!=="default")if(c===null)g.value={title:null,aliases:[]};else{const p=[...s.value.get(c)??[]];p[p.length-1]!==""&&p.push(""),g.value={title:c,aliases:p}}}function e(){const{title:c,aliases:p}=g.value??{};c==null||p===void 0||(t.updateCustomAliases(c,[...new Set(p)].filter(ve)),g.value=null)}function r(c){if(c=c.trim(),d.value=c,P.value=!0,c===""){A.value=!0;return}try{const p=JSON.parse(c);A.value=Be(p)}catch(p){console.error(p),A.value=!1}}function D(){let c;if(m.value)c=!0;else{d.value===""&&(d.value="[]");try{const p=JSON.parse(d.value);Be(p)?(t.updateAllCustomAliases(p),c=!0):c=!1}catch(p){console.error(p),c=!1}}c?(alert("儲存成功"),P.value=!1):alert(`儲存失敗${m.value?"":"，JSON 不符合規則"}`)}function H(){d.value=JSON.stringify([...s.value],null,2)}function B(c){P.value||(c==="default"&&(m.value=!0),t.updateAliasType(c))}return(c,p)=>{const b=w("v-label"),k=w("v-btn"),K=w("v-btn-toggle"),n=w("v-switch"),x=w("v-card"),N=w("v-textarea"),G=w("v-toolbar-title"),M=w("v-spacer"),X=w("v-toolbar-items"),ee=w("v-toolbar"),ne=w("v-autocomplete"),E=w("v-text-field"),Y=w("v-dialog");return _(),R(J,null,[f("div",ka,[f("div",ba,[i(b,{text:"別名設定"}),i(K,{"model-value":C(a),rounded:"0",group:"",class:"w-full flex justify-center",disabled:P.value,"onUpdate:modelValue":B},{default:v(()=>[(_(!0),R(J,null,z(C(Xe),(F,Z)=>(_(),I(k,{key:Z,class:"flex-1",value:F},{default:v(()=>[O(T(h[F]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["model-value","disabled"]),C(a)!=="default"?(_(),R("div",Ca,[f("div",Sa,[m.value?(_(),I(k,{key:0,onClick:p[0]||(p[0]=F=>V(null))},{default:v(()=>p[6]||(p[6]=[O(" Add ")])),_:1})):(_(),I(k,{key:1,onClick:D},{default:v(()=>p[7]||(p[7]=[O(" Save ")])),_:1}))]),i(n,{modelValue:m.value,"onUpdate:modelValue":p[1]||(p[1]=F=>m.value=F),disabled:P.value,"hide-details":"",label:"圖示"},null,8,["modelValue","disabled"])])):W("",!0)]),m.value?(_(),R("div",Ra,[(_(!0),R(J,null,z(S.value,(F,Z)=>(_(),I(x,{key:Z,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined",onClick:ie=>V(F.title)},{text:v(()=>[f("p",Ea,T(F.title),1),f("p",Ta,T(F.aliases.join(", ")),1)]),_:2},1032,["onClick"]))),128))])):(_(),R("div",La,[i(N,{"model-value":d.value,clearable:d.value!=="","auto-grow":"",disabled:C(a)==="default","max-rows":15,messages:P.value?"上方儲存完成後才能執行其他動作，離開這頁不會存檔":"","error-messages":A.value?"":"json 無效",label:"自定義別名設定檔","onUpdate:modelValue":r},null,8,["model-value","clearable","disabled","messages","error-messages"])]))]),i(Y,{"model-value":!!g.value,fullscreen:"","onUpdate:modelValue":p[5]||(p[5]=F=>g.value=null)},{default:v(()=>[g.value?(_(),I(x,{key:0},{default:v(()=>[i(ee,null,{default:v(()=>[i(k,{icon:"mdi-close",onClick:p[2]||(p[2]=F=>g.value=null)}),i(G,null,{default:v(()=>p[8]||(p[8]=[O("編輯商店別名")])),_:1}),i(M),i(X,null,{default:v(()=>[i(k,{text:"Save",variant:"text",onClick:e})]),_:1})]),_:1}),f("div",Ba,[i(ne,{ref:"storeList",modelValue:g.value.title,"onUpdate:modelValue":p[3]||(p[3]=F=>g.value.title=F),class:"flex-grow-0","hide-details":"",label:"目標店家",items:C(t).storeList,placeholder:"選擇店家","onUpdate:menu":p[4]||(p[4]=F=>{var Z;return!F&&((Z=C(u))==null?void 0:Z.blur())})},null,8,["modelValue","items"]),f("div",Ua,[i(b,{text:"自定義別名列表"}),(_(!0),R(J,null,z(g.value.aliases,(F,Z)=>(_(),I(E,{key:Z,"hide-details":"",clearable:"","model-value":F,"onUpdate:modelValue":ie=>y(ie,Z),"onClick:clear":()=>{var ie;return(ie=g.value)==null?void 0:ie.aliases.splice(Z,1)}},null,8,["model-value","onUpdate:modelValue","onClick:clear"]))),128))])])]),_:1})):W("",!0)]),_:1},8,["model-value"])],64)}}}),$a={style:{height:"calc(100dvh - 56px)"},class:"overflow-hidden mt-56px p-8px"},Ia={class:"w-full text-center"},Va={class:"w-full flex items-center justify-between px-8px"},Na=ae({__name:"App",setup(o){const t=ce(),{dialog:a}=de(t),s={查詢回饋:Aa,信用卡管理:oa,商家別名:Ma,喜好設定:Lt},l=Object.keys(s),u=$(!1),h=$(l[0]);return(m,P)=>{const A=w("v-app-bar-nav-icon"),d=w("v-app-bar-title"),g=w("v-app-bar"),S=w("v-list-item"),y=w("v-divider"),V=w("v-navigation-drawer"),e=w("v-app"),r=w("v-btn"),D=w("v-card"),H=w("v-dialog");return _(),R(J,null,[i(e,null,{default:v(()=>[i(g,{density:"comfortable",elevation:2},{prepend:v(()=>[i(A,{onClick:P[0]||(P[0]=B=>u.value=!u.value)},{default:v(()=>P[2]||(P[2]=[f("i",{class:"fa-solid fa-bars"},null,-1)])),_:1}),i(d,null,{default:v(()=>[O(T(h.value),1)]),_:1})]),_:1}),i(V,{modelValue:u.value,"onUpdate:modelValue":P[1]||(P[1]=B=>u.value=B)},{default:v(()=>[(_(!0),R(J,null,z(C(l),(B,c)=>(_(),R(J,{key:c},[i(S,{title:B,class:Ie(["h-48px",{"text-emphasis":h.value===B}]),onClick:()=>{h.value=B,u.value=!1}},null,8,["title","class","onClick"]),i(y)],64))),128))]),_:1},8,["modelValue"]),f("main",$a,[(_(),I(lt,null,[(_(),I(nt(s[h.value])))],1024))])]),_:1}),i(H,{"model-value":!!C(a),"onUpdate:modelValue":C(t).closeDialog},{default:v(()=>[C(a)!==null?(_(),I(D,{key:0,class:"mx-auto","min-width":"100%"},{text:v(()=>[f("div",Ia,T(C(a).text),1)]),actions:v(()=>[f("div",Va,[(_(!0),R(J,null,z(C(a).events,(B,c)=>(_(),I(r,{key:c,text:B.text,class:Ie(B.class),variant:"elevated",onClick:async()=>{"event"in B&&await B.event(),C(t).closeDialog()}},null,8,["text","class","onClick"]))),128))])]),_:1})):W("",!0)]),_:1},8,["model-value","onUpdate:modelValue"])],64)}}}),Me=ot(Na);Me.use(dt);Me.use(it());Me.mount("#app");
//# sourceMappingURL=bestMileageCards-DSMJXjMj.js.map
