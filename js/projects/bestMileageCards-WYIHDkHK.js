var Ye=Object.defineProperty;var Ze=(l,t,a)=>t in l?Ye(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a;var B=(l,t,a)=>Ze(l,typeof t!="symbol"?t+"":t,a);import{d as ee,e as ne,c as Z,B as w,g as f,v as V,C as h,x as p,D as O,t as R,u as b,b as I,o as qe,f as q,j as C,k as g,E as Qe,y as H,G as et,H as tt,F as J,l as W,z as ve,w as Me,I as at,m as $e,J as nt,K as lt,A as ot}from"../index-crv3UKoE.js";import{d as st,s as se,c as it}from"../pinia-BqKu192D.js";import{f as te,C as rt,v as dt}from"../StorageManager-CKGS_Kl4.js";import{a as Ne,b as Ie}from"../sorts-DmEn6gXZ.js";import{f as Oe,r as oe,b as Be,g as T,a as me}from"../index-f1g9dClV.js";import{_ as De}from"../_plugin-vue_export-helper-DlAUqK2U.js";const Ee=ee({__name:"ClipList",props:{modelValue:{},list:{},label:{},message:{},searchable:{type:Boolean,default:!1},addable:{type:Boolean,default:!1},showSelected:{type:Boolean,default:!1},hideDetails:{type:Boolean,default:!1}},emits:["update:model-value"],setup(l,{emit:t}){const a=ne("comboboxComponent"),o=ne("autocompleteComponent"),i=ne("selectComponent"),r=t,P=Z(()=>Ne(l.list));function c(d){const m=l.modelValue.filter(_=>_!==d);v(m)}function v([...d]){r("update:model-value",d)}function x(d){return function(m){!m&&d!==null&&d.blur()}}return(d,m)=>{const _=w("v-chip"),$=w("v-combobox"),N=w("v-autocomplete"),e=w("v-select");return d.addable?(f(),V($,{key:0,ref_key:"comboboxComponent",ref:a,"model-value":d.modelValue,items:P.value,messages:d.message??"",label:d.label,multiple:"","hide-details":d.hideDetails,"hide-selected":!d.showSelected,"onUpdate:modelValue":v,"onUpdate:menu":m[0]||(m[0]=u=>x(b(a)))},{selection:h(({item:u})=>[p(_,{closable:"","onClick:close":D=>c(u.value)},{default:h(()=>[O(R(u.value),1)]),_:2},1032,["onClick:close"])]),_:1},8,["model-value","items","messages","label","hide-details","hide-selected"])):d.searchable?(f(),V(N,{key:1,ref_key:"autocompleteComponent",ref:o,"model-value":d.modelValue,items:P.value,messages:d.message??"","hide-details":d.hideDetails,label:d.label,multiple:"","hide-selected":!d.showSelected,"clear-on-select":"","onUpdate:modelValue":v,"onUpdate:menu":m[1]||(m[1]=u=>x(b(o)))},{selection:h(({item:u})=>[p(_,{closable:"","onClick:close":D=>c(u.value)},{default:h(()=>[O(R(u.value),1)]),_:2},1032,["onClick:close"])]),_:1},8,["model-value","items","messages","hide-details","label","hide-selected"])):(f(),V(e,{key:2,ref_key:"selectComponent",ref:i,"model-value":d.modelValue,items:P.value,messages:d.message??"","hide-details":d.hideDetails,label:d.label,multiple:"","hide-selected":!d.showSelected,"onUpdate:modelValue":v,"onUpdate:menu":m[2]||(m[2]=u=>x(b(i)))},{selection:h(({item:u})=>[p(_,{closable:"","onClick:close":D=>c(u.value)},{default:h(()=>[O(R(u.value),1)]),_:2},1032,["onClick:close"])]),_:1},8,["model-value","items","messages","hide-details","label","hide-selected"]))}}}),Fe=Oe(0),ct=oe(0),Re=oe(2);class ye{constructor({type:t,name:a}){B(this,"_name");B(this,"_type");this._type=t,this._name=a}get name(){return this._name}get type(){return this._type}calculateRangePointsCost(t,a){const o=[];for(let c=t;c<=a;c++){const v=Re(c/this.calculatePoints(c));isNaN(v)||v===1/0||v===-1/0||o.push(v)}o.sort((c,v)=>c-v);const i=o[o.length-1],r=o[0];if(i===void 0||r===void 0)throw new Error("cannot be calculated");const P=o.reduce((c,v)=>c+v,0)/o.length;return{max:i,min:r,average:Re(P)}}}class ut extends ye{constructor({pointBackRates:a,...o}){super(o);B(this,"_pointBackRates");this._pointBackRates=a}get _maxRete(){return this._pointBackRates.reduce((a,{rate:o})=>a+o,0)}get pointBackRates(){return this._pointBackRates}get description(){return`消費${this._pointBackRates.length>1?"最高":""}${this._maxRete.toString()}%回饋點數(四捨五入)`}calculatePoints(a){let o=0;for(const{rate:i,limit:r=1/0}of this._pointBackRates)o+=Math.min(ct(a*(i/100)),r);return o}toJSON(){return{name:this._name,type:this._type,pointBackRates:this._pointBackRates}}}class pt extends ye{constructor({pointBackRates:a,...o}){super(o);B(this,"_pointBackRates");this._pointBackRates=a}get _maxRete(){return this._pointBackRates.reduce((a,{rate:o})=>a+o,0)}get pointBackRates(){return this._pointBackRates}get description(){return`消費${this._pointBackRates.length>1?"最高":""}${this._maxRete.toString()}%回饋點數(無條件捨去)`}calculatePoints(a){let o=0;for(const{rate:i,limit:r=1/0}of this._pointBackRates)o+=Math.min(Fe(a*(i/100)),r);return o}toJSON(){return{name:this._name,type:this._type,pointBackRates:this._pointBackRates}}}class mt extends ye{constructor({spendingPerPoint:a,...o}){super({...o});B(this,"_spendingPerPoint");this._spendingPerPoint=a}get spendingPerPoint(){return this._spendingPerPoint}get description(){return`每消費${this._spendingPerPoint.toString()}元累積1點 (小數會累計)`}calculatePoints(a){return Re(a/this._spendingPerPoint)}toJSON(){return{name:this._name,type:this._type,spendingPerPoint:this._spendingPerPoint}}}class yt extends ye{constructor({spendingPerPoint:a,...o}){super({...o});B(this,"_spendingPerPoint");this._spendingPerPoint=a}get spendingPerPoint(){return this._spendingPerPoint}get description(){return`每消費${this._spendingPerPoint.toString()}元累積1點 (小數不累計)`}calculatePoints(a){return Fe(a/this._spendingPerPoint)}toJSON(){return{name:this._name,type:this._type,spendingPerPoint:this._spendingPerPoint}}}const gt={RoundedPercentageReward:ut,TruncatedPercentageReward:pt,AccumulatedPointsReward:mt,FixedRatePointsReward:yt};function vt(l){return new gt[l.type](l)}class ft{constructor(t,a,o,i){B(this,"_name");B(this,"_description");B(this,"_rewards");B(this,"_condition");if(this._name=t,this._description=a,this._condition=o,i.length===0)throw new Error(`Plan "${t??"unknown"}" must have at least one reward rule.`);this._rewards=i}get name(){return this._name}get description(){return this._description}get storeList(){return Be(this._rewards.flatMap(t=>[...t.stores,...t.storeBlackList]))}checkPlanIsVisible(t){return this._condition===null||!!(t!=null&&t.includes(this._condition))}getApplicableReward({transactionStore:t=null,acceptedPayments:a=[],transactionAttributesType:o,currentConditions:i=null}){return this._condition!==null&&!(i!=null&&i.includes(this._condition))?null:this._rewards.find(({stores:r,payments:P,transactionType:c,paymentBlackList:v,storeBlackList:x,condition:d})=>{const m=t===null||r.size===0||r.has(t),_=t===null||x.size===0||!x.has(t),$=a.length===0||P.size===0||a.some(D=>P.has(D)),N=a.length===0||v.size===0||a.some(D=>!v.has(D)),e=c===null||o===c,u=d===null||!!(i!=null&&i.includes(d));return m&&_&&$&&N&&e&&u})??null}getRewardMiles({transactionStore:t,acceptedPayments:a,amount:o,transactionAttributesType:i,currentConditions:r}){const P=this.getApplicableReward({acceptedPayments:a,transactionStore:t,transactionAttributesType:i,currentConditions:r});if(P===null)return null;const c=a===void 0?[...P.payments.values()]:a.filter(v=>P.payments.has(v));return{rewardName:P.rewardStrategy.name,rewardPoints:P.rewardStrategy.calculatePoints(o),payments:c.filter(v=>!P.paymentBlackList.has(v)),rewardStrategy:P.rewardStrategy}}toJSON(){return{name:this._name,description:this._description,condition:this._condition,rewards:this._rewards.map(({rewardStrategy:t,stores:a,payments:o,transactionType:i,paymentBlackList:r,storeBlackList:P,condition:c})=>({rewardStrategy:t.toJSON(),stores:[...a],storeBlackList:[...P],payments:[...o],paymentBlackList:[...r],transactionType:i,condition:c}))}}}const Je=["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"];class ht{constructor({name:t,description:a,plans:o,storeBlackList:i,paymentBlackList:r,cardUrl:P,updateAt:c,pointExchanges:v,selectedPlanId:x,selectedPointExchangeId:d}){B(this,"_selectedPlanId");B(this,"_selectedPointExchangeId");B(this,"_name");B(this,"_description");B(this,"_plans");B(this,"_cardUrl");B(this,"_storeBlackList");B(this,"_paymentBlackList");B(this,"_updateAt");B(this,"_pointExchanges");this._name=t,this._description=a,this._plans=o,this._cardUrl=P,this._storeBlackList=i,this._paymentBlackList=r,this._updateAt=c,this._pointExchanges=v;const m=x??this._plans.keys().next().value??null;if(m===null)throw new Error(`this plan id ${m} not found`);this._selectedPlanId=m;const _=d??this._pointExchanges.keys().next().value??null;if(_===null)throw new Error(`this point exchange id ${_} not found`);this._selectedPointExchangeId=_}get name(){return this._name}get description(){return this._description}get selectedPlanId(){return this._selectedPlanId}get selectedPlan(){return this._getPlan(this._selectedPlanId)}get selectedPointExchangeId(){return this._selectedPointExchangeId}get selectedPointExchange(){return this._getPointExchangeStrategy(this._selectedPointExchangeId)}get selectablePlan(){return[...this._plans.entries()].map(([t,{name:a,description:o}])=>({id:t,name:a,description:o}))}get selectablePointExchange(){return[...this._pointExchanges.entries()].map(([t,{name:a,description:o}])=>({id:t,name:a,description:o}))}get storeList(){return Be([...[...this._plans.values()].flatMap(t=>t.storeList),...this._storeBlackList])}get cardUrl(){return this._cardUrl}_getPlan(t){const a=this._plans.get(t);if(a===void 0)throw new Error(`plan id ${t} not found. Available plans: ${[...this._plans.keys()].join(", ")}`);return a}_getPointExchangeStrategy(t){const a=this._pointExchanges.get(t);if(a===void 0)throw new Error(`pointExchangeStrategy id ${t} not found. Available pointExchanges: ${[...this._plans.keys()].join(", ")}`);return a}_rewardMilesWithPlan(t,a,o){var d;const i=this._getPlan(t),r=this._getPointExchangeStrategy(a),P={planId:t,planName:i.name,rewardName:null,rewardPoints:0,payments:[],rewardStrategy:null,pointExchangeStrategy:r,pointExchangeName:r.name,airlineCode:r.airlineCode,miles:0},c=o.transactionStore!==void 0&&this._storeBlackList.has(o.transactionStore),v=(d=o.acceptedPayments)==null?void 0:d.some(m=>this._paymentBlackList.has(m));if(c||v)return P;const x=i.getRewardMiles(o);return x===null?P:{planId:t,planName:i.name,pointExchangeStrategy:r,pointExchangeName:r.name,miles:r.calculateMiles(x.rewardPoints),airlineCode:r.airlineCode,...x}}getRewardInfos(t,{onlyCurrentPlan:a=!1,onlyCurrentExchangeStrategy:o=!1}={}){const i=a?[[this._selectedPlanId,this.selectedPlan]]:[...this._plans.entries()],r=o?[this._selectedPointExchangeId]:[...this._pointExchanges.keys()],P=[];for(const[c,v]of i)if(v.checkPlanIsVisible(t.currentConditions??null))for(const d of r){const m=this._rewardMilesWithPlan(c,d,t);P.push(m)}return P}toJSON(){return{name:this._name,description:this._description,cardUrl:this._cardUrl,storeBlackList:[...this._storeBlackList],paymentBlackList:[...this._paymentBlackList],selectedPlanId:this._selectedPlanId,plans:[...this._plans].map(([t,a])=>({id:t,config:a.toJSON()})),updateAt:this._updateAt.toISOString(),selectedPointExchangeId:this._selectedPointExchangeId,pointExchanges:[...this._pointExchanges].map(([t,a])=>({id:t,config:a.toJSON()}))}}}const Pt=oe(2);class _t{constructor({name:t,airlineCode:a,pointsPerMile:o,milesPerUnit:i}){B(this,"_name");B(this,"_airlineCode");B(this,"_pointsPerMile");B(this,"_milesPerUnit");this._name=t,this._airlineCode=a,this._pointsPerMile=o,this._milesPerUnit=i}get name(){return this._name}get description(){return`${this._pointsPerMile}點可以交換${this._milesPerUnit}哩程`}get airlineCode(){return this._airlineCode}get pointsPerMile(){return this._pointsPerMile}get milesPerUnit(){return this._milesPerUnit}calculateMiles(t){return Pt(t*this._milesPerUnit/this._pointsPerMile)}toJSON(){return{name:this._name,airlineCode:this._airlineCode,pointsPerMile:this._pointsPerMile,milesPerUnit:this._milesPerUnit}}}function Ve({name:l,description:t,storeBlackList:a,paymentBlackList:o,cardUrl:i,plans:r,updateAt:P,pointExchanges:c,selectedPlanId:v,selectedPointExchangeId:x}){const d=new Map(r.map(({id:m,config:{name:_,description:$,condition:N,rewards:e}})=>[m,new ft(_,$??null,N??null,e.map(({stores:u,payments:D,transactionType:X,rewardStrategy:U,paymentBlackList:n,storeBlackList:s,condition:A})=>({rewardStrategy:vt(U),stores:new Set(u),storeBlackList:new Set(s),payments:new Set(D),paymentBlackList:new Set(n),transactionType:X??null,condition:A??null})))]));return new ht({name:l,description:t??null,plans:d,storeBlackList:new Set(a),paymentBlackList:new Set(o),cardUrl:i,updateAt:new Date(P),selectedPlanId:v??null,selectedPointExchangeId:x??null,pointExchanges:new Map(c.map(({id:m,config:_})=>[m,new _t(_)]))})}const ce=ge("2024/12/31"),le=ge("2025/6/30","2025/1/1");function ge(l,t){return t===void 0?`權益 ~${te(l,"yyyy/M/d")}`:te(t,"yyyy")===te(l,"yyyy")?`權益 ${te(t,"yyyy/M/d")}~${te(l,"M/d")}`:`權益 ${te(t,"yyyy/M/d")}~${te(l,"yyyy/M/d")}`}const fe=["分期付款"],he=[],Pe=["信用卡","Apple Pay","Samsung Pay","Google Pay","Fitbit Pay","Garmin Pay","Hami Pay"];function _e(l){const t={rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:.3}]}};return[{id:T(),config:{name:"集精選",description:"量販超市, 指定加油, 指定超商, 生活家居",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:2}]},stores:["家樂福","LOPIA台灣","全聯福利中心","台灣中油-直營","7-ELEVEN","全家便利商店","IKEA"],payments:[...Pe,"PX Pay","My FamiPay","OPEN錢包"]},t]}},{id:T(),config:{name:"玩數位",description:"數位/串流平台, 網購平台, 國際電商, 辦公神器",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:l}]},stores:["App Store","Apple Music","iCloud","Apple TV+","Apple Arcade","Apple One","iTunes","Google Play","Disney+","Netflix","Spotify","KKBOX","YouTube Premium","Max","蝦皮購物","momo購物網","PChome 24h購物(不含儲值及電子票券)","小樹購","Coupang 酷澎(台灣)","淘寶/天貓","ChatGPT","Dropbox","Surfshark","NordVPN","McAfee","Microsoft","LinkedIn","Whoscall","Zoom"],paymentBlackList:["Line Pay","街口支付"]},{...t,storeBlackList:["全聯福利中心"]}]}},{id:T(),config:{name:"樂饗購",description:"國內指定百貨, 國內外送平台, 國內餐飲, 國內藥妝",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:l}]},stores:["遠東SOGO百貨","遠東Garden City","太平洋百貨","新光三越","SKM Park","BELLAVITA","微風廣場","遠東百貨","Big City遠東巨城購物中心","誠品生活","環球購物中心","CITYLINK","統一時代","台北101","ATT 4 FUN","明曜百貨","京站","美麗華","大葉高島屋","比漾廣場","大江國際購物中心","中友百貨","廣三SOGO","Tiger City","勤美誠品綠園道","大魯閣新時代","耐斯廣場","南紡購物中心","夢時代","漢神百貨","漢神巨蛋","MITSUI OUTLET PARK 林口","MITSUI OUTLET PARK 台中港","MITSUI OUTLET PARK 台南","Mitsui Shopping Park LaLaport 台中","義大世界購物廣場","華泰名品城","義享天地","麗寶OUTLET Mall","秀泰生活","台茂購物中心","新月廣場","三創生活","宏匯廣場","NOKE忠泰樂生活","Uber Eats","foodpanda","foodomo","國內餐飲(不含餐券)","麥當勞","康是美","屈臣氏"],payments:Pe},{...t,storeBlackList:["全聯福利中心"]}]}},{id:T(),config:{name:"趣旅行",description:"指定海外消費, 日本指定遊樂園, 國內外交通, 指定航空公司, 指定飯店住宿, 旅遊/訂房平台, 指定旅行社",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:l}]},stores:["海外實體消費","東京迪士尼樂園","東京華納兄弟哈利波特影城","大阪環球影城(USJ)","Apple Wallet SUICA","Apple Wallet PASMO","Apple Wallet ICOCA","Uber","Grab","台灣高鐵","yoxi","台灣大車隊","iRent","和運租車","格上租車","中華航空","長榮航空","星宇航空","台灣虎航","國泰航空","樂桃航空","阿聯酋航空","酷航","捷星航空","日本航空","亞洲航空","聯合航空","ANA全日空","新加坡航空","越捷航空","大韓航空","達美航空","土耳其航空","卡達航空","法國航空","國內飯店住宿","星野集團","全球迪士尼飯店","東橫INN","KKday","Agoda","Klook","Airbnb","Hotels.com","Expedia","Booking.com","Trip.com","AsiaYo","ezTravel易遊網","雄獅旅遊","可樂旅遊","東南旅遊","五福旅遊","燦星旅遊","山富旅遊","長汎假期","鳳凰旅行社","Ezfly易飛網","理想旅遊","永利旅行社","三賀旅行社"],payments:Pe},{...t,storeBlackList:["全聯福利中心"]}]}},{id:T(),config:{name:"來支付",description:"LINE Pay消費",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:2}]},payments:["Line Pay"]},{...t,storeBlackList:["全聯福利中心"]}]}},{id:T(),config:{name:"慶生月",description:"指定百貨/休閒娛樂/國內外送平台 3.5%, 國外精選遊樂園實體消費/國內人氣樂園/指定蛋糕甜點店/指定咖啡廳/指定國內餐廳/KTV/派對/電玩 10%",condition:"Birthday",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:10}]},stores:["東京迪士尼樂園","大阪環球影城(USJ)","名古屋樂高樂園","紅葉蛋糕官方網站","法朋烘焙甜點坊","興波咖啡 華山旗艦店","海底撈火鍋","輕井澤鍋物","老四川巴蜀麻辣燙","二本松涮涮屋","橋山.壽喜燒","Umai屋馬燒肉","老井極上燒肉","燒肉中山(台中大墩)","藏壽司台灣","貳樓","膳馨民間創作料理","馨苑小料理","雅室牛排 仁愛圓環店","ABV餐飲集團","WAT","臺虎精釀(信義 | 西門 | 臺中 | 啜飲室大安)","BAR Bodega","BAR MED","JiN Her 今鶴","錢櫃KTV","好樂迪KTV","星聚點KTV","享溫馨KTV","Nintendo","巴哈姆特動畫瘋","閃動格子CyberCube"]},{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:3.5}]},stores:["新光三越","Uber Eats (不含 Uber One)","Agoda","Trip.com","Klook","國內飯店住宿","星野集團","全球迪士尼飯店","東橫INN"]},{...t,storeBlackList:["全聯福利中心"]}]}}]}const we=[{id:T(),config:{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:360,milesPerUnit:1e3}},{id:T(),config:{name:"長榮航空哩程 + 長榮世界卡",airlineCode:"EVA",pointsPerMile:300,milesPerUnit:1e3}}],Ke=[{name:"Cube 卡",description:`Cube 卡 (Level 1) 回饋方案 (${le})`,cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/cube/",storeBlackList:fe,paymentBlackList:he,updateAt:"2024-12-01T00:00:00.000Z",plans:_e(2),pointExchanges:we},{name:"Cube 卡",description:`Cube 卡 (Level 2) 回饋方案 (${le})`,cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/cube/",storeBlackList:fe,paymentBlackList:he,updateAt:"2024-12-01T00:00:00.000Z",plans:_e(3),pointExchanges:we},{name:"Cube 卡",description:`Cube 卡 (Level 3) 回饋方案 (${le})`,cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/cube/",storeBlackList:fe,paymentBlackList:he,updateAt:"2024-12-01T00:00:00.000Z",plans:_e(3.3),pointExchanges:we}],wt=Ke[1];function xe(l){return[{id:T(),config:{name:null,description:"部分回饋需要另外登錄",rewards:[{rewardStrategy:{type:"FixedRatePointsReward",name:`Expedia專屬網頁線上訂房 ${ge("2025/12/31")}`,spendingPerPoint:8},stores:["Expedia"],payments:["Apple Pay","Samsung Pay","Google Pay","Fitbit Pay","Garmin Pay","Hami Pay"]},{rewardStrategy:{type:"FixedRatePointsReward",name:"長榮官網購票/機上免稅品",spendingPerPoint:10},stores:["長榮機上免稅品","長榮官網購票"]},{rewardStrategy:{type:"FixedRatePointsReward",name:"海外消費",spendingPerPoint:10},transactionType:"Foreign"},{rewardStrategy:{type:"FixedRatePointsReward",name:"國內旅行社 (需登錄) 銀行並未公告符合商家",spendingPerPoint:10},transactionType:"Domestic",stores:["雄獅旅遊","可樂旅遊","東南旅遊","五福旅遊","燦星旅遊","山富旅遊","長汎假期","鳳凰旅行社","Ezfly易飛網","理想旅遊","永利旅行社","三賀旅行社"]},{rewardStrategy:{type:"FixedRatePointsReward",name:"國外自由行、團體旅遊 (需登錄) 銀行並未公告符合商家",spendingPerPoint:10},transactionType:"Foreign"},{rewardStrategy:{type:"FixedRatePointsReward",name:"一般消費",spendingPerPoint:l}}]}}]}const re=[{id:T(),config:{name:"長榮航空哩程 (每1000哩為單位自動轉換至哩程帳戶)",airlineCode:"EVA",pointsPerMile:1e3,milesPerUnit:1e3}}],de=ge("2025/3/31","2025/1/1"),Ge=[{name:"長榮極致無限卡",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/eva/",description:de,updateAt:"2024-12-29T00:00:00.000Z",plans:xe(20),pointExchanges:re},{name:"長榮無限卡",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/eva/",description:de,updateAt:"2024-12-29T00:00:00.000Z",plans:xe(22),pointExchanges:re},{name:"長榮極致御璽卡",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/eva/",description:de,updateAt:"2024-12-29T00:00:00.000Z",plans:xe(30),pointExchanges:re},{name:"長榮御璽卡",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/eva/",description:de,updateAt:"2024-12-29T00:00:00.000Z",plans:[{id:T(),config:{name:null,description:null,rewards:[{rewardStrategy:{type:"FixedRatePointsReward",name:"一般消費",spendingPerPoint:30}}]}}],pointExchanges:re}],xt=Ge[1],ue=["政府稅款","公共事業代扣繳","交通違規罰鍰","分期付款","全聯福利中心","7-ELEVEN","全家便利商店"],pe=[],At=[{name:"星宇世界卡",description:ce,cardUrl:"https://www.esunbank.com/zh-tw/personal/credit-card/intro/co-branded-card/starlux-card",storeBlackList:ue,paymentBlackList:pe,pointExchanges:[{id:T(),config:{name:"星宇航空哩程",airlineCode:"SJX",pointsPerMile:1,milesPerUnit:1}}],plans:[{id:T(),config:{name:null,rewards:[{rewardStrategy:{type:"FixedRatePointsReward",name:"國外消費 (生日兩倍)",spendingPerPoint:5},transactionType:"Foreign",condition:"Birthday"},{rewardStrategy:{type:"FixedRatePointsReward",name:"國外消費",spendingPerPoint:10},transactionType:"Foreign"},{rewardStrategy:{type:"FixedRatePointsReward",name:"國內消費",spendingPerPoint:20},transactionType:"Domestic"}]}}],updateAt:new Date("2024/12/01 00:00:00").toISOString()},{name:"星宇商務鈦金卡",description:ce,cardUrl:"https://www.esunbank.com/zh-tw/personal/credit-card/intro/co-branded-card/starlux-card",storeBlackList:ue,paymentBlackList:pe,pointExchanges:[{id:T(),config:{name:"星宇航空哩程",airlineCode:"SJX",pointsPerMile:1,milesPerUnit:1}}],plans:[{id:T(),config:{name:null,rewards:[{rewardStrategy:{type:"FixedRatePointsReward",name:"國外消費",spendingPerPoint:7.5},transactionType:"Foreign",condition:"Birthday"},{rewardStrategy:{type:"FixedRatePointsReward",name:"國外消費",spendingPerPoint:15},transactionType:"Foreign"},{rewardStrategy:{type:"FixedRatePointsReward",name:"國內消費",spendingPerPoint:25},transactionType:"Domestic"}]}}],updateAt:new Date("2024/12/01 00:00:00").toISOString()},{name:"星宇鈦金卡",description:ce,cardUrl:"https://www.esunbank.com/zh-tw/personal/credit-card/intro/co-branded-card/starlux-card",storeBlackList:ue,paymentBlackList:pe,pointExchanges:[{id:T(),config:{name:"星宇航空哩程",airlineCode:"SJX",pointsPerMile:1,milesPerUnit:1}}],plans:[{id:T(),config:{name:null,rewards:[{rewardStrategy:{type:"FixedRatePointsReward",name:"國外消費",spendingPerPoint:20},transactionType:"Foreign"},{rewardStrategy:{type:"FixedRatePointsReward",name:"國內消費",spendingPerPoint:28},transactionType:"Domestic"}]}}],updateAt:new Date("2024/12/01 00:00:00").toISOString()}],Ae=["台灣中油-直營","台灣大車隊","台鐵","台灣高鐵","UBER","Yoxi","LINEGO","新光三越","遠東百貨","遠東SOGO百貨","誠品生活","漢神百貨","微風廣場","微風信義","微風南京","微風南山","微風台北車站","環球購物中心","台北101","華泰名品城","MITSUI OUTLET PARK 林口","MITSUI OUTLET PARK 台中港","MITSUI OUTLET PARK 台南","Big City遠東巨城購物中心","昇恆昌","夢時代購物中心","京站","美麗華","南紡購物中心","秀泰生活","台茂購物中心","Mitsui Shopping Park LaLaport 台中","統領廣場","采盟","Uber Eats","foodpanda","星巴克","EZTABLE","王品瘋美食","摩斯漢堡","foodomo","漢來美食","饗Joy","饗食天堂","果然匯","小福利","饗饗","旭集","開飯","饗泰多","真珠","瓦城","非常泰","大心","1010","時時香","BOBO","乾杯集團","路易莎","中華航空","長榮航空","日本航空","台灣虎航","樂桃航空","酷航","立榮航空","華信航空","Agoda","booking.com","Hotels.com","AsiaYo","Expedia","KKday","Klook","雄獅旅遊","可樂旅遊","東南旅行社","Apple直營店","小米台灣","全國電子","燦坤","迪卡儂","屈臣氏","康是美","IKEA","特力屋","特力和樂","UNIQLO","NET","大樹藥局","丁丁藥妝","momo購物網","蝦皮購物","淘寶網","Coupang酷澎","東森購物","雅虎奇摩購物中心","博客來","玉山Wallet愛心捐款-單筆捐款","玉山Wallet愛心捐款-定期定額","特斯拉","Gogoro電池資費","YouBike 2.0","日本實體店","韓國實體店","泰國實體店","越南實體店","新加坡實體店","中國實體店","香港實體店","澳門實體店","美國實體店","英國實體店","法國實體店","德國實體店","義大利實體店"],ke={rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7}]}},je=[{name:"UniCard 卡",description:ce,cardUrl:"https://www.esunbank.com/zh-tw/personal/credit-card/intro/bank-card/unicard",storeBlackList:ue,paymentBlackList:pe,pointExchanges:[{id:T(),config:{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:200,milesPerUnit:300}}],plans:[{id:T(),config:{name:"任意選 (需要切換店家)",description:"玉山Wallet設定8家特店",rewards:[{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2.5,limit:500}]},stores:Ae,payments:["信用卡","Apple Pay","Samsung Pay","Google Pay"]},{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2.5,limit:500}]},payments:["Line Pay","街口支付","悠遊付","橘子支付","icash pay"]},ke]}},{id:T(),config:{name:"簡單選",rewards:[{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2,limit:500}]},stores:Ae,payments:["信用卡","Apple Pay","Samsung Pay","Google Pay"]},{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2,limit:500}]},payments:["Line Pay","街口支付","悠遊付","橘子支付","icash pay"]},ke]}},{id:T(),config:{name:"UP選",description:"完成指定任務或99點玉山e point訂閱",rewards:[{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:3.5,limit:2e3}]},stores:Ae,payments:["信用卡","Apple Pay","Samsung Pay","Google Pay"]},{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:3.5,limit:2e3}]},payments:["Line Pay","街口支付","悠遊付","橘子支付","icash pay"]},ke]}}],updateAt:new Date("2024/12/01 00:00:00").toISOString()}],kt=je[0],be=["政府稅款","公共事業代扣繳","交通違規罰鍰","分期付款"],Ce=["全盈+PAY","icash pay","OPEN錢包","My FamiPay"],ze=[{name:"旅人無限卡",description:le,cardUrl:"https://www.hsbc.com.tw/credit-cards/products/travel/visa-infinite/",storeBlackList:be,paymentBlackList:Ce,pointExchanges:[{id:T(),config:{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:1,milesPerUnit:1}}],plans:[{id:T(),config:{name:null,rewards:[{rewardStrategy:{type:"AccumulatedPointsReward",name:"國外消費",spendingPerPoint:10},transactionType:"Foreign"},{rewardStrategy:{type:"AccumulatedPointsReward",name:"國內消費",spendingPerPoint:18},transactionType:"Domestic"}]}}],updateAt:new Date("2024/12/01 00:00:00").toISOString()},{name:"旅人御璽卡",description:le,cardUrl:"https://www.hsbc.com.tw/credit-cards/products/travel/visa-signature/",storeBlackList:be,paymentBlackList:Ce,pointExchanges:[{id:T(),config:{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:1,milesPerUnit:1}}],plans:[{id:T(),config:{name:null,rewards:[{rewardStrategy:{type:"AccumulatedPointsReward",name:"國外消費",spendingPerPoint:15},transactionType:"Foreign"},{rewardStrategy:{type:"AccumulatedPointsReward",name:"國內消費",spendingPerPoint:18},transactionType:"Domestic"}]}}],updateAt:new Date("2024/12/01 00:00:00").toISOString()},{name:"旅人輕旅卡",description:le,cardUrl:"https://www.hsbc.com.tw/credit-cards/products/travel/visa-light/",storeBlackList:be,paymentBlackList:Ce,pointExchanges:[{id:T(),config:{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:1,milesPerUnit:1}}],plans:[{id:T(),config:{name:null,rewards:[{rewardStrategy:{type:"AccumulatedPointsReward",name:"國外消費",spendingPerPoint:20},transactionType:"Foreign"},{rewardStrategy:{type:"AccumulatedPointsReward",name:"國內消費",spendingPerPoint:20},transactionType:"Domestic"}]}}],updateAt:new Date("2024/12/01 00:00:00").toISOString()}],bt=ze[2],Ct=[xt,wt,bt,kt],St=[...Ge,...Ke,...ze,...At,...je],Te=l=>Array.isArray(l)&&l.every(t=>Array.isArray(t)&&t.length===2&&typeof t[0]=="string"&&Array.isArray(t[1])&&t[1].every(a=>typeof a=="string")),We=[["7-ELEVEN",["7-11","Seven Eleven","統一超商","小7"]],["ANA全日空",["ANA","全日空","All Nippon Airways","NH"]],["ATT 4 FUN",["ATT4FUN","ATT信義"]],["App Store",["蘋果應用商店"]],["Apple Arcade",["蘋果遊戲訂閱服務"]],["Apple Music",["蘋果音樂","Apple音樂"]],["Apple One",["蘋果One訂閱"]],["Apple TV+",["Apple TV Plus"]],["Apple Wallet ICOCA",["ICOCA電子票","Apple錢包ICOCA"]],["Apple Wallet PASMO",["PASMO電子票","Apple錢包PASMO"]],["Apple Wallet SUICA",["SUICA電子票","Apple錢包SUICA"]],["CITYLINK",["City Link"]],["Disney+",["Disney Plus","迪士尼+"]],["Google Play",["Google應用商店"]],["Grab",["Grab Taxi","Grab叫車"]],["MITSUI OUTLET PARK 台中港",["三井台中港","三井OUTLET台中"]],["MITSUI OUTLET PARK 台南",["三井台南","三井OUTLET台南"]],["MITSUI OUTLET PARK 林口",["三井林口","三井OUTLET林口"]],["Mitsui Shopping Park LaLaport 台中",["LaLaport台中","三井LaLaport台中"]],["Netflix",["網飛"]],["Nintendo",["任天堂","Switch","老任"]],["PChome 24h購物(不含儲值及電子票券)",["PChome","PChome購物"]],["Tiger City",["老虎城","Tiger City購物中心"]],["Trip.com",["攜程"]],["Uber Eats (不含 Uber One)",["優步外送"]],["foodpanda",["熊貓外送","Food Panda"]],["iCloud",["蘋果雲端","iCloud雲端"]],["iRent",["i Rent"]],["iTunes",["蘋果iTunes"]],["中友百貨",["中友"]],["中華航空",["China Airlines","CAL","CI","華航"]],["亞洲航空",["AirAsia","亞航","AXM","AK"]],["京站",["Q Square","京站商場"]],["全家便利商店",["FamilyMart","全家"]],["全球迪士尼飯店",["Disney Hotels"]],["全聯福利中心",["PX Mart"]],["南紡購物中心",["Tainan Spinnery Mall","南紡"]],["博客來",["Books.com.tw"]],["卡達航空",["Qatar Airways","卡航","QTR","QR"]],["可樂旅遊",["Cola Travel","可樂旅行社"]],["台北101",["Taipei 101","101大樓"]],["台灣中油-直營",["中油直營","直營中油"]],["台灣大車隊",["Taiwan Taxi","大車隊"]],["台灣虎航",["Tigerair Taiwan","台虎","TWA","IT"]],["台灣高鐵",["Taiwan High Speed Rail"]],["台茂購物中心",["TaiMall"]],["吉卜力公園",["Ghibli Park"]],["國泰航空",["Cathay Pacific","國泰","CPA","CX","Cathay Pacific Airways"]],["土耳其航空",["Turkish Airlines","土航","THY","TK"]],["夢時代",["Dream Mall"]],["大阪環球影城(USJ)",["Universal Studios Japan"]],["大韓航空",["Korean Air","韓航","KAL","KE"]],["大魯閣新時代",["Taroko Mall","大魯閣"]],["太平洋百貨",["Pacific Department Store","太平洋"]],["好樂迪KTV",["Holiday"]],["家樂福",["Carrefour"]],["屈臣氏",["Watsons"]],["康是美",["Cosmed"]],["捷星航空",["JST","JQ","Jetstar Airways"]],["新加坡航空",["SIA","SQ","Singapore Airlines"]],["日本航空",["JAL","JL","Japan Airlines"]],["星宇航空",["starlux","SJX","JX","STARLUX Airlines"]],["樂桃航空",["APJ","MM","Peach Aviation"]],["法國航空",["AFR","AF","Air France"]],["聯合航空",["UAL","UA","United Airlines"]],["蝦皮購物",["shopee"]],["越捷航空",["VJC","VJ","VietJet Air"]],["達美航空",["DAL","DL","Delta Air Lines"]],["遠東百貨",["遠百"]],["酷航",["SCO","TR","Scoot"]],["長榮航空",["EVA","BR","EVA Airlines","EVA Air"]],["阿聯酋航空",["UAE","EK","Emirates"]],["麥當勞",["McDonald's"]],["IKEA",["宜家家居"]],["星巴克",["starbucks"]]],j=new rt(localStorage,{onlyShowCurrentPlan:l=>typeof l=="boolean",onlyShowCurrentPointExchange:l=>typeof l=="boolean",commonPaymentMethods:(()=>{const l=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]);return t=>Array.isArray(t)&&t.every(a=>l.has(a)===!0)})(),cardConfigs:(()=>{const l=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]),t=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]),a=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]),o=e=>typeof e.name=="string"&&(e.description===null||e.description===void 0||typeof e.description=="string")&&(e.cardUrl===null||typeof e.cardUrl=="string")&&(e.storeBlackList===void 0||Array.isArray(e.storeBlackList)&&e.storeBlackList.every(u=>typeof u=="string"))&&(e.paymentBlackList===void 0||Array.isArray(e.paymentBlackList)&&e.paymentBlackList.every(u=>l.has(u)===!0))&&(e.selectedPlanId===void 0||typeof e.selectedPlanId=="string"&&RegExp(/(.*)\x2d(.*)\x2d(.*)\x2d(.*)\x2d(.*)/).test(e.selectedPlanId))&&Array.isArray(e.plans)&&e.plans.every(u=>typeof u=="object"&&u!==null&&i(u))&&typeof e.updateAt=="string"&&RegExp(/^[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\x2d[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\x2d[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?T[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?:[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?:[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\.[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?Z$/).test(e.updateAt)&&(e.selectedPointExchangeId===void 0||typeof e.selectedPointExchangeId=="string"&&RegExp(/(.*)\x2d(.*)\x2d(.*)\x2d(.*)\x2d(.*)/).test(e.selectedPointExchangeId))&&Array.isArray(e.pointExchanges)&&e.pointExchanges.every(u=>typeof u=="object"&&u!==null&&_(u)),i=e=>typeof e.id=="string"&&RegExp(/(.*)\x2d(.*)\x2d(.*)\x2d(.*)\x2d(.*)/).test(e.id)&&typeof e.config=="object"&&e.config!==null&&r(e.config),r=e=>(e.name===null||typeof e.name=="string")&&(e.description===null||e.description===void 0||typeof e.description=="string")&&Array.isArray(e.rewards)&&e.rewards.every(u=>typeof u=="object"&&u!==null&&P(u))&&(e.condition===null||e.condition===void 0||e.condition==="Birthday"),P=e=>typeof e.rewardStrategy=="object"&&e.rewardStrategy!==null&&N(e.rewardStrategy)&&(e.transactionType===null||e.transactionType===void 0||e.transactionType==="Domestic"||e.transactionType==="Foreign")&&(e.stores===void 0||Array.isArray(e.stores)&&e.stores.every(u=>typeof u=="string"))&&(e.storeBlackList===void 0||Array.isArray(e.storeBlackList)&&e.storeBlackList.every(u=>typeof u=="string"))&&(e.payments===void 0||Array.isArray(e.payments)&&e.payments.every(u=>t.has(u)===!0))&&(e.paymentBlackList===void 0||Array.isArray(e.paymentBlackList)&&e.paymentBlackList.every(u=>a.has(u)===!0))&&(e.condition===null||e.condition===void 0||e.condition==="Birthday"),c=e=>Array.isArray(e.pointBackRates)&&e.pointBackRates.every(u=>typeof u=="object"&&u!==null&&v(u))&&(e.name===null||typeof e.name=="string")&&e.type==="RoundedPercentageReward",v=e=>typeof e.rate=="number"&&(e.limit===void 0||typeof e.limit=="number"),x=e=>Array.isArray(e.pointBackRates)&&e.pointBackRates.every(u=>typeof u=="object"&&u!==null&&v(u))&&(e.name===null||typeof e.name=="string")&&e.type==="TruncatedPercentageReward",d=e=>typeof e.spendingPerPoint=="number"&&(e.name===null||typeof e.name=="string")&&e.type==="AccumulatedPointsReward",m=e=>typeof e.spendingPerPoint=="number"&&(e.name===null||typeof e.name=="string")&&e.type==="FixedRatePointsReward",_=e=>typeof e.id=="string"&&RegExp(/(.*)\x2d(.*)\x2d(.*)\x2d(.*)\x2d(.*)/).test(e.id)&&typeof e.config=="object"&&e.config!==null&&$(e.config),$=e=>typeof e.name=="string"&&typeof e.airlineCode=="string"&&typeof e.pointsPerMile=="number"&&typeof e.milesPerUnit=="number",N=e=>e.type==="TruncatedPercentageReward"?x(e):e.type==="RoundedPercentageReward"?c(e):e.type==="FixedRatePointsReward"?m(e):e.type==="AccumulatedPointsReward"?d(e):!1;return e=>Array.isArray(e)&&e.every(u=>typeof u=="object"&&u!==null&&o(u))})(),conditionTypes:l=>Array.isArray(l)&&l.every(t=>t==="Birthday"),aliasType:l=>l==="default"||l==="additional"||l==="custom",customAliases:Te},"bestMileageCards"),He=["default","additional","custom"],ie=st("BestMileageCards",()=>{const l=I(null);function t(y){l.value=y}function a(){l.value=null}qe(()=>{const y=j.get("cardConfigs")??[];x.value=new Map(y.map(S=>[T(),S]))});const o=I(j.get("onlyShowCurrentPlan")??!1);function i(y){j.set("onlyShowCurrentPlan",y),o.value=y}const r=I(j.get("onlyShowCurrentPointExchange")??!1);function P(y){j.set("onlyShowCurrentPointExchange",y),r.value=y}const c=I(j.get("commonPaymentMethods")??["信用卡","Apple Pay","Line Pay","街口支付"]);function v([...y]){y=[...new Set(y)],j.set("commonPaymentMethods",y),c.value=y}const x=I(new Map),d=Z(()=>new Map([...x.value.entries()].map(([y,S])=>[y,Ve(S)]))),m=Z(()=>d.value.size===0?Ct.map(y=>Ve(y)):[...d.value.values()]);function _(y,S){x.value.set(y,S),j.set("cardConfigs",[...x.value.values()])}function $(y){x.value.delete(y),j.set("cardConfigs",[...x.value.values()])}function N(y,S){const K=x.value.get(y);if(K===void 0)return!1;try{x.value.set(y,{...K,selectedPlanId:S})}catch{return!1}return j.set("cardConfigs",[...x.value.values()]),!0}function e(y,S){const K=x.value.get(y);if(K===void 0)return!1;try{x.value.set(y,{...K,selectedPointExchangeId:S})}catch{return!1}return j.set("cardConfigs",[...x.value.values()]),!0}const u=Z(()=>Ne(Be(m.value.flatMap(y=>y.storeList)))),D=I(j.get("conditionTypes")??[]);function X([...y]){D.value=y,j.set("conditionTypes",y)}const U=I(j.get("aliasType")??"default");function n(y){He.includes(y)&&(U.value=y,j.set("aliasType",y))}const s=I(new Map(j.get("customAliases")??[]));function A(y,S){S.length===0?s.value.delete(y):s.value.set(y,S),j.set("customAliases",[...s.value])}function k(y){s.value=new Map(y),j.set("customAliases",y)}const F=Z(()=>{const y=[];["default","additional"].includes(U.value)&&y.push(...We),["additional","custom"].includes(U.value)&&y.push(...s.value);const S=new Map;for(const[K,G]of y){const M=S.get(K)??new Set;for(const L of G)M.add(L);S.set(K,M)}return S});return{dialog:q(l),openDialog:t,closeDialog:a,onlyShowCurrentPlan:q(o),updateOnlyShowCurrentPlan:i,onlyShowCurrentPointExchange:q(r),updateOnlyShowCurrentPointExchange:P,commonPaymentMethods:q(c),updateCommonPaymentMethods:v,cardConfigs:q(x),cards:d,showCards:m,updateCardConfig:_,deleteCardConfig:$,updatePlan:N,updatePointExchange:e,storeList:q(u),conditionTypes:q(D),updateConditionTypes:X,aliasType:q(U),storeAliases:F,updateAliasType:n,customAliases:q(s),updateCustomAliases:A,updateAllCustomAliases:k}}),Et={class:"flex-col gap-24px my-16px"},Rt={class:"gap-8px flex justify-around"},Tt={class:"flex mx-16px"},Lt=ee({__name:"CommonSettings",setup(l){const t=ie(),{onlyShowCurrentPlan:a,onlyShowCurrentPointExchange:o,commonPaymentMethods:i,conditionTypes:r}=se(t);return(P,c)=>{const v=w("v-switch"),x=w("v-label");return f(),C("div",Et,[g("div",Rt,[p(v,{"model-value":b(a),"hide-details":"",color:"blue","onUpdate:modelValue":c[0]||(c[0]=d=>d!==null&&b(t).updateOnlyShowCurrentPlan(d))},{label:h(()=>c[4]||(c[4]=[g("p",{class:"text-0.75rem"},"只顯示當前方案",-1)])),_:1},8,["model-value"]),p(v,{"model-value":b(o),"hide-details":"",color:"blue","onUpdate:modelValue":c[1]||(c[1]=d=>d!==null&&b(t).updateOnlyShowCurrentPointExchange(d))},{label:h(()=>c[5]||(c[5]=[g("p",{class:"text-0.75rem"},"只顯示當前交換方式",-1)])),_:1},8,["model-value"])]),p(Ee,{label:"使用中的付款方式","model-value":[...b(i)],list:b(Je),"hide-details":"","show-selected":"","onUpdate:modelValue":c[2]||(c[2]=d=>d!==null&&b(t).updateCommonPaymentMethods(d))},null,8,["model-value","list"]),g("div",null,[p(x,{text:"其他設定"}),g("div",Tt,[p(v,{"model-value":b(r),label:"生日中",value:"Birthday","hide-details":"",color:"blue","onUpdate:modelValue":c[3]||(c[3]=d=>d!==null&&b(t).updateConditionTypes(d))},null,8,["model-value"])])])])}}}),Bt={key:0,class:"overflow-y-auto p-16px"},Le=ee({__name:"FullscreenDialog",props:{modelValue:{},title:{},btnTitle:{},btnEvent:{type:Function}},emits:["update:model-value"],setup(l,{emit:t}){const a=t;function o(){a("update:model-value",null)}function i(r){a("update:model-value",r)}return(r,P)=>{const c=w("v-btn"),v=w("v-toolbar-title"),x=w("v-spacer"),d=w("v-toolbar-items"),m=w("v-toolbar"),_=w("v-card"),$=w("v-dialog");return f(),V($,{"model-value":!!r.modelValue,fullscreen:"","onUpdate:modelValue":o},{default:h(()=>[p(_,null,{default:h(()=>[p(m,null,{default:h(()=>[p(c,{icon:"mdi-close",onClick:o}),p(v,null,{default:h(()=>[O(R(r.title??""),1)]),_:1}),p(x),p(d,null,{default:h(()=>[p(c,{text:r.btnTitle,onClick:r.btnEvent},null,8,["text","onClick"])]),_:1})]),_:1}),r.modelValue?(f(),C("div",Bt,[Qe(r.$slots,"default",{data:r.modelValue,updateData:i})])):H("",!0)]),_:3})]),_:3},8,["model-value"])}}}),Ut={class:"relative"},Mt={key:0,class:"text-red ml-2px"},Se=ee({__name:"TextFiled",props:et({required:{type:Boolean,default:!1},label:{},isUrl:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const t=tt(l,"modelValue"),a=Z(()=>{const i=[];return l.required&&i.push(r=>!!r||"此欄位為必填"),l.isUrl&&i.push(r=>!!(r===null||r===""||r.startsWith("https://"))||"請填寫正確的網址 (需為 https:// 開頭)"),i});function o(i){i=(i==null?void 0:i.trim())??null,t.value=me(i)?i:null}return(i,r)=>{const P=w("v-text-field");return f(),V(P,{clearable:"",rules:a.value,"model-value":t.value,"onUpdate:modelValue":o},{label:h(()=>[g("p",Ut,[O(R(i.label)+" ",1),i.required?(f(),C("span",Mt,"*")):H("",!0)])]),_:1},8,["rules","model-value"])}}});function ae(l){if(l===null||typeof l!="object")return l;if(Array.isArray(l))return l.map(a=>ae(a));if(l instanceof Map)return new Map(Array.from(l.entries()).map(([a,o])=>[ae(a),ae(o)]));if(l instanceof Set)return new Set(Array.from(l.values()).map(a=>ae(a)));if(l instanceof Date)return new Date(l.getTime());if(l instanceof RegExp)return new RegExp(l.source,l.flags);const t={};return Object.keys(l).forEach(a=>{t[a]=ae(l[a])}),t}const $t={class:"flex-col gap-4px h-full overflow-hidden"},It={class:"flex"},Vt={class:"flex-1 gap-8px flex-col overflow-y-auto py-8px"},Nt={class:"flex items-center justify-between"},Ot=["onClick"],Dt={class:"flex-col gap-2"},Ft={class:"flex-col gap-8px mb-8"},Jt={class:"flex items-center justify-between gap-4px min-h-1rem"},Kt=["onClick"],Gt={class:"flex-col gap-8px mb-8"},jt={class:"flex items-center justify-between gap-4px min-h-1rem"},zt=["onClick"],Wt={class:"overflow-y-auto w-full p-24px"},Ht={key:0,class:"flex-col gap-8px"},Xt={class:"flex items-center justify-between gap-4px min-h-1rem"},Yt={class:"flex-col gap-1"},Zt={key:0,class:"opacity-50 text-0.75rem"},qt={key:0,class:"mdi text-24px mdi-check-circle"},Qt={class:"flex items-center justify-between min-h-1rem gap-4px"},ea={class:"flex-col gap-4px"},ta={class:"opacity-50 text-0.75rem"},aa={key:0,class:"mdi mdi-check-circle text-24px"},na={class:"flex-col gap-2"},la={class:"flex-col"},oa={class:"text-1rem"},sa={class:"text-0.75rem"},ia=ee({__name:"CreditCardManagement",setup(l){const t=ie(),{cardConfigs:a,cards:o}=se(t),i=I(null),r=I(null),P=Z(()=>{const m=r.value===null?null:o.value.get(r.value)??null;return m===null?null:m}),c=I(null);function v(){if(c.value!==null)for(const m of c.value)t.updateCardConfig(T(),m),c.value=null}function x(){i.value!==null&&(t.updateCardConfig(i.value.id,i.value.config),i.value=null)}function d(){i.value!==null&&(t.deleteCardConfig(i.value.id),i.value=null)}return(m,_)=>{const $=w("v-label"),N=w("v-btn"),e=w("v-card"),u=w("v-card-text"),D=w("v-card-actions"),X=w("v-dialog"),U=w("v-checkbox");return f(),C(J,null,[g("div",$t,[g("div",It,[p($,{class:"ml-4px flex-grow !text-0.9rem"},{default:h(()=>_[6]||(_[6]=[O(" 點擊 "),g("span",{class:"mdi mdi-pencil mx-4px"},null,-1),O(" 編輯卡片，點擊卡片切換方案 ")])),_:1}),p(N,{text:"匯入",onClick:_[0]||(_[0]=()=>c.value=[])})]),g("div",Vt,[(f(!0),C(J,null,W(b(a).entries(),([n,s],A)=>(f(),V(e,{key:A,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined",title:s.name,text:s.description??"",onClick:()=>r.value=n},{title:h(()=>[g("div",Nt,[O(R(s.name)+" ",1),g("span",{class:"mdi mdi-pencil absolute top-0 py-0.625rem px-1rem right-0",onClick:ve(()=>i.value={id:n,config:b(ae)(s)},["stop"])},null,8,Ot)])]),_:2},1032,["title","text","onClick"]))),128))])]),p(Le,{modelValue:i.value,"onUpdate:modelValue":_[2]||(_[2]=n=>i.value=n),title:"編輯卡片","btn-title":"Save","btn-event":x},{default:h(({data:n})=>[g("div",Dt,[p(Se,{modelValue:n.config.name,"onUpdate:modelValue":s=>n.config.name=s,label:"卡片名稱",required:""},null,8,["modelValue","onUpdate:modelValue"]),p(Se,{"model-value":n.config.description??"",label:"卡片描述","onUpdate:modelValue":s=>n.config.description=s},null,8,["model-value","onUpdate:modelValue"]),p(Se,{modelValue:n.config.cardUrl,"onUpdate:modelValue":s=>n.config.cardUrl=s,"is-url":"",label:"信用卡網頁"},null,8,["modelValue","onUpdate:modelValue"]),p(Ee,{addable:"",label:"卡片不回饋清單","model-value":n.config.storeBlackList??[],list:b(t).storeList,"onUpdate:modelValue":s=>n.config.storeBlackList=s},null,8,["model-value","list","onUpdate:modelValue"]),p(Ee,{label:"卡片不回饋支付方式","show-selected":"","model-value":n.config.paymentBlackList??[],list:b(Je),"onUpdate:modelValue":s=>n.config.paymentBlackList=s},null,8,["model-value","list","onUpdate:modelValue"]),g("div",Ft,[p($,{class:"flex-shrink-0 w-full",text:"方案設定"}),(f(!0),C(J,null,W(n.config.plans,(s,A)=>(f(),V(e,{key:A,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined"},{default:h(()=>[p(u,null,{default:h(()=>[g("div",Jt,[O(R(s.config.name??"預設")+" ",1),g("span",{class:"mdi mdi-delete text-24px",onClick:ve(()=>b(t).openDialog({text:`確定要刪除'${s.config.name??"預設"}'方案嗎？`,events:[{text:"取消"},{text:"刪除",event:()=>{n.config.plans.splice(A,1)},class:"text-red"}]}),["stop"])},null,8,Kt)])]),_:2},1024)]),_:2},1024))),128)),p(e,{density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined"},{default:h(()=>[p(u,null,{default:h(()=>_[7]||(_[7]=[g("div",{class:"flex items-center justify-center min-h-1rem"},[g("span",{class:"mdi text-24px mdi-plus"})],-1)])),_:1})]),_:1})]),g("div",Gt,[p($,{class:"flex-shrink-0 w-full",text:"點數交換方式"}),(f(!0),C(J,null,W(n.config.pointExchanges,(s,A)=>(f(),V(e,{key:A,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined"},{default:h(()=>[p(u,null,{default:h(()=>[g("div",jt,[O(R(s.config.name)+" ",1),g("span",{class:"mdi mdi-delete text-24px",onClick:ve(()=>b(t).openDialog({text:`確定要刪除'${s.config.name??"預設"}'點數交換方式嗎？`,events:[{text:"取消"},{text:"刪除",event:()=>{n.config.pointExchanges.splice(A,1)},class:"text-red"}]}),["stop"])},null,8,zt)])]),_:2},1024)]),_:2},1024))),128)),p(e,{density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined"},{default:h(()=>[p(u,null,{default:h(()=>_[8]||(_[8]=[g("div",{class:"flex items-center justify-center min-h-1rem"},[g("span",{class:"mdi mdi-plus text-24px"})],-1)])),_:1})]),_:1})]),p(N,{class:"text-red",text:"刪除",onClick:_[1]||(_[1]=s=>b(t).openDialog({text:"確定要刪除嗎？",events:[{text:"取消"},{text:"刪除",event:d,class:"text-red"}]}))})])]),_:1},8,["modelValue"]),p(X,{"model-value":!!r.value,"onUpdate:modelValue":_[4]||(_[4]=n=>r.value=null)},{default:h(()=>[p(e,{"min-width":"100%"},{default:h(()=>[p(u,{class:"overflow-hidden flex max-h-80dvh !p-0"},{default:h(()=>[g("div",Wt,[P.value!==null?(f(),C("div",Ht,[_[9]||(_[9]=O(" 切換方案 ")),(f(!0),C(J,null,W(P.value.selectablePlan??[],(n,s)=>(f(),V(e,{key:s,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined",onClick:()=>r.value&&P.value&&n.id!==P.value.selectedPlanId&&b(t).updatePlan(r.value,n.id)},{default:h(()=>[p(u,null,{default:h(()=>[g("div",Xt,[g("p",Yt,[O(R(n.name??"預設")+" ",1),n.description?(f(),C("span",Zt,R(n.description),1)):H("",!0)]),n.id===P.value.selectedPlanId?(f(),C("span",qt)):H("",!0)])]),_:2},1024)]),_:2},1032,["onClick"]))),128)),_[10]||(_[10]=O(" 切換點數交換方式 ")),(f(!0),C(J,null,W(P.value.selectablePointExchange??[],(n,s)=>(f(),V(e,{key:s,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined",onClick:()=>r.value&&P.value&&n.id!==P.value.selectedPointExchangeId&&b(t).updatePointExchange(r.value,n.id)},{default:h(()=>[p(u,null,{default:h(()=>[g("div",Qt,[g("p",ea,[O(R(n.name)+" ",1),g("span",ta,R(n.description),1)]),n.id===P.value.selectedPointExchangeId?(f(),C("span",aa)):H("",!0)])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):H("",!0)])]),_:1}),p(D,null,{default:h(()=>[p(N,{class:"ms-auto",text:"Close",onClick:_[3]||(_[3]=n=>r.value=null)})]),_:1})]),_:1})]),_:1},8,["model-value"]),p(Le,{modelValue:c.value,"onUpdate:modelValue":_[5]||(_[5]=n=>c.value=n),title:"請選擇卡片","btn-title":"匯入","btn-event":v},{default:h(({data:n,updateData:s})=>[g("div",na,[(f(!0),C(J,null,W(b(St),(A,k)=>(f(),V(U,{key:k,"model-value":n,value:A,"hide-details":"",color:"blue",density:"comfortable",class:"import-card-checkbox","onUpdate:modelValue":F=>F&&s(F)},{label:h(()=>[g("div",la,[g("p",oa,R(A.name),1),g("p",sa,R(A.description),1)])]),_:2},1032,["model-value","value","onUpdate:modelValue"]))),128))])]),_:1},8,["modelValue"])],64)}}}),ra=De(ia,[["__scopeId","data-v-208ec274"]]),da={class:"gap-8px h-full flex-col"},ca={class:"flex items-center flex-wrap gap-x-8px"},ua={class:"gap-8px flex-center"},pa={ref:"rewardCardList",class:"flex-col gap-4px overflow-y-auto flex-grow-1"},ma={class:"flex items-center gap-4px overflow-hidden w-full"},ya={class:"opacity-50 flex-grow-1 text-12px truncate"},ga={key:0,class:"fa-solid fa-circle-check"},va={class:"flex-col gap-8px"},fa={class:"text-0.75rem"},ha={class:"text-wrap"},Pa={class:"flex-col"},_a={class:"flex justify-between"},wa=["href"],xa={key:0},Aa={key:1},ka="其他店家",ba=ee({__name:"SearchReward",setup(l){const t=oe(0),a=oe(2),o=Oe(0),{onlyShowCurrentPlan:i,onlyShowCurrentPointExchange:r,commonPaymentMethods:P,showCards:c,conditionTypes:v,storeAliases:x,storeList:d}=se(ie()),m=I(0),_=I(null),$=I("Domestic"),N=I([]),e=ne("rewardCardList"),u=ne("storeAutoComplete"),D=Z(()=>{const A=d.value.map(k=>({store:k,aliases:[...x.value.get(k)??[]]}));return[{store:ka},...A]});function X(A,k,F){return k=k.toLowerCase(),[A,...(F==null?void 0:F.raw.aliases)??[]].map(S=>S.toLowerCase()).some(S=>S.includes(k))}const U=Z(()=>{var F;const A={amount:m.value,acceptedPayments:N.value,transactionAttributesType:$.value,currentConditions:[...v.value]};me(_.value)&&(A.transactionStore=_.value);const k=[];for(const y of c.value){const S=y.getRewardInfos(A,{onlyCurrentPlan:i.value,onlyCurrentExchangeStrategy:r.value}),K=!i.value||!r.value,G=!r.value&&y.selectablePointExchange.length>1;for(const M of S){const L={cardName:y.name,planName:M.planName,rewardName:M.rewardName,miles:M.miles,payments:M.payments,airLinesCode:M.airlineCode,isSelectedPlan:K&&M.planId===y.selectedPlanId,calculateDetail:s(M.rewardStrategy,M.pointExchangeStrategy),description:M.rewardStrategy===null?null:`${M.rewardStrategy.description}，${M.pointExchangeStrategy.description}`,cardUrl:y.cardUrl,cardDescription:y.description,pointExchangeName:G?M.pointExchangeName:""};k.push(L)}}return(F=e.value)==null||F.scrollTo({top:0,behavior:"smooth"}),Ie(Ie(k,"isSelectedPlan","desc"),"miles","desc")}),n=I(null);function s(A,k){const{pointsPerMile:F,milesPerUnit:y,airlineCode:S}=k,K="回饋計算:";switch(A==null?void 0:A.type){case"RoundedPercentageReward":case"TruncatedPercentageReward":{const G=A.type==="RoundedPercentageReward"?t:o;let M=0;return[K,...A.pointBackRates.map(({rate:L,limit:z})=>{const Y=Math.min(G(m.value*L/100),z??1/0);M+=Y;const E=z!==void 0?` (limit ${z})`:"";return`${m.value} * ${L}% = ${Y}${E}`}),`總計 ${M} points`,`${M} / ${F} * ${y} = ${k.calculateMiles(M)} ${S}`]}case"AccumulatedPointsReward":{const G=a(m.value/A.spendingPerPoint);return[K,`${m.value} / ${A.spendingPerPoint} = ${G} points`,`${G} / ${F} * ${y} = ${k.calculateMiles(G)} ${S}`]}case"FixedRatePointsReward":{const G=o(m.value/A.spendingPerPoint);return[K,`${m.value} / ${A.spendingPerPoint} = ${G} points (小數省略)`,`${G} / ${F} * ${y} = ${k.calculateMiles(G)} ${S}`]}default:return[]}}return(A,k)=>{const F=w("v-text-field"),y=w("v-autocomplete"),S=w("v-label"),K=w("v-checkbox"),G=w("v-radio"),M=w("v-radio-group"),L=w("v-card"),z=w("v-btn"),Y=w("v-dialog");return f(),C(J,null,[g("div",da,[p(F,{"model-value":m.value,class:"flex-grow-0",density:"comfortable","hide-details":"",label:"交易金額",inputmode:"decimal",clearable:m.value!==0,"onUpdate:modelValue":k[0]||(k[0]=E=>m.value=isNaN(parseFloat(E))?0:parseFloat(E))},null,8,["model-value","clearable"]),p(y,{ref:"storeAutoComplete",modelValue:_.value,"onUpdate:modelValue":k[1]||(k[1]=E=>_.value=E),"custom-filter":X,class:"flex-grow-0",density:"comfortable","hide-details":"","item-value":"store","item-title":"store",items:D.value,clearable:b(me)(_.value),placeholder:"全部店家","onUpdate:menu":k[2]||(k[2]=E=>{var Q;return!E&&((Q=b(u))==null?void 0:Q.blur())})},null,8,["modelValue","items","clearable"]),g("div",null,[p(S,{text:"店家可使用的付款方式"}),g("div",ca,[(f(!0),C(J,null,W(b(P),(E,Q)=>(f(),V(K,{key:Q,modelValue:N.value,"onUpdate:modelValue":k[3]||(k[3]=Xe=>N.value=Xe),density:"compact",value:E,"hide-details":"",label:E},null,8,["modelValue","value","label"]))),128))])]),g("div",ua,[p(S,{text:"交易類型"}),p(M,{modelValue:$.value,"onUpdate:modelValue":k[4]||(k[4]=E=>$.value=E),"hide-details":"",inline:""},{default:h(()=>[p(G,{density:"compact",label:"國內交易",value:"Domestic"}),p(G,{density:"compact",label:"國外交易",value:"Foreign"})]),_:1},8,["modelValue"])]),g("div",pa,[(f(!0),C(J,null,W(U.value,(E,Q)=>(f(),V(L,{key:Q,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined",onClick:()=>n.value=E},{title:h(()=>[g("div",ma,[O(R(E.miles)+" ",1),g("p",ya,R(E.airLinesCode)+" "+R(E.payments.length===0?"":` (限定支付: ${E.payments.join(", ")})`),1),E.isSelectedPlan?(f(),C("i",ga)):H("",!0)])]),text:h(()=>[g("div",va,[g("p",fa,R(`${E.cardName} ${E.planName??""} ${E.rewardName??""} ${E.pointExchangeName}`),1)])]),_:2},1032,["onClick"]))),128))],512)]),p(Y,{"model-value":!!n.value,"onUpdate:modelValue":k[6]||(k[6]=E=>n.value=null)},{default:h(()=>[n.value?(f(),V(L,{key:0,class:"mx-auto reward-detail-dialog","min-width":"100%",title:`${n.value.cardName} ${n.value.planName??""} ${n.value.rewardName??""}`},{subtitle:h(()=>[g("p",ha,R(n.value.description??""),1)]),text:h(()=>[g("div",Pa,[g("p",_a,[k[7]||(k[7]=O(" 卡片說明： ")),n.value.cardUrl!==null?(f(),C("a",{key:0,target:"_blank",class:"underline",href:n.value.cardUrl}," 網站 ",8,wa)):H("",!0)]),n.value.cardDescription!==""||n.value.cardDescription!==null?(f(),C("p",xa,R(n.value.cardDescription),1)):H("",!0),n.value.pointExchangeName!==""?(f(),C("p",Aa,R(n.value.pointExchangeName),1)):H("",!0),k[8]||(k[8]=g("br",null,null,-1)),g("p",null,"消費金額: "+R(m.value),1),g("p",null,"哩程預估: "+R(n.value.miles)+" "+R(n.value.airLinesCode),1),k[9]||(k[9]=g("br",null,null,-1)),(f(!0),C(J,null,W(n.value.calculateDetail,(E,Q)=>(f(),C("p",{key:Q},R(E),1))),128))])]),actions:h(()=>[p(z,{class:"ms-auto",text:"Close",onClick:k[5]||(k[5]=E=>n.value=null)})]),_:1},8,["title"])):H("",!0)]),_:1},8,["model-value"])],64)}}}),Ca=De(ba,[["__scopeId","data-v-572bd817"]]),Sa={class:"flex-col h-full overflow-hidden gap-8px"},Ea={class:"flex-shrink-0 flex-col gap-8px"},Ra={key:0,class:"flex justify-between items-center"},Ta={class:"flex gap-8px"},La={key:0,class:"gap-4px flex-col flex-grow-1 overflow-y-auto"},Ba={class:"text-1rem"},Ua={class:"text-0.8rem"},Ma={key:1,class:"flex-grow-1"},$a={class:"flex-col gap-24px m-8px"},Ia={class:"flex-col gap-4px"},Va=ee({__name:"StoreAliasManagement",setup(l){const t=ie(),{aliasType:a,customAliases:o,storeAliases:i}=se(t),r=ne("storeList"),P={default:"系統預設",additional:"預設+自定義",custom:"自定義"},c=I(!0),v=I(!1),x=I(!0),d=I("[]"),m=I(null),_=Z(()=>{let n;return a.value==="default"?n=We:a.value==="additional"?n=[...i.value].map(([s,A])=>[s,[...A]]):n=[...o.value],n.map(([s,A])=>({title:s,aliases:[...A]}))});Me(()=>{var n;return(n=m.value)==null?void 0:n.title},n=>{if(n==null||m.value===null)return;const s=[...o.value.get(n)??[]];s[s.length-1]!==""&&s.push(""),m.value.aliases=s}),Me(c,X),at(()=>{X(),v.value=!1,x.value=!0,c.value=!0});function $(n,s){if(m.value===null)return;let A=m.value.aliases;A[s]=n,A[A.length-1]!==""&&A.push("")}function N(n){if(a.value!=="default")if(n===null)m.value={title:null,aliases:[]};else{const s=[...o.value.get(n)??[]];s[s.length-1]!==""&&s.push(""),m.value={title:n,aliases:s}}}function e(){const{title:n,aliases:s}=m.value??{};n==null||s===void 0||(t.updateCustomAliases(n,[...new Set(s)].filter(me)),m.value=null)}function u(n){if(n=n.trim(),d.value=n,v.value=!0,n===""){x.value=!0;return}try{const s=JSON.parse(n);x.value=Te(s)}catch(s){console.error(s),x.value=!1}}function D(){let n;if(c.value)n=!0;else{d.value===""&&(d.value="[]");try{const s=JSON.parse(d.value);Te(s)?(t.updateAllCustomAliases(s),n=!0):n=!1}catch(s){console.error(s),n=!1}}n?(alert("儲存成功"),v.value=!1):alert(`儲存失敗${c.value?"":"，JSON 不符合規則"}`)}function X(){d.value=JSON.stringify([...o.value],null,2)}function U(n){v.value||(n==="default"&&(c.value=!0),t.updateAliasType(n))}return(n,s)=>{const A=w("v-label"),k=w("v-btn"),F=w("v-btn-toggle"),y=w("v-switch"),S=w("v-card"),K=w("v-textarea"),G=w("v-autocomplete"),M=w("v-text-field");return f(),C(J,null,[g("div",Sa,[g("div",Ea,[p(A,{text:"別名設定"}),p(F,{"model-value":b(a),rounded:"0",group:"",class:"w-full flex justify-center",disabled:v.value,"onUpdate:modelValue":U},{default:h(()=>[(f(!0),C(J,null,W(b(He),(L,z)=>(f(),V(k,{key:z,class:"flex-1",value:L},{default:h(()=>[O(R(P[L]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["model-value","disabled"]),b(a)!=="default"?(f(),C("div",Ra,[g("div",Ta,[c.value?(f(),V(k,{key:0,onClick:s[0]||(s[0]=L=>N(null))},{default:h(()=>s[4]||(s[4]=[O(" Add ")])),_:1})):(f(),V(k,{key:1,onClick:D},{default:h(()=>s[5]||(s[5]=[O(" Save ")])),_:1}))]),p(y,{modelValue:c.value,"onUpdate:modelValue":s[1]||(s[1]=L=>c.value=L),disabled:v.value,"hide-details":"",label:"圖示"},null,8,["modelValue","disabled"])])):H("",!0)]),c.value?(f(),C("div",La,[(f(!0),C(J,null,W(_.value,(L,z)=>(f(),V(S,{key:z,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined",onClick:Y=>N(L.title)},{text:h(()=>[g("p",Ba,R(L.title),1),g("p",Ua,R(L.aliases.join(", ")),1)]),_:2},1032,["onClick"]))),128))])):(f(),C("div",Ma,[p(K,{"model-value":d.value,clearable:d.value!=="","auto-grow":"",disabled:b(a)==="default","max-rows":15,messages:v.value?"上方儲存完成後才能執行其他動作，離開這頁不會存檔":"","error-messages":x.value?"":"json 無效",label:"自定義別名設定檔","onUpdate:modelValue":u},null,8,["model-value","clearable","disabled","messages","error-messages"])]))]),p(Le,{modelValue:m.value,"onUpdate:modelValue":s[3]||(s[3]=L=>m.value=L),title:"編輯商店別名","btn-title":"Save","btn-event":e},{default:h(({data:L})=>[g("div",$a,[p(G,{ref:"storeList",modelValue:L.title,"onUpdate:modelValue":z=>L.title=z,class:"flex-grow-0","hide-details":"",label:"目標店家",items:b(t).storeList,placeholder:"選擇店家","onUpdate:menu":s[2]||(s[2]=z=>{var Y;return!z&&((Y=b(r))==null?void 0:Y.blur())})},null,8,["modelValue","onUpdate:modelValue","items"]),g("div",Ia,[p(A,{text:"自定義別名列表"}),(f(!0),C(J,null,W(L.aliases,(z,Y)=>(f(),V(M,{key:Y,"hide-details":"",clearable:"","model-value":z,"onUpdate:modelValue":E=>$(E,Y),"onClick:clear":()=>L.aliases.splice(Y,1)},null,8,["model-value","onUpdate:modelValue","onClick:clear"]))),128))])])]),_:1},8,["modelValue"])],64)}}}),Na={style:{height:"calc(100dvh - 56px)"},class:"overflow-hidden mt-56px p-8px"},Oa={class:"w-full text-center"},Da={class:"w-full flex items-center justify-between px-8px"},Fa=ee({__name:"App",setup(l){const t=ie(),{dialog:a}=se(t),o={查詢回饋:Ca,信用卡管理:ra,商家別名:Va,喜好設定:Lt},i=Object.keys(o),r=I(!1),P=I(i[0]);return(c,v)=>{const x=w("v-app-bar-nav-icon"),d=w("v-app-bar-title"),m=w("v-app-bar"),_=w("v-list-item"),$=w("v-divider"),N=w("v-navigation-drawer"),e=w("v-app"),u=w("v-btn"),D=w("v-card"),X=w("v-dialog");return f(),C(J,null,[p(e,null,{default:h(()=>[p(m,{density:"comfortable",elevation:2},{prepend:h(()=>[p(x,{onClick:v[0]||(v[0]=U=>r.value=!r.value)},{default:h(()=>v[2]||(v[2]=[g("i",{class:"fa-solid fa-bars"},null,-1)])),_:1}),p(d,null,{default:h(()=>[O(R(P.value),1)]),_:1})]),_:1}),p(N,{modelValue:r.value,"onUpdate:modelValue":v[1]||(v[1]=U=>r.value=U)},{default:h(()=>[(f(!0),C(J,null,W(b(i),(U,n)=>(f(),C(J,{key:n},[p(_,{title:U,class:$e(["h-48px",{"text-emphasis":P.value===U}]),onClick:()=>{P.value=U,r.value=!1}},null,8,["title","class","onClick"]),p($)],64))),128))]),_:1},8,["modelValue"]),g("main",Na,[(f(),V(lt,null,[(f(),V(nt(o[P.value])))],1024))])]),_:1}),p(X,{"model-value":!!b(a),"onUpdate:modelValue":b(t).closeDialog},{default:h(()=>[b(a)!==null?(f(),V(D,{key:0,class:"mx-auto","min-width":"100%"},{text:h(()=>[g("div",Oa,R(b(a).text),1)]),actions:h(()=>[g("div",Da,[(f(!0),C(J,null,W(b(a).events,(U,n)=>(f(),V(u,{key:n,text:U.text,class:$e(U.class),variant:"elevated",onClick:async()=>{"event"in U&&await U.event(),b(t).closeDialog()}},null,8,["text","class","onClick"]))),128))])]),_:1})):H("",!0)]),_:1},8,["model-value","onUpdate:modelValue"])],64)}}}),Ue=ot(Fa);Ue.use(dt);Ue.use(it());Ue.mount("#app");
//# sourceMappingURL=bestMileageCards-WYIHDkHK.js.map
