var Re=Object.defineProperty;var Se=(o,t,a)=>t in o?Re(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a;var C=(o,t,a)=>Se(o,typeof t!="symbol"?t+"":t,a);import{o as Be,b as S,c as Q,f as j,d as ne,B as P,g as w,j as R,k as g,x as y,C as b,u as x,e as me,F as J,l as X,v as O,D as z,t as E,y as Z,w as ge,E as xe,m as Ue,K as Ee,G as Ie,A as $e}from"../index-C3ARoBSF.js";import{d as Oe,s as ve,c as Ne}from"../pinia-BK02bNfI.js";import{C as Ve,v as De}from"../StorageManager-zV0NkdNH.js";import{a as fe,b as we}from"../sorts-BPW8KRTv.js";import{r as Je,b as Pe,g as Ae,c as Fe,a as Ke}from"../index-CZjE7_pj.js";import{_ as Me}from"../_plugin-vue_export-helper-DlAUqK2U.js";const $=Je(2);class ee{constructor({type:t,name:a,pointsPerMile:n,milesPerUnit:c}){C(this,"_type");C(this,"_name");C(this,"_pointsPerMile");C(this,"_milesPerUnit");this._type=t,this._name=a,this._pointsPerMile=n,this._milesPerUnit=c}get type(){return this._type}get name(){return this._name}get pointsPerMile(){return this._pointsPerMile}get milesPerUnit(){return this._milesPerUnit}_pointsConvertToMiles(t){return t*this._milesPerUnit/this._pointsPerMile}calculateRangeMilesCost(t,a){const n=[];for(let l=t;l<=a;l++){const d=$(l/this.calculateMiles(l));isNaN(d)||d===1/0||d===-1/0||n.push(d)}n.sort((l,d)=>l-d);const c=n[n.length-1],h=n[0];if(c===void 0||h===void 0)throw new Error("cannot be calculated");const u=n.reduce((l,d)=>l+d,0)/n.length;return{max:c,min:h,average:$(u)}}}class Ge extends ee{constructor({pointBackRates:a,...n}){super(n);C(this,"_pointBackRates");this._pointBackRates=a}get pointBackRates(){return this._pointBackRates}get _maxRete(){return this._pointBackRates.reduce((a,{rate:n})=>a+n,0)}get baselineCostPerMile(){return $(100/this._pointsConvertToMiles(this._maxRete))}get bestCaseCostPerMile(){return $(Math.ceil(100/this._maxRete/2)/this._pointsConvertToMiles(1))}get maximumCostPerMile(){return $((Math.ceil(150/this._maxRete)-1)/this._pointsConvertToMiles(1))}get description(){return`消費${this._pointBackRates.length>1?"最高":""}${this._maxRete.toString()}%回饋點數(四捨五入)，${this._pointsPerMile.toString()}點兌換${this._milesPerUnit.toString()}哩程`}calculateMiles(a){let n=0;for(const{rate:c,limit:h=1/0}of this._pointBackRates)n+=Math.min(Math.round(a*(c/100)),h);return $(this._pointsConvertToMiles(n))}toJSON(){return{type:this._type,name:this._name,pointsPerMile:this._pointsPerMile,milesPerUnit:this._milesPerUnit,pointBackRates:this._pointBackRates}}}class ze extends ee{constructor({pointBackRates:a,...n}){super(n);C(this,"_pointBackRates");this._pointBackRates=a}get pointBackRates(){return this._pointBackRates}get _maxRete(){return this._pointBackRates.reduce((a,{rate:n})=>a+n,0)}get baselineCostPerMile(){return $(100/this._pointsConvertToMiles(this._maxRete))}get bestCaseCostPerMile(){return this.baselineCostPerMile}get maximumCostPerMile(){return $((Math.ceil(200/this._maxRete)-1)/this._pointsConvertToMiles(1))}get description(){return`消費${this._pointBackRates.length>1?"最高":""}${this._maxRete.toString()}%回饋點數(無條件捨去)，${this._pointsPerMile.toString()}點兌換${this._milesPerUnit.toString()}哩程`}calculateMiles(a){let n=0;for(const{rate:c,limit:h=1/0}of this._pointBackRates)n+=Math.min(Math.floor(a*(c/100)),h);return $(this._pointsConvertToMiles(n))}toJSON(){return{type:this._type,name:this._name,pointsPerMile:this._pointsPerMile,milesPerUnit:this._milesPerUnit,pointBackRates:this._pointBackRates}}}class Xe extends ee{constructor({spendingPerPoint:a,...n}){super(n);C(this,"_spendingPerPoint");this._spendingPerPoint=a}get spendingPerPoint(){return this._spendingPerPoint}get baselineCostPerMile(){return $(this._spendingPerPoint/this._pointsConvertToMiles(1))}get bestCaseCostPerMile(){return this.baselineCostPerMile}get maximumCostPerMile(){return $((this._spendingPerPoint*2-1)/this._pointsConvertToMiles(1))}get description(){return`每消費${this._spendingPerPoint.toString()}元累積1點，${this._pointsPerMile.toString()}點兌換${this._milesPerUnit.toString()}哩程`}calculateMiles(a){const n=Math.floor(a/this._spendingPerPoint);return $(this._pointsConvertToMiles(n))}toJSON(){return{type:this._type,name:this._name,pointsPerMile:this._pointsPerMile,milesPerUnit:this._milesPerUnit,spendingPerPoint:this._spendingPerPoint}}}class je extends ee{constructor({spendingPerMile:a,...n}){super({...n,pointsPerMile:1,milesPerUnit:1});C(this,"_spendingPerMile");this._spendingPerMile=a}get spendingPerMile(){return this._spendingPerMile}get baselineCostPerMile(){return this._spendingPerMile}get bestCaseCostPerMile(){return this.baselineCostPerMile}get maximumCostPerMile(){return this.baselineCostPerMile}get description(){return`每消費${this._spendingPerMile.toString()}元累積1哩程 (小數會進行累計)`}calculateMiles(a){return $(a/this._spendingPerMile)}toJSON(){return{type:this._type,name:this._name,spendingPerMile:this._spendingPerMile}}}class We extends ee{constructor({spendingPerMile:a,...n}){super({...n,pointsPerMile:1,milesPerUnit:1});C(this,"_spendingPerMile");this._spendingPerMile=a}get spendingPerMile(){return this._spendingPerMile}get baselineCostPerMile(){return this._spendingPerMile}get bestCaseCostPerMile(){return this.baselineCostPerMile}get maximumCostPerMile(){return this._spendingPerMile+this._spendingPerMile-1}get description(){return`每消費${this._spendingPerMile.toString()}元累積1哩程 (小數不累計)`}calculateMiles(a){return Math.floor(a/this._spendingPerMile)}toJSON(){return{type:this._type,name:this._name,spendingPerMile:this._spendingPerMile}}}const He={RoundedPointsReward:Ge,TruncatedPointsReward:ze,PointsRewardPerThreshold:Xe,CumulativeMilesReward:je,DirectMilesReward:We};function Ye(o){return new He[o.type](o)}class Ze{constructor(t,a,n){C(this,"_name");C(this,"_rewards");C(this,"_condition");if(this._name=t,this._condition=a,n.length===0)throw new Error(`Plan "${t??"unknown"}" must have at least one reward rule.`);this._rewards=n}get name(){return this._name}get storeList(){return Pe(this._rewards.flatMap(t=>[...t.stores,...t.storeBlackList]))}checkPlanIsVisible(t){return this._condition===null||!!(t!=null&&t.includes(this._condition))}getApplicableReward({transactionStore:t=null,acceptedPayments:a=[],transactionAttributesType:n,currentConditions:c=null}){return this._condition!==null&&!(c!=null&&c.includes(this._condition))?null:this._rewards.find(({stores:h,payments:u,transactionType:l,paymentBlackList:d,storeBlackList:f,condition:A})=>{const _=t===null||h.size===0||h.has(t),M=t===null||f.size===0||!f.has(t),e=a.length===0||u.size===0||a.some(m=>u.has(m)),r=a.length===0||d.size===0||a.some(m=>!d.has(m)),N=l===null||n===l,p=A===null||!!(c!=null&&c.includes(A));return _&&M&&e&&r&&N&&p})??null}getRewardMiles({transactionStore:t,acceptedPayments:a,amount:n,transactionAttributesType:c,currentConditions:h}){const u=this.getApplicableReward({acceptedPayments:a,transactionStore:t,transactionAttributesType:c,currentConditions:h});if(u===null)return null;const l=a===void 0?[...u.payments.values()]:a.filter(d=>u.payments.has(d));return{name:u.reward.name,miles:u.reward.calculateMiles(n),payments:l.filter(d=>!u.paymentBlackList.has(d)),reward:u.reward}}toJSON(){return{name:this._name,condition:this._condition,rewards:this._rewards.map(({reward:t,stores:a,payments:n,transactionType:c,paymentBlackList:h,storeBlackList:u,condition:l})=>({reward:t.toJSON(),stores:[...a.values()],storeBlackList:[...u.values()],payments:[...n.values()],paymentBlackList:[...h.values()],transactionType:c,condition:l}))}}}const Qe=["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"],qe={SJX:"星宇航空",EVA:"長榮航空",ANA:"全日空",JAL:"日航",CPA:"國泰航空",CAL:"華航"};class Le{constructor({name:t,description:a,plans:n,storeBlackList:c,paymentBlackList:h,cardUrl:u,updateAt:l,airLines:d}){C(this,"_selectedPlanId");C(this,"_name");C(this,"_description");C(this,"_plans");C(this,"_cardUrl");C(this,"_storeBlackList");C(this,"_paymentBlackList");C(this,"_updateAt");C(this,"_airLines");this._name=t,this._description=a,this._plans=n,this._cardUrl=u,this._storeBlackList=c,this._paymentBlackList=h,this._updateAt=l,this._airLines=d;const f=this._plans.keys().next().value;if(this._plans.size===0||f===void 0)throw new Error("this credit card no any plan");this._selectedPlanId=f}get airLines(){return qe[this._airLines]}get airLinesCode(){return this._airLines}get selectedPlan(){return this._getPlan(this._selectedPlanId)}get name(){return this._name}get description(){return this._description}get selectedPlanId(){return this._selectedPlanId}get selectablePlan(){return[...this._plans.entries()].map(([t,{name:a}])=>({id:t,name:a}))}get storeList(){return Pe([...[...this._plans.values()].flatMap(t=>t.storeList),...this._storeBlackList])}get cardUrl(){return this._cardUrl}updatePlan(t){return this._plans.get(t)?(this._selectedPlanId=t,!0):!1}_getPlan(t){const a=this._plans.get(t);if(a===void 0)throw new Error(`plan id ${t} not found. Available plans: ${[...this._plans.keys()].join(", ")}`);return a}_rewardMilesWithPlan(t,a){var d;const n=this._getPlan(t),c={planId:null,planName:n.name,name:null,miles:0,payments:[],reward:null},h=a.transactionStore!==void 0&&this._storeBlackList.has(a.transactionStore),u=(d=a.acceptedPayments)==null?void 0:d.some(f=>this._paymentBlackList.has(f));if(h||u)return c;const l=n.getRewardMiles(a);return l===null?c:{planId:t,planName:n.name,...l}}currentPlanRewardMiles(t){return this._rewardMilesWithPlan(this._selectedPlanId,t)}getAllPlanRewardMiles(t){return[...this._plans.keys()].filter(a=>this._getPlan(a).checkPlanIsVisible(t.currentConditions??null)).map(a=>this._rewardMilesWithPlan(a,t))}toJSON(){return{name:this._name,description:this._description,cardUrl:this._cardUrl,storeBlackList:[...this._storeBlackList.values()],paymentBlackList:[...this._paymentBlackList.values()],plans:[...this._plans.values()].map(t=>t.toJSON()),updateAt:this._updateAt.toISOString(),airLines:this._airLines}}}function et({name:o,description:t,storeBlackList:a,paymentBlackList:n,cardUrl:c,plans:h,updateAt:u,airLines:l}){const d=new Map(h.map(({name:f,condition:A,rewards:_})=>[Ae(),new Ze(f,A??null,_.map(({stores:M,payments:e,transactionType:r,reward:N,paymentBlackList:p,storeBlackList:m,condition:F})=>({reward:Ye(N),stores:new Set(M),storeBlackList:new Set(m),payments:new Set(e),paymentBlackList:new Set(p),transactionType:r??null,condition:F??null})))]));return new Le({name:o,description:t,plans:d,storeBlackList:new Set(a),paymentBlackList:new Set(n),cardUrl:c,updateAt:new Date(u),airLines:l})}const W=["分期付款"],H=[],oe=["信用卡","Apple Pay","Samsung Pay","Google Pay","Fitbit Pay","Garmin Pay","Hami Pay"];function Y(o,t,a){const n={reward:{type:"RoundedPointsReward",name:null,pointBackRates:[{rate:.3}],pointsPerMile:t,milesPerUnit:a}};return[{name:"集精選",rewards:[{reward:{type:"RoundedPointsReward",name:null,pointBackRates:[{rate:2}],pointsPerMile:t,milesPerUnit:a},stores:["家樂福","LOPIA台灣","全聯福利中心","台灣中油-直營","7-ELEVEN","全家便利商店","IKEA"],payments:[...oe,"PX Pay","My FamiPay","OPEN錢包"]},n]},{name:"玩數位",rewards:[{reward:{type:"RoundedPointsReward",name:null,pointBackRates:[{rate:o}],pointsPerMile:t,milesPerUnit:a},stores:["App Store","Apple Music","iCloud","Apple TV+","Apple Arcade","Apple One","iTunes","Google Play","Disney+","Netflix","Spotify","KKBOX","YouTube Premium","蝦皮購物","momo購物網","PChome 24h購物(不含儲值及電子票券)","博客來","小樹購","Coupang 酷澎(台灣)","淘寶/天貓"],paymentBlackList:["Line Pay","街口支付"]},{...n,storeBlackList:["全聯福利中心"]}]},{name:"樂饗購",rewards:[{reward:{type:"RoundedPointsReward",name:null,pointBackRates:[{rate:o}],pointsPerMile:t,milesPerUnit:a},stores:["遠東SOGO百貨","遠東Garden City","太平洋百貨","新光三越","SKM Park","BELLAVITA","微風廣場","遠東百貨","Big City遠東巨城購物中心","誠品生活","環球購物中心","CITYLINK","統一時代","台北101","ATT 4 FUN","明曜百貨","京站","美麗華","大葉高島屋","比漾廣場","大江國際購物中心","中友百貨","廣三SOGO","Tiger City","勤美誠品綠園道","大魯閣新時代","耐斯廣場","南紡購物中心","夢時代","漢神百貨","漢神巨蛋","MITSUI OUTLET PARK 林口","MITSUI OUTLET PARK 台中港","MITSUI OUTLET PARK 台南","Mitsui Shopping Park LaLaport 台中","義大世界購物廣場","華泰名品城","義享天地","麗寶OUTLET Mall","秀泰生活","台茂購物中心","新月廣場","三創生活","宏匯廣場","高雄棧貳庫/大港倉","NOKE忠泰樂生活","Uber Eats","foodpanda","foodomo","國內餐飲(不含餐券)","麥當勞","康是美","屈臣氏"],payments:oe},{...n,storeBlackList:["全聯福利中心"]}]},{name:"趣旅行",rewards:[{reward:{type:"RoundedPointsReward",name:null,pointBackRates:[{rate:o}],pointsPerMile:t,milesPerUnit:a},stores:["海外實體消費","東京迪士尼樂園","東京華納兄弟哈利波特影城","大阪環球影城(USJ)","吉卜力公園","Apple Wallet SUICA","Apple Wallet PASMO","Apple Wallet ICOCA","Uber","Grab","台灣高鐵","yoxi","台灣大車隊","iRent","和運租車","格上租車","中華航空","長榮航空","星宇航空","台灣虎航","國泰航空","樂桃航空","阿聯酋航空","酷航","捷星航空","日本航空","亞洲航空","聯合航空","ANA全日空","新加坡航空","越捷航空","大韓航空","達美航空","土耳其航空","卡達航空","法國航空","國內飯店住宿","星野集團","全球迪士尼飯店","東橫INN","KKday","Agoda","Klook","Airbnb","Hotels.com","Expedia","Booking.com","Trip.com","AsiaYo","ezTravel易遊網","雄獅旅遊","可樂旅遊","東南旅遊","五福旅遊","燦星旅遊","山富旅遊","長汎假期","鳳凰旅行社","Ezfly易飛網","理想旅遊","永利旅行社","三賀旅行社","173WIFI","JetFi mobile","威訊 WaySim","AIRSIM","SIM88"],payments:oe},{...n,storeBlackList:["全聯福利中心"]}]},{name:"來支付",rewards:[{reward:{type:"RoundedPointsReward",name:null,pointBackRates:[{rate:2}],pointsPerMile:t,milesPerUnit:a},payments:["Line Pay"]},{...n,storeBlackList:["全聯福利中心"]}]},{name:"慶生月",condition:"Birthday",rewards:[{reward:{type:"RoundedPointsReward",name:null,pointBackRates:[{rate:10}],pointsPerMile:t,milesPerUnit:a},stores:["東京迪士尼樂園","大阪環球影城(USJ)","名古屋樂高樂園","紅葉蛋糕官方網站","法朋烘焙甜點坊","興波咖啡 華山旗艦店","海底撈火鍋","輕井澤鍋物","老四川巴蜀麻辣燙","二本松涮涮屋","橋山.壽喜燒","Umai屋馬燒肉","老井極上燒肉","燒肉中山(台中大墩)","藏壽司台灣","貳樓","膳馨民間創作料理","馨苑小料理","雅室牛排 仁愛圓環店","ABV餐飲集團","WAT","臺虎精釀(信義 | 西門 | 臺中 | 啜飲室大安)","BAR Bodega","BAR MED","JiN Her 今鶴","錢櫃KTV","好樂迪KTV","星聚點KTV","享溫馨KTV","Nintendo","巴哈姆特動畫瘋","閃動格子CyberCube"]},{reward:{type:"RoundedPointsReward",name:null,pointBackRates:[{rate:3.5}],pointsPerMile:t,milesPerUnit:a},stores:["新光三越","Uber Eats (不含 Uber One)","Agoda","Trip.com","Klook","國內飯店住宿","星野集團","全球迪士尼飯店","東橫INN"]},{...n,storeBlackList:["全聯福利中心"]}]}]}const tt=[{name:"Cube 卡",description:"Cube 卡 (Level 1) 回饋方案",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/cube/",storeBlackList:W,paymentBlackList:H,updateAt:"2024-12-01T00:00:00.000Z",airLines:"EVA",plans:Y(2,360,1e3)},{name:"Cube 卡",description:"Cube 卡 (Level 2) 回饋方案",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/cube/",storeBlackList:W,paymentBlackList:H,updateAt:"2024-12-01T00:00:00.000Z",airLines:"EVA",plans:Y(3,360,1e3)},{name:"Cube 卡",description:"Cube 卡 (Level 3) 回饋方案",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/cube/",storeBlackList:W,paymentBlackList:H,updateAt:"2024-12-01T00:00:00.000Z",airLines:"EVA",plans:Y(3.3,360,1e3)},{name:"Cube 卡",description:"Cube 卡 (Level 1) 回饋方案 + 長榮世界卡",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/cube/",storeBlackList:W,paymentBlackList:H,updateAt:"2024-12-01T00:00:00.000Z",airLines:"EVA",plans:Y(2,300,1e3)},{name:"Cube 卡",description:"Cube 卡 (Level 2) 回饋方案 + 長榮世界卡",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/cube/",storeBlackList:W,paymentBlackList:H,updateAt:"2024-12-01T00:00:00.000Z",airLines:"EVA",plans:Y(3,300,1e3)},{name:"Cube 卡",description:"Cube 卡 (Level 3) 回饋方案 + 長榮世界卡",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/cube/",storeBlackList:W,paymentBlackList:H,updateAt:"2024-12-01T00:00:00.000Z",airLines:"EVA",plans:Y(3.3,300,1e3)}],ae=["政府稅款","公共事業代扣繳","交通違規罰鍰","分期付款","全聯福利中心","7-ELEVEN","全家便利商店"],se=[],at=[{name:"星宇世界卡",description:"",cardUrl:"https://www.esunbank.com/zh-tw/personal/credit-card/intro/co-branded-card/starlux-card",storeBlackList:ae,paymentBlackList:se,airLines:"SJX",plans:[{name:null,rewards:[{reward:{type:"DirectMilesReward",name:"國外消費",spendingPerMile:5},transactionType:"Foreign",condition:"Birthday"},{reward:{type:"DirectMilesReward",name:"國外消費",spendingPerMile:10},transactionType:"Foreign"},{reward:{type:"DirectMilesReward",name:"國內消費",spendingPerMile:20},transactionType:"Domestic"}]}],updateAt:new Date("2024/12/01 00:00:00").toISOString()},{name:"星宇商務鈦金卡",description:"",cardUrl:"https://www.esunbank.com/zh-tw/personal/credit-card/intro/co-branded-card/starlux-card",storeBlackList:ae,paymentBlackList:se,airLines:"SJX",plans:[{name:null,rewards:[{reward:{type:"DirectMilesReward",name:"國外消費",spendingPerMile:7.5},transactionType:"Foreign",condition:"Birthday"},{reward:{type:"DirectMilesReward",name:"國外消費",spendingPerMile:15},transactionType:"Foreign"},{reward:{type:"DirectMilesReward",name:"國內消費",spendingPerMile:25},transactionType:"Domestic"}]}],updateAt:new Date("2024/12/01 00:00:00").toISOString()},{name:"星宇鈦金卡",description:"",cardUrl:"https://www.esunbank.com/zh-tw/personal/credit-card/intro/co-branded-card/starlux-card",storeBlackList:ae,paymentBlackList:se,airLines:"SJX",plans:[{name:null,rewards:[{reward:{type:"DirectMilesReward",name:"國外消費",spendingPerMile:20},transactionType:"Foreign"},{reward:{type:"DirectMilesReward",name:"國內消費",spendingPerMile:28},transactionType:"Domestic"}]}],updateAt:new Date("2024/12/01 00:00:00").toISOString()}],de=["台灣中油-直營","台灣大車隊","台鐵","台灣高鐵","UBER","Yoxi","LINEGO","新光三越","遠東百貨","遠東SOGO百貨","誠品生活","漢神百貨","微風廣場","微風信義","微風南京","微風南山","微風台北車站","環球購物中心","台北101","華泰名品城","MITSUI OUTLET PARK 林口","MITSUI OUTLET PARK 台中港","MITSUI OUTLET PARK 台南","Big City遠東巨城購物中心","昇恆昌","夢時代購物中心","京站","美麗華","南紡購物中心","秀泰生活","台茂購物中心","Mitsui Shopping Park LaLaport 台中","統領廣場","采盟","Uber Eats","foodpanda","星巴克","EZTABLE","王品瘋美食","摩斯漢堡","foodomo","漢來美食","饗Joy","饗食天堂","果然匯","小福利","饗饗","旭集","開飯","饗泰多","真珠","瓦城","非常泰","大心","1010","時時香","BOBO","乾杯集團","路易莎","中華航空","長榮航空","日本航空","台灣虎航","樂桃航空","酷航","立榮航空","華信航空","Agoda","booking.com","Hotels.com","AsiaYo","Expedia","KKday","Klook","雄獅旅遊","可樂旅遊","東南旅行社","Apple直營店","小米台灣","全國電子","燦坤","迪卡儂","屈臣氏","康是美","IKEA","特力屋","特力和樂","UNIQLO","NET","大樹藥局","丁丁藥妝","momo購物網","蝦皮購物","淘寶網","Coupang酷澎","東森購物","雅虎奇摩購物中心","博客來","玉山Wallet愛心捐款-單筆捐款","玉山Wallet愛心捐款-定期定額","特斯拉","Gogoro電池資費","YouBike 2.0","日本實體店","韓國實體店","泰國實體店","越南實體店","新加坡實體店","中國實體店","香港實體店","澳門實體店","美國實體店","英國實體店","法國實體店","德國實體店","義大利實體店"],ce={reward:{type:"TruncatedPointsReward",name:null,pointBackRates:[{rate:.3},{rate:.7}],pointsPerMile:200,milesPerUnit:300}},st=[{name:"UniCard 卡",description:"",cardUrl:"https://www.esunbank.com/zh-tw/personal/credit-card/intro/bank-card/unicard",storeBlackList:ae,paymentBlackList:se,airLines:"EVA",plans:[{name:"任意選 (需要切換店家)",rewards:[{reward:{type:"TruncatedPointsReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2.5,limit:500}],pointsPerMile:200,milesPerUnit:300},stores:de,payments:["信用卡","Apple Pay","Samsung Pay","Google Pay"]},{reward:{type:"TruncatedPointsReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2.5,limit:500}],pointsPerMile:200,milesPerUnit:300},payments:["Line Pay","街口支付","悠遊付","橘子支付","icash pay"]},ce]},{name:"簡單選",rewards:[{reward:{type:"TruncatedPointsReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2,limit:500}],pointsPerMile:200,milesPerUnit:300},stores:de,payments:["信用卡","Apple Pay","Samsung Pay","Google Pay"]},{reward:{type:"TruncatedPointsReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2,limit:500}],pointsPerMile:200,milesPerUnit:300},payments:["Line Pay","街口支付","悠遊付","橘子支付","icash pay"]},ce]},{name:"UP選",rewards:[{reward:{type:"TruncatedPointsReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:3.5,limit:2e3}],pointsPerMile:200,milesPerUnit:300},stores:de,payments:["信用卡","Apple Pay","Samsung Pay","Google Pay"]},{reward:{type:"TruncatedPointsReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:3.5,limit:2e3}],pointsPerMile:200,milesPerUnit:300},payments:["Line Pay","街口支付","悠遊付","橘子支付","icash pay"]},ce]}],updateAt:new Date("2024/12/01 00:00:00").toISOString()}],ue=["政府稅款","公共事業代扣繳","交通違規罰鍰","分期付款"],pe=["全盈+PAY","icash pay","OPEN錢包","My FamiPay"],nt=[{name:"旅人無限卡",description:"",cardUrl:"https://www.hsbc.com.tw/credit-cards/products/travel/visa-infinite/",storeBlackList:ue,paymentBlackList:pe,airLines:"EVA",plans:[{name:null,rewards:[{reward:{type:"CumulativeMilesReward",name:"國外消費",spendingPerMile:10},transactionType:"Foreign"},{reward:{type:"CumulativeMilesReward",name:"國內消費",spendingPerMile:18},transactionType:"Domestic"}]}],updateAt:new Date("2024/12/01 00:00:00").toISOString()},{name:"旅人御璽卡",description:"",cardUrl:"https://www.hsbc.com.tw/credit-cards/products/travel/visa-signature/",storeBlackList:ue,paymentBlackList:pe,airLines:"EVA",plans:[{name:null,rewards:[{reward:{type:"CumulativeMilesReward",name:"國外消費",spendingPerMile:15},transactionType:"Foreign"},{reward:{type:"CumulativeMilesReward",name:"國內消費",spendingPerMile:18},transactionType:"Domestic"}]}],updateAt:new Date("2024/12/01 00:00:00").toISOString()},{name:"旅人輕旅卡",description:"",cardUrl:"https://www.hsbc.com.tw/credit-cards/products/travel/visa-light/",storeBlackList:ue,paymentBlackList:pe,airLines:"EVA",plans:[{name:null,rewards:[{reward:{type:"CumulativeMilesReward",name:"國外消費",spendingPerMile:20},transactionType:"Foreign"},{reward:{type:"CumulativeMilesReward",name:"國內消費",spendingPerMile:20},transactionType:"Domestic"}]}],updateAt:new Date("2024/12/01 00:00:00").toISOString()}],it=[nt[2],tt[4],at[0],st[0]].filter(Fe),ye=o=>Array.isArray(o)&&o.every(t=>Array.isArray(t)&&t.length===2&&typeof t[0]=="string"&&Array.isArray(t[1])&&t[1].every(a=>typeof a=="string")),ke=[["7-ELEVEN",["7-11","Seven Eleven","統一超商","小7"]],["ANA全日空",["ANA","全日空","All Nippon Airways","NH"]],["ATT 4 FUN",["ATT4FUN","ATT信義"]],["App Store",["蘋果應用商店"]],["Apple Arcade",["蘋果遊戲訂閱服務"]],["Apple Music",["蘋果音樂","Apple音樂"]],["Apple One",["蘋果One訂閱"]],["Apple TV+",["Apple TV Plus"]],["Apple Wallet ICOCA",["ICOCA電子票","Apple錢包ICOCA"]],["Apple Wallet PASMO",["PASMO電子票","Apple錢包PASMO"]],["Apple Wallet SUICA",["SUICA電子票","Apple錢包SUICA"]],["CITYLINK",["City Link"]],["Disney+",["Disney Plus","迪士尼+"]],["Google Play",["Google應用商店"]],["Grab",["Grab Taxi","Grab叫車"]],["MITSUI OUTLET PARK 台中港",["三井台中港","三井OUTLET台中"]],["MITSUI OUTLET PARK 台南",["三井台南","三井OUTLET台南"]],["MITSUI OUTLET PARK 林口",["三井林口","三井OUTLET林口"]],["Mitsui Shopping Park LaLaport 台中",["LaLaport台中","三井LaLaport台中"]],["Netflix",["網飛"]],["Nintendo",["任天堂","Switch","老任"]],["PChome 24h購物(不含儲值及電子票券)",["PChome","PChome購物"]],["Tiger City",["老虎城","Tiger City購物中心"]],["Trip.com",["攜程"]],["Uber Eats (不含 Uber One)",["優步外送"]],["foodpanda",["熊貓外送","Food Panda"]],["iCloud",["蘋果雲端","iCloud雲端"]],["iRent",["i Rent"]],["iTunes",["蘋果iTunes"]],["中友百貨",["中友"]],["中華航空",["China Airlines","CAL","CI","華航"]],["亞洲航空",["AirAsia","亞航","AXM","AK"]],["京站",["Q Square","京站商場"]],["全家便利商店",["FamilyMart","全家"]],["全球迪士尼飯店",["Disney Hotels"]],["全聯福利中心",["PX Mart"]],["南紡購物中心",["Tainan Spinnery Mall","南紡"]],["博客來",["Books.com.tw"]],["卡達航空",["Qatar Airways","卡航","QTR","QR"]],["可樂旅遊",["Cola Travel","可樂旅行社"]],["台北101",["Taipei 101","101大樓"]],["台灣中油-直營",["中油直營","直營中油"]],["台灣大車隊",["Taiwan Taxi","大車隊"]],["台灣虎航",["Tigerair Taiwan","台虎","TWA","IT"]],["台灣高鐵",["Taiwan High Speed Rail"]],["台茂購物中心",["TaiMall"]],["吉卜力公園",["Ghibli Park"]],["國泰航空",["Cathay Pacific","國泰","CPA","CX","Cathay Pacific Airways"]],["土耳其航空",["Turkish Airlines","土航","THY","TK"]],["夢時代",["Dream Mall"]],["大阪環球影城(USJ)",["Universal Studios Japan"]],["大韓航空",["Korean Air","韓航","KAL","KE"]],["大魯閣新時代",["Taroko Mall","大魯閣"]],["太平洋百貨",["Pacific Department Store","太平洋"]],["好樂迪KTV",["Holiday"]],["家樂福",["Carrefour"]],["屈臣氏",["Watsons"]],["康是美",["Cosmed"]],["捷星航空",["JST","JQ","Jetstar Airways"]],["新加坡航空",["SIA","SQ","Singapore Airlines"]],["日本航空",["JAL","JL","Japan Airlines"]],["星宇航空",["starlux","SJX","JX","STARLUX Airlines"]],["樂桃航空",["APJ","MM","Peach Aviation"]],["法國航空",["AFR","AF","Air France"]],["聯合航空",["UAL","UA","United Airlines"]],["蝦皮購物",["shopee"]],["越捷航空",["VJC","VJ","VietJet Air"]],["達美航空",["DAL","DL","Delta Air Lines"]],["遠東百貨",["遠百"]],["酷航",["SCO","TR","Scoot"]],["長榮航空",["EVA","BR","EVA Airlines","EVA Air"]],["阿聯酋航空",["UAE","EK","Emirates"]],["麥當勞",["McDonald's"]],["IKEA",["宜家家居"]],["星巴克",["starbucks"]]],lt=o=>o==="AllPlanRewardMiles"||o==="CurrentPlanRewardMiles",I=new Ve(localStorage,{showRewardMilesType:lt,commonPaymentMethods:(()=>{const o=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]);return t=>Array.isArray(t)&&t.every(a=>o.has(a)===!0)})(),cardConfigs:(()=>{const o=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]),t=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]),a=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]),n=e=>typeof e.name=="string"&&typeof e.description=="string"&&(e.cardUrl===null||typeof e.cardUrl=="string")&&(e.storeBlackList===void 0||Array.isArray(e.storeBlackList)&&e.storeBlackList.every(r=>typeof r=="string"))&&(e.paymentBlackList===void 0||Array.isArray(e.paymentBlackList)&&e.paymentBlackList.every(r=>o.has(r)===!0))&&Array.isArray(e.plans)&&e.plans.every(r=>typeof r=="object"&&r!==null&&c(r))&&(e.airLines==="SJX"||e.airLines==="EVA"||e.airLines==="ANA"||e.airLines==="JAL"||e.airLines==="CPA"||e.airLines==="CAL")&&typeof e.updateAt=="string"&&RegExp(/^[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\x2d[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\x2d[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?T[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?:[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?:[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\.[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?Z$/).test(e.updateAt),c=e=>(e.name===null||typeof e.name=="string")&&Array.isArray(e.rewards)&&e.rewards.every(r=>typeof r=="object"&&r!==null&&h(r))&&(e.condition===null||e.condition===void 0||e.condition==="Birthday"),h=e=>typeof e.reward=="object"&&e.reward!==null&&M(e.reward)&&(e.transactionType===null||e.transactionType===void 0||e.transactionType==="Domestic"||e.transactionType==="Foreign")&&(e.stores===void 0||Array.isArray(e.stores)&&e.stores.every(r=>typeof r=="string"))&&(e.storeBlackList===void 0||Array.isArray(e.storeBlackList)&&e.storeBlackList.every(r=>typeof r=="string"))&&(e.payments===void 0||Array.isArray(e.payments)&&e.payments.every(r=>t.has(r)===!0))&&(e.paymentBlackList===void 0||Array.isArray(e.paymentBlackList)&&e.paymentBlackList.every(r=>a.has(r)===!0))&&(e.condition===null||e.condition===void 0||e.condition==="Birthday"),u=e=>Array.isArray(e.pointBackRates)&&e.pointBackRates.every(r=>typeof r=="object"&&r!==null&&l(r))&&e.type==="RoundedPointsReward"&&(e.name===null||typeof e.name=="string")&&typeof e.pointsPerMile=="number"&&typeof e.milesPerUnit=="number",l=e=>typeof e.rate=="number"&&(e.limit===void 0||typeof e.limit=="number"),d=e=>Array.isArray(e.pointBackRates)&&e.pointBackRates.every(r=>typeof r=="object"&&r!==null&&l(r))&&e.type==="TruncatedPointsReward"&&(e.name===null||typeof e.name=="string")&&typeof e.pointsPerMile=="number"&&typeof e.milesPerUnit=="number",f=e=>typeof e.spendingPerPoint=="number"&&e.type==="PointsRewardPerThreshold"&&(e.name===null||typeof e.name=="string")&&typeof e.pointsPerMile=="number"&&typeof e.milesPerUnit=="number",A=e=>typeof e.spendingPerMile=="number"&&e.type==="CumulativeMilesReward"&&(e.name===null||typeof e.name=="string"),_=e=>typeof e.spendingPerMile=="number"&&e.type==="DirectMilesReward"&&(e.name===null||typeof e.name=="string"),M=e=>e.type==="TruncatedPointsReward"?d(e):e.type==="RoundedPointsReward"?u(e):e.type==="PointsRewardPerThreshold"?f(e):e.type==="DirectMilesReward"?_(e):e.type==="CumulativeMilesReward"?A(e):!1;return e=>Array.isArray(e)&&e.every(r=>typeof r=="object"&&r!==null&&n(r))})(),conditionTypes:o=>Array.isArray(o)&&o.every(t=>t==="Birthday"),aliasType:o=>o==="default"||o==="additional"||o==="custom",customAliases:ye},"bestMileageCards"),be=["default","additional","custom"],_e=Oe("BestMileageCards",()=>{Be(()=>{const p=I.get("cardConfigs")??[];c.value=new Map(p.map(m=>[Ae(),m]))});const o=S(I.get("showRewardMilesType")??"AllPlanRewardMiles");function t(p){I.set("showRewardMilesType",p),o.value=p}const a=S(I.get("commonPaymentMethods")??["信用卡","Apple Pay","Line Pay","街口支付"]);function n([...p]){p=[...new Set(p)],I.set("commonPaymentMethods",p),a.value=p}const c=S(new Map),h=Q(()=>(c.value.size===0?it:[...c.value.values()]).map(m=>et(m)));function u(p,m){c.value.set(p,m),I.set("cardConfigs",[...c.value.values()])}const l=Q(()=>fe(Pe(h.value.flatMap(p=>p.storeList)),"asc")),d=S(I.get("conditionTypes")??[]);function f([...p]){d.value=p,I.set("conditionTypes",p)}const A=S(I.get("aliasType")??"default");function _(p){be.includes(p)&&(A.value=p,I.set("aliasType",p))}const M=S(new Map(I.get("customAliases")??[]));function e(p,m){m.length===0?M.value.delete(p):M.value.set(p,m),I.set("customAliases",[...M.value])}function r(p){M.value=new Map(p),I.set("customAliases",p)}const N=Q(()=>{const p=[];["default","additional"].includes(A.value)&&p.push(...ke),["additional","custom"].includes(A.value)&&p.push(...M.value);const m=new Map;for(const[F,v]of p){const s=m.get(F)??new Set;for(const i of v)s.add(i);m.set(F,s)}return m});return{showRewardMilesType:j(o),updateShowRewardMilesType:t,commonPaymentMethods:j(a),updateCommonPaymentMethods:n,cards:h,updateCardConfig:u,storeList:j(l),conditionTypes:j(d),updateConditionTypes:f,aliasType:j(A),storeAliases:N,updateAliasType:_,customAliases:j(M),updateCustomAliases:e,updateAllCustomAliases:r}}),rt={class:"flex-col gap-24px my-16px"},ot={class:"flex-center gap-8px"},dt={class:"flex mx-16px"},ct=ne({__name:"CommonSettings",setup(o){const t=_e(),{showRewardMilesType:a,commonPaymentMethods:n,conditionTypes:c}=ve(t);return(h,u)=>{const l=P("v-label"),d=P("v-radio"),f=P("v-radio-group"),A=P("v-select"),_=P("v-switch");return w(),R("div",rt,[g("div",ot,[y(l,{text:"回饋顯示"}),y(f,{"model-value":x(a),"hide-details":"",inline:"","onUpdate:modelValue":u[0]||(u[0]=M=>M!==null&&x(t).updateShowRewardMilesType(M))},{default:b(()=>[y(d,{density:"compact",label:"全部方案",value:"AllPlanRewardMiles"}),y(d,{density:"compact",label:"當前方案",value:"CurrentPlanRewardMiles"})]),_:1},8,["model-value"])]),g("div",null,[y(A,{"model-value":x(n),items:x(fe)(x(Qe),"asc"),label:"使用中的付款方式",multiple:"","hide-details":"","onUpdate:modelValue":u[1]||(u[1]=M=>M!==null&&x(t).updateCommonPaymentMethods(M))},null,8,["model-value","items"])]),g("div",null,[y(l,{text:"其他設定"}),g("div",dt,[y(_,{"model-value":x(c),label:"生日中",value:"Birthday","hide-details":"",color:"blue","onUpdate:modelValue":u[2]||(u[2]=M=>M!==null&&x(t).updateConditionTypes(M))},null,8,["model-value"])])])])}}}),ut={};function pt(o,t){return"管理信用卡的設定"}const mt=Me(ut,[["render",pt]]),yt={class:"flex-col gap-8px h-full"},vt={class:"flex items-center flex-wrap gap-x-8px"},Pt={class:"flex-center gap-8px"},_t={ref:"rewardCardList",class:"gap-4px flex-col flex-grow-1 overflow-y-auto"},ht={class:"flex items-center justify-between"},gt={class:"flex items-end gap-4px"},wt={class:"text-12px opacity-50 p-4px"},ft={key:0,class:"fa-solid fa-circle-check"},At={class:"flex-col gap-8px"},Mt={class:"text-0.75rem"},Lt={class:"text-wrap"},kt={class:"flex-col"},bt={class:"flex justify-between"},Tt=["href"],Ct={key:0},Rt="其他店家",St=ne({__name:"SearchReward",setup(o){const{showRewardMilesType:t,commonPaymentMethods:a,cards:n,conditionTypes:c,storeAliases:h,storeList:u}=ve(_e()),l=S(0),d=S(""),f=S("Domestic"),A=S([]),_=me("rewardCardList"),M=me("storeAutoComplete"),e=Q(()=>{const v=u.value.map(s=>({store:s,aliases:[...h.value.get(s)??[]]}));return[{store:Rt},...v]});function r(v,s,i){return s=s.toLowerCase(),[v,...(i==null?void 0:i.raw.aliases)??[]].map(k=>k.toLowerCase()).some(k=>k.includes(s))}function N(v,s){return t.value==="CurrentPlanRewardMiles"?[v.currentPlanRewardMiles(s)]:v.getAllPlanRewardMiles(s)}const p=Q(()=>{var i,T;const v={amount:l.value,acceptedPayments:A.value,transactionAttributesType:f.value,currentConditions:[...c.value]};d.value!==""&&(v.transactionStore=d.value);const s=[];for(const k of n.value){if(!(k instanceof Le))continue;const K=N(k,v);for(const U of K){const G={cardName:k.name,planName:U.planName,rewardName:U.name,miles:U.miles,payments:U.payments,airLinesCode:k.airLinesCode,isSelectedPlan:t.value==="AllPlanRewardMiles"&&U.planId===k.selectedPlanId,calculateDetail:F(U.reward),rewardDescription:((i=U.reward)==null?void 0:i.description)??null,cardUrl:k.cardUrl,description:k.description};s.push(G)}}return(T=_.value)==null||T.scrollTo({top:0,behavior:"smooth"}),we(we(s,"isSelectedPlan","desc"),"miles","desc")}),m=S(null);function F(v){const s="回饋計算:";switch(v==null?void 0:v.type){case"RoundedPointsReward":case"TruncatedPointsReward":{const i=v.type==="RoundedPointsReward"?Math.round:Math.floor;let T=0;return[s,...v.pointBackRates.map(({rate:k,limit:K})=>{const U=Math.min(i(l.value*k/100),K??1/0);T+=U;const G=K!==void 0?` (limit ${K})`:"";return`${l.value} * ${k}% = ${U}${G}`}),`總計 ${T} points`,`${T} / ${v.pointsPerMile} * ${v.milesPerUnit} = ${Math.round(T/v.pointsPerMile*v.milesPerUnit*100)/100} miles`]}case"PointsRewardPerThreshold":{const i=Math.floor(l.value/v.spendingPerPoint);return[s,`${l.value} / ${v.spendingPerPoint} = ${i} points`,`${i} / ${v.pointsPerMile} * ${v.milesPerUnit} = ${Math.round(i/v.pointsPerMile*v.milesPerUnit*100)/100} miles`]}case"CumulativeMilesReward":return[s,`${l.value} / ${v.spendingPerMile} = ${Math.round(l.value/v.spendingPerMile*100)/100}`];case"DirectMilesReward":return[s,`${l.value} / ${v.spendingPerMile} = ${Math.floor(l.value/v.spendingPerMile)} (小數省略)`];default:return[]}}return(v,s)=>{const i=P("v-text-field"),T=P("v-autocomplete"),k=P("v-label"),K=P("v-checkbox"),U=P("v-radio"),G=P("v-radio-group"),te=P("v-card"),ie=P("v-btn"),le=P("v-dialog");return w(),R(J,null,[g("div",yt,[y(i,{"model-value":l.value,class:"flex-grow-0",density:"comfortable","hide-details":"",label:"交易金額",inputmode:"decimal",clearable:l.value!==0,"onUpdate:modelValue":s[0]||(s[0]=L=>l.value=isNaN(parseFloat(L))?0:parseFloat(L))},null,8,["model-value","clearable"]),y(T,{ref:"storeAutoComplete",modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=L=>d.value=L),"custom-filter":r,class:"flex-grow-0",density:"comfortable","hide-details":"","item-value":"store","item-title":"store",label:"消費店家",items:e.value,clearable:d.value!=="",placeholder:"全部店家","onUpdate:menu":s[2]||(s[2]=L=>{var V;return!L&&((V=x(M))==null?void 0:V.blur())})},null,8,["modelValue","items","clearable"]),g("div",null,[y(k,{text:"支援的付款方式"}),g("div",vt,[(w(!0),R(J,null,X(x(a),(L,V)=>(w(),O(K,{key:V,modelValue:A.value,"onUpdate:modelValue":s[3]||(s[3]=re=>A.value=re),density:"compact",value:L,"hide-details":"",label:L},null,8,["modelValue","value","label"]))),128))])]),g("div",Pt,[y(k,{text:"交易類型"}),y(G,{modelValue:f.value,"onUpdate:modelValue":s[4]||(s[4]=L=>f.value=L),"hide-details":"",inline:""},{default:b(()=>[y(U,{density:"compact",label:"國內交易",value:"Domestic"}),y(U,{density:"compact",label:"國外交易",value:"Foreign"})]),_:1},8,["modelValue"])]),g("div",_t,[(w(!0),R(J,null,X(p.value,(L,V)=>(w(),O(te,{key:V,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined",onClick:()=>m.value=L},{title:b(()=>[g("div",ht,[g("div",gt,[z(E(L.miles)+" ",1),g("p",wt,E(L.airLinesCode),1)]),L.isSelectedPlan?(w(),R("i",ft)):Z("",!0)])]),text:b(()=>[g("div",At,[g("p",Mt,E(`${L.cardName} ${L.planName??""} ${L.rewardName??""}`)+" "+E(L.payments.length===0?"":` (支付方式: ${L.payments.join(", ")})`),1)])]),_:2},1032,["onClick"]))),128))],512)]),y(le,{"model-value":!!m.value,"onUpdate:modelValue":s[6]||(s[6]=L=>m.value=null)},{default:b(()=>[m.value?(w(),O(te,{key:0,class:"mx-auto reward-detail-dialog","min-width":"100%",title:`${m.value.cardName} ${m.value.planName??""} ${m.value.rewardName??""}`},{subtitle:b(()=>[g("p",Lt,E(m.value.rewardDescription??""),1)]),text:b(()=>[g("div",kt,[g("p",bt,[s[7]||(s[7]=z(" 卡片說明： ")),m.value.cardUrl!==null?(w(),R("a",{key:0,target:"_blank",class:"underline",href:m.value.cardUrl}," 網站 ",8,Tt)):Z("",!0)]),m.value.description!==""?(w(),R("p",Ct,E(m.value.description),1)):Z("",!0),s[8]||(s[8]=g("br",null,null,-1)),g("p",null,"消費金額: "+E(l.value),1),g("p",null,"哩程預估: "+E(m.value.miles)+" "+E(m.value.airLinesCode),1),s[9]||(s[9]=g("br",null,null,-1)),(w(!0),R(J,null,X(m.value.calculateDetail,(L,V)=>(w(),R("p",{key:V},E(L),1))),128))])]),actions:b(()=>[y(ie,{class:"ms-auto",text:"Close",onClick:s[5]||(s[5]=L=>m.value=null)})]),_:1},8,["title"])):Z("",!0)]),_:1},8,["model-value"])],64)}}}),Bt=Me(St,[["__scopeId","data-v-4b6e420c"]]),xt={class:"flex-col h-full overflow-hidden gap-8px"},Ut={class:"flex-shrink-0 flex-col gap-8px"},Et={key:0,class:"flex justify-between items-center"},It={class:"flex gap-8px"},$t={key:0,class:"gap-4px flex-col flex-grow-1 overflow-y-auto"},Ot={class:"text-1rem"},Nt={class:"text-0.8rem"},Vt={key:1,class:"flex-grow-1"},Dt={class:"flex-col gap-24px m-8px"},Jt={class:"flex-col gap-4px"},Ft=ne({__name:"StoreAliasManagement",setup(o){const t=_e(),{aliasType:a,customAliases:n,storeAliases:c}=ve(t),h=me("storeList"),u={default:"系統預設",additional:"預設+自定義",custom:"自定義"},l=S(!0),d=S(!1),f=S(!0),A=S("[]"),_=S(null),M=Q(()=>{let s;return a.value==="default"?s=ke:a.value==="additional"?s=[...c.value].map(([i,T])=>[i,[...T]]):s=[...n.value],s.map(([i,T])=>({title:i,aliases:[...T]}))});ge(()=>{var s;return(s=_.value)==null?void 0:s.title},s=>{if(s==null||_.value===null)return;const i=[...n.value.get(s)??[]];i[i.length-1]!==""&&i.push(""),_.value.aliases=i}),ge(l,F),xe(()=>{F(),d.value=!1,f.value=!0,l.value=!0});function e(s,i){if(_.value===null)return;let T=_.value.aliases;T[i]=s,T[T.length-1]!==""&&T.push("")}function r(s){if(a.value!=="default")if(s===null)_.value={title:null,aliases:[]};else{const i=[...n.value.get(s)??[]];i[i.length-1]!==""&&i.push(""),_.value={title:s,aliases:i}}}function N(){const{title:s,aliases:i}=_.value??{};s==null||i===void 0||(t.updateCustomAliases(s,[...new Set(i)].filter(Ke)),_.value=null)}function p(s){if(s=s.trim(),A.value=s,d.value=!0,s===""){f.value=!0;return}try{const i=JSON.parse(s);f.value=ye(i)}catch(i){console.error(i),f.value=!1}}function m(){let s;if(l.value)s=!0;else{A.value===""&&(A.value="[]");try{const i=JSON.parse(A.value);ye(i)?(t.updateAllCustomAliases(i),s=!0):s=!1}catch(i){console.error(i),s=!1}}s?(alert("儲存成功"),d.value=!1):alert(`儲存失敗${l.value?"":"，JSON 不符合規則"}`)}function F(){A.value=JSON.stringify([...n.value],null,2)}function v(s){d.value||(s==="default"&&(l.value=!0),t.updateAliasType(s))}return(s,i)=>{const T=P("v-label"),k=P("v-btn"),K=P("v-btn-toggle"),U=P("v-switch"),G=P("v-card"),te=P("v-textarea"),ie=P("v-toolbar-title"),le=P("v-spacer"),L=P("v-toolbar-items"),V=P("v-toolbar"),re=P("v-autocomplete"),Te=P("v-text-field"),Ce=P("v-dialog");return w(),R(J,null,[g("div",xt,[g("div",Ut,[y(T,{text:"別名設定"}),y(K,{"model-value":x(a),rounded:"0",group:"",class:"w-full flex justify-center",disabled:d.value,"onUpdate:modelValue":v},{default:b(()=>[(w(!0),R(J,null,X(x(be),(B,D)=>(w(),O(k,{key:D,class:"flex-1",value:B},{default:b(()=>[z(E(u[B]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["model-value","disabled"]),x(a)!=="default"?(w(),R("div",Et,[g("div",It,[l.value?(w(),O(k,{key:0,onClick:i[0]||(i[0]=B=>r(null))},{default:b(()=>i[6]||(i[6]=[z(" Add ")])),_:1})):(w(),O(k,{key:1,onClick:m},{default:b(()=>i[7]||(i[7]=[z(" Save ")])),_:1}))]),y(U,{modelValue:l.value,"onUpdate:modelValue":i[1]||(i[1]=B=>l.value=B),disabled:d.value,"hide-details":"",label:"圖示"},null,8,["modelValue","disabled"])])):Z("",!0)]),l.value?(w(),R("div",$t,[(w(!0),R(J,null,X(M.value,(B,D)=>(w(),O(G,{key:D,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined",onClick:q=>r(B.title)},{text:b(()=>[g("p",Ot,E(B.title),1),g("p",Nt,E(B.aliases.join(", ")),1)]),_:2},1032,["onClick"]))),128))])):(w(),R("div",Vt,[y(te,{"model-value":A.value,clearable:A.value!=="","auto-grow":"",disabled:x(a)==="default","max-rows":15,messages:d.value?"上方儲存完成後才能執行其他動作，離開這頁不會存檔":"","error-messages":f.value?"":"json 無效",label:"自定義別名設定檔","onUpdate:modelValue":p},null,8,["model-value","clearable","disabled","messages","error-messages"])]))]),y(Ce,{"model-value":!!_.value,fullscreen:"","onUpdate:modelValue":i[5]||(i[5]=B=>_.value=null)},{default:b(()=>[_.value?(w(),O(G,{key:0,class:"reward-detail-dialog"},{default:b(()=>[y(V,null,{default:b(()=>[y(k,{icon:"mdi-close",onClick:i[2]||(i[2]=B=>_.value=null)}),y(ie,null,{default:b(()=>i[8]||(i[8]=[z("編輯商店別名")])),_:1}),y(le),y(L,null,{default:b(()=>[y(k,{text:"Save",variant:"text",onClick:N})]),_:1})]),_:1}),g("div",Dt,[y(re,{ref:"storeList",modelValue:_.value.title,"onUpdate:modelValue":i[3]||(i[3]=B=>_.value.title=B),class:"flex-grow-0","hide-details":"",label:"目標店家",items:x(t).storeList,placeholder:"選擇店家","onUpdate:menu":i[4]||(i[4]=B=>{var D;return!B&&((D=x(h))==null?void 0:D.blur())})},null,8,["modelValue","items"]),g("div",Jt,[y(T,{text:"自定義別名列表"}),(w(!0),R(J,null,X(_.value.aliases,(B,D)=>(w(),O(Te,{key:D,"hide-details":"",clearable:"","model-value":B,"onUpdate:modelValue":q=>e(q,D),"onClick:clear":()=>{var q;return(q=_.value)==null?void 0:q.aliases.splice(D,1)}},null,8,["model-value","onUpdate:modelValue","onClick:clear"]))),128))])])]),_:1})):Z("",!0)]),_:1},8,["model-value"])],64)}}}),Kt={style:{height:"calc(100dvh - 56px)"},class:"overflow-hidden mt-56px p-8px"},Gt=ne({__name:"App",setup(o){const t={查詢回饋:Bt,信用卡管理:mt,商家別名:Ft,喜好設定:ct},a=Object.keys(t),n=S(!1),c=S(a[0]);return(h,u)=>{const l=P("v-app-bar-nav-icon"),d=P("v-app-bar-title"),f=P("v-app-bar"),A=P("v-list-item"),_=P("v-divider"),M=P("v-navigation-drawer"),e=P("v-app");return w(),O(e,null,{default:b(()=>[y(f,{density:"comfortable",elevation:2},{prepend:b(()=>[y(l,{onClick:u[0]||(u[0]=r=>n.value=!n.value)},{default:b(()=>u[2]||(u[2]=[g("i",{class:"fa-solid fa-bars"},null,-1)])),_:1}),y(d,null,{default:b(()=>[z(E(c.value),1)]),_:1})]),_:1}),y(M,{modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=r=>n.value=r)},{default:b(()=>[(w(!0),R(J,null,X(x(a),(r,N)=>(w(),R(J,{key:N},[y(A,{title:r,class:Ue(["h-48px",{"text-emphasis":c.value===r}]),onClick:()=>{c.value=r,n.value=!1}},null,8,["title","class","onClick"]),y(_)],64))),128))]),_:1},8,["modelValue"]),g("main",Kt,[(w(),O(Ee,null,[(w(),O(Ie(t[c.value])))],1024))])]),_:1})}}}),he=$e(Gt);he.use(De);he.use(Ne());he.mount("#app");
//# sourceMappingURL=bestMileageCards-CPEJZdz7.js.map
