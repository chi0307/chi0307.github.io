var Me=Object.defineProperty;var Ue=(o,e,a)=>e in o?Me(o,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[e]=a;var k=(o,e,a)=>Ue(o,typeof e!="symbol"?e+"":e,a);import{o as Ie,b as E,c as q,f as Q,d as oe,B as _,g as h,j as L,k as f,x as v,C as x,u as C,e as Pe,F as K,l as Y,v as V,D as H,t as I,y as W,w as xe,E as $e,m as Ne,K as Oe,G as Ve,A as Fe}from"../index-C3ARoBSF.js";import{d as Je,s as fe,c as De}from"../pinia-BK02bNfI.js";import{C as Ke,v as Ge}from"../StorageManager-rVgW3wpO.js";import{a as Te,b as Re}from"../sorts-BPW8KRTv.js";import{f as be,r as te,b as Ae,g as ve,a as _e}from"../index-f1g9dClV.js";import{_ as Le}from"../_plugin-vue_export-helper-DlAUqK2U.js";const Be=be(0),ze=te(0),he=te(2);class le{constructor({type:e,name:a}){k(this,"_name");k(this,"_type");this._type=e,this._name=a}get name(){return this._name}get type(){return this._type}calculateRangePointsCost(e,a){const n=[];for(let d=e;d<=a;d++){const p=he(d/this.calculatePoints(d));isNaN(p)||p===1/0||p===-1/0||n.push(p)}n.sort((d,p)=>d-p);const i=n[n.length-1],P=n[0];if(i===void 0||P===void 0)throw new Error("cannot be calculated");const c=n.reduce((d,p)=>d+p,0)/n.length;return{max:i,min:P,average:he(c)}}}class je extends le{constructor({pointBackRates:a,...n}){super(n);k(this,"_pointBackRates");this._pointBackRates=a}get _maxRete(){return this._pointBackRates.reduce((a,{rate:n})=>a+n,0)}get pointBackRates(){return this._pointBackRates}get description(){return`消費${this._pointBackRates.length>1?"最高":""}${this._maxRete.toString()}%回饋點數(四捨五入)`}calculatePoints(a){let n=0;for(const{rate:i,limit:P=1/0}of this._pointBackRates)n+=Math.min(ze(a*(i/100)),P);return n}toJSON(){return{name:this._name,type:this._type,pointBackRates:this._pointBackRates}}}class Xe extends le{constructor({pointBackRates:a,...n}){super(n);k(this,"_pointBackRates");this._pointBackRates=a}get _maxRete(){return this._pointBackRates.reduce((a,{rate:n})=>a+n,0)}get pointBackRates(){return this._pointBackRates}get description(){return`消費${this._pointBackRates.length>1?"最高":""}${this._maxRete.toString()}%回饋點數(無條件捨去)`}calculatePoints(a){let n=0;for(const{rate:i,limit:P=1/0}of this._pointBackRates)n+=Math.min(Be(a*(i/100)),P);return n}toJSON(){return{name:this._name,type:this._type,pointBackRates:this._pointBackRates}}}class We extends le{constructor({spendingPerPoint:a,...n}){super({...n});k(this,"_spendingPerPoint");this._spendingPerPoint=a}get spendingPerPoint(){return this._spendingPerPoint}get description(){return`每消費${this._spendingPerPoint.toString()}元累積1點 (小數會累計)`}calculatePoints(a){return he(a/this._spendingPerPoint)}toJSON(){return{name:this._name,type:this._type,spendingPerPoint:this._spendingPerPoint}}}class He extends le{constructor({spendingPerPoint:a,...n}){super({...n});k(this,"_spendingPerPoint");this._spendingPerPoint=a}get spendingPerPoint(){return this._spendingPerPoint}get description(){return`每消費${this._spendingPerPoint.toString()}元累積1點 (小數不累計)`}calculatePoints(a){return Be(a/this._spendingPerPoint)}toJSON(){return{name:this._name,type:this._type,spendingPerPoint:this._spendingPerPoint}}}const Ye={RoundedPercentageReward:je,TruncatedPercentageReward:Xe,AccumulatedPointsReward:We,FixedRatePointsReward:He};function Ze(o){return new Ye[o.type](o)}class Qe{constructor(e,a,n){k(this,"_name");k(this,"_rewards");k(this,"_condition");if(this._name=e,this._condition=a,n.length===0)throw new Error(`Plan "${e??"unknown"}" must have at least one reward rule.`);this._rewards=n}get name(){return this._name}get storeList(){return Ae(this._rewards.flatMap(e=>[...e.stores,...e.storeBlackList]))}checkPlanIsVisible(e){return this._condition===null||!!(e!=null&&e.includes(this._condition))}getApplicableReward({transactionStore:e=null,acceptedPayments:a=[],transactionAttributesType:n,currentConditions:i=null}){return this._condition!==null&&!(i!=null&&i.includes(this._condition))?null:this._rewards.find(({stores:P,payments:c,transactionType:d,paymentBlackList:p,storeBlackList:w,condition:u})=>{const y=e===null||P.size===0||P.has(e),A=e===null||w.size===0||!w.has(e),t=a.length===0||c.size===0||a.some(R=>c.has(R)),r=a.length===0||p.size===0||a.some(R=>!p.has(R)),F=d===null||n===d,g=u===null||!!(i!=null&&i.includes(u));return y&&A&&t&&r&&F&&g})??null}getRewardMiles({transactionStore:e,acceptedPayments:a,amount:n,transactionAttributesType:i,currentConditions:P}){const c=this.getApplicableReward({acceptedPayments:a,transactionStore:e,transactionAttributesType:i,currentConditions:P});if(c===null)return null;const d=a===void 0?[...c.payments.values()]:a.filter(p=>c.payments.has(p));return{rewardName:c.rewardStrategy.name,rewardPoints:c.rewardStrategy.calculatePoints(n),payments:d.filter(p=>!c.paymentBlackList.has(p)),rewardStrategy:c.rewardStrategy}}toJSON(){return{name:this._name,condition:this._condition,rewards:this._rewards.map(({rewardStrategy:e,stores:a,payments:n,transactionType:i,paymentBlackList:P,storeBlackList:c,condition:d})=>({rewardStrategy:e.toJSON(),stores:[...a],storeBlackList:[...c],payments:[...n],paymentBlackList:[...P],transactionType:i,condition:d}))}}}const qe=["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"];class et{constructor({name:e,description:a,plans:n,storeBlackList:i,paymentBlackList:P,cardUrl:c,updateAt:d,pointExchangeStrategies:p}){k(this,"_selectedPlanId");k(this,"_selectedPointExchangeStrategyId");k(this,"_name");k(this,"_description");k(this,"_plans");k(this,"_cardUrl");k(this,"_storeBlackList");k(this,"_paymentBlackList");k(this,"_updateAt");k(this,"_pointExchangeStrategies");this._name=e,this._description=a,this._plans=n,this._cardUrl=c,this._storeBlackList=i,this._paymentBlackList=P,this._updateAt=d,this._pointExchangeStrategies=p;const w=this._plans.keys().next().value;if(this._plans.size===0||w===void 0)throw new Error("this credit card no any plan");this._selectedPlanId=w;const u=this._pointExchangeStrategies.keys().next().value;if(this._plans.size===0||u===void 0)throw new Error("this credit card no any exchange strategy");this._selectedPointExchangeStrategyId=u}get name(){return this._name}get description(){return this._description}get selectedPlanId(){return this._selectedPlanId}get selectedPlan(){return this._getPlan(this._selectedPlanId)}get selectedPointExchangeStrategyId(){return this._selectedPointExchangeStrategyId}get selectedPointExchangeStrategy(){return this._getPointExchangeStrategy(this._selectedPointExchangeStrategyId)}get selectablePlan(){return[...this._plans.entries()].map(([e,{name:a}])=>({id:e,name:a}))}get storeList(){return Ae([...[...this._plans.values()].flatMap(e=>e.storeList),...this._storeBlackList])}get cardUrl(){return this._cardUrl}_getPlan(e){const a=this._plans.get(e);if(a===void 0)throw new Error(`plan id ${e} not found. Available plans: ${[...this._plans.keys()].join(", ")}`);return a}_getPointExchangeStrategy(e){const a=this._pointExchangeStrategies.get(e);if(a===void 0)throw new Error(`pointExchangeStrategy id ${e} not found. Available pointExchangeStrategies: ${[...this._plans.keys()].join(", ")}`);return a}_rewardMilesWithPlan(e,a,n){var u;const i=this._getPlan(e),P=this._getPointExchangeStrategy(a),c={planId:e,planName:i.name,rewardName:null,rewardPoints:0,payments:[],rewardStrategy:null,pointExchangeStrategy:P,pointExchangeName:P.name,airlineCode:P.airlineCode,miles:0},d=n.transactionStore!==void 0&&this._storeBlackList.has(n.transactionStore),p=(u=n.acceptedPayments)==null?void 0:u.some(y=>this._paymentBlackList.has(y));if(d||p)return c;const w=i.getRewardMiles(n);return w===null?c:{planId:e,planName:i.name,pointExchangeStrategy:P,pointExchangeName:P.name,miles:P.calculateMiles(w.rewardPoints),airlineCode:P.airlineCode,...w}}updatePlan(e){return this._plans.get(e)?(this._selectedPlanId=e,!0):!1}updatePointExchangeStrategy(e){return this._pointExchangeStrategies.get(e)?(this._selectedPointExchangeStrategyId=e,!0):!1}getRewardInfos(e,{onlyCurrentPlan:a=!1,onlyCurrentExchangeStrategy:n=!1}={}){const i=a?[[this._selectedPlanId,this.selectedPlan]]:[...this._plans.entries()],P=n?[this._selectedPointExchangeStrategyId]:[...this._pointExchangeStrategies.keys()],c=[];for(const[d,p]of i)if(p.checkPlanIsVisible(e.currentConditions??null))for(const u of P){const y=this._rewardMilesWithPlan(d,u,e);c.push(y)}return c}toJSON(){return{name:this._name,description:this._description,cardUrl:this._cardUrl,storeBlackList:[...this._storeBlackList],paymentBlackList:[...this._paymentBlackList],plans:[...this._plans].sort(([e])=>e===this._selectedPlanId?-1:1).map(([e,a])=>a.toJSON()),updateAt:this._updateAt.toISOString(),pointExchangeStrategies:[...this._pointExchangeStrategies].sort(([e])=>e===this._selectedPointExchangeStrategyId?-1:1).map(([e,a])=>a.toJSON())}}}const tt=te(2);class at{constructor({name:e,airlineCode:a,pointsPerMile:n,milesPerUnit:i}){k(this,"_name");k(this,"_airlineCode");k(this,"_pointsPerMile");k(this,"_milesPerUnit");this._name=e,this._airlineCode=a,this._pointsPerMile=n,this._milesPerUnit=i}get name(){return this._name}get description(){return`${this._pointsPerMile}點可以交換${this._milesPerUnit}哩程`}get airlineCode(){return this._airlineCode}get pointsPerMile(){return this._pointsPerMile}get milesPerUnit(){return this._milesPerUnit}calculateMiles(e){return tt(e*this._milesPerUnit/this._pointsPerMile)}toJSON(){return{name:this._name,airlineCode:this._airlineCode,pointsPerMile:this._pointsPerMile,milesPerUnit:this._milesPerUnit}}}function nt({name:o,description:e,storeBlackList:a,paymentBlackList:n,cardUrl:i,plans:P,updateAt:c,pointExchangeStrategies:d}){const p=new Map(P.map(({name:w,condition:u,rewards:y})=>[ve(),new Qe(w,u??null,y.map(({stores:A,payments:t,transactionType:r,rewardStrategy:F,paymentBlackList:g,storeBlackList:R,condition:G})=>({rewardStrategy:Ze(F),stores:new Set(A),storeBlackList:new Set(R),payments:new Set(t),paymentBlackList:new Set(g),transactionType:r??null,condition:G??null})))]));return new et({name:o,description:e,plans:p,storeBlackList:new Set(a),paymentBlackList:new Set(n),cardUrl:i,updateAt:new Date(c),pointExchangeStrategies:new Map(d.map(w=>[ve(),new at(w)]))})}const ae=["分期付款"],ne=[],de=["信用卡","Apple Pay","Samsung Pay","Google Pay","Fitbit Pay","Garmin Pay","Hami Pay"];function se(o){const e={rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:.3}]}};return[{name:"集精選",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:2}]},stores:["家樂福","LOPIA台灣","全聯福利中心","台灣中油-直營","7-ELEVEN","全家便利商店","IKEA"],payments:[...de,"PX Pay","My FamiPay","OPEN錢包"]},e]},{name:"玩數位",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:o}]},stores:["App Store","Apple Music","iCloud","Apple TV+","Apple Arcade","Apple One","iTunes","Google Play","Disney+","Netflix","Spotify","KKBOX","YouTube Premium","蝦皮購物","momo購物網","PChome 24h購物(不含儲值及電子票券)","博客來","小樹購","Coupang 酷澎(台灣)","淘寶/天貓"],paymentBlackList:["Line Pay","街口支付"]},{...e,storeBlackList:["全聯福利中心"]}]},{name:"樂饗購",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:o}]},stores:["遠東SOGO百貨","遠東Garden City","太平洋百貨","新光三越","SKM Park","BELLAVITA","微風廣場","遠東百貨","Big City遠東巨城購物中心","誠品生活","環球購物中心","CITYLINK","統一時代","台北101","ATT 4 FUN","明曜百貨","京站","美麗華","大葉高島屋","比漾廣場","大江國際購物中心","中友百貨","廣三SOGO","Tiger City","勤美誠品綠園道","大魯閣新時代","耐斯廣場","南紡購物中心","夢時代","漢神百貨","漢神巨蛋","MITSUI OUTLET PARK 林口","MITSUI OUTLET PARK 台中港","MITSUI OUTLET PARK 台南","Mitsui Shopping Park LaLaport 台中","義大世界購物廣場","華泰名品城","義享天地","麗寶OUTLET Mall","秀泰生活","台茂購物中心","新月廣場","三創生活","宏匯廣場","高雄棧貳庫/大港倉","NOKE忠泰樂生活","Uber Eats","foodpanda","foodomo","國內餐飲(不含餐券)","麥當勞","康是美","屈臣氏"],payments:de},{...e,storeBlackList:["全聯福利中心"]}]},{name:"趣旅行",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:o}]},stores:["海外實體消費","東京迪士尼樂園","東京華納兄弟哈利波特影城","大阪環球影城(USJ)","吉卜力公園","Apple Wallet SUICA","Apple Wallet PASMO","Apple Wallet ICOCA","Uber","Grab","台灣高鐵","yoxi","台灣大車隊","iRent","和運租車","格上租車","中華航空","長榮航空","星宇航空","台灣虎航","國泰航空","樂桃航空","阿聯酋航空","酷航","捷星航空","日本航空","亞洲航空","聯合航空","ANA全日空","新加坡航空","越捷航空","大韓航空","達美航空","土耳其航空","卡達航空","法國航空","國內飯店住宿","星野集團","全球迪士尼飯店","東橫INN","KKday","Agoda","Klook","Airbnb","Hotels.com","Expedia","Booking.com","Trip.com","AsiaYo","ezTravel易遊網","雄獅旅遊","可樂旅遊","東南旅遊","五福旅遊","燦星旅遊","山富旅遊","長汎假期","鳳凰旅行社","Ezfly易飛網","理想旅遊","永利旅行社","三賀旅行社","173WIFI","JetFi mobile","威訊 WaySim","AIRSIM","SIM88"],payments:de},{...e,storeBlackList:["全聯福利中心"]}]},{name:"來支付",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:2}]},payments:["Line Pay"]},{...e,storeBlackList:["全聯福利中心"]}]},{name:"慶生月",condition:"Birthday",rewards:[{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:10}]},stores:["東京迪士尼樂園","大阪環球影城(USJ)","名古屋樂高樂園","紅葉蛋糕官方網站","法朋烘焙甜點坊","興波咖啡 華山旗艦店","海底撈火鍋","輕井澤鍋物","老四川巴蜀麻辣燙","二本松涮涮屋","橋山.壽喜燒","Umai屋馬燒肉","老井極上燒肉","燒肉中山(台中大墩)","藏壽司台灣","貳樓","膳馨民間創作料理","馨苑小料理","雅室牛排 仁愛圓環店","ABV餐飲集團","WAT","臺虎精釀(信義 | 西門 | 臺中 | 啜飲室大安)","BAR Bodega","BAR MED","JiN Her 今鶴","錢櫃KTV","好樂迪KTV","星聚點KTV","享溫馨KTV","Nintendo","巴哈姆特動畫瘋","閃動格子CyberCube"]},{rewardStrategy:{type:"RoundedPercentageReward",name:null,pointBackRates:[{rate:3.5}]},stores:["新光三越","Uber Eats (不含 Uber One)","Agoda","Trip.com","Klook","國內飯店住宿","星野集團","全球迪士尼飯店","東橫INN"]},{...e,storeBlackList:["全聯福利中心"]}]}]}const pe=[{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:360,milesPerUnit:1e3},{name:"長榮航空哩程 + 長榮世界卡",airlineCode:"EVA",pointsPerMile:300,milesPerUnit:1e3}];se(2),se(3),se(3.3);const st={name:"Cube 卡",description:"Cube 卡 (Level 2) 回饋方案",cardUrl:"https://www.cathaybk.com.tw/cathaybk/personal/product/credit-card/cards/cube/",storeBlackList:ae,paymentBlackList:ne,updateAt:"2024-12-01T00:00:00.000Z",plans:se(3),pointExchangeStrategies:[{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:360,milesPerUnit:1e3}]},re=["政府稅款","公共事業代扣繳","交通違規罰鍰","分期付款","全聯福利中心","7-ELEVEN","全家便利商店"],ie=[];new Date("2024/12/01 00:00:00").toISOString(),new Date("2024/12/01 00:00:00").toISOString(),new Date("2024/12/01 00:00:00").toISOString();const ue=["台灣中油-直營","台灣大車隊","台鐵","台灣高鐵","UBER","Yoxi","LINEGO","新光三越","遠東百貨","遠東SOGO百貨","誠品生活","漢神百貨","微風廣場","微風信義","微風南京","微風南山","微風台北車站","環球購物中心","台北101","華泰名品城","MITSUI OUTLET PARK 林口","MITSUI OUTLET PARK 台中港","MITSUI OUTLET PARK 台南","Big City遠東巨城購物中心","昇恆昌","夢時代購物中心","京站","美麗華","南紡購物中心","秀泰生活","台茂購物中心","Mitsui Shopping Park LaLaport 台中","統領廣場","采盟","Uber Eats","foodpanda","星巴克","EZTABLE","王品瘋美食","摩斯漢堡","foodomo","漢來美食","饗Joy","饗食天堂","果然匯","小福利","饗饗","旭集","開飯","饗泰多","真珠","瓦城","非常泰","大心","1010","時時香","BOBO","乾杯集團","路易莎","中華航空","長榮航空","日本航空","台灣虎航","樂桃航空","酷航","立榮航空","華信航空","Agoda","booking.com","Hotels.com","AsiaYo","Expedia","KKday","Klook","雄獅旅遊","可樂旅遊","東南旅行社","Apple直營店","小米台灣","全國電子","燦坤","迪卡儂","屈臣氏","康是美","IKEA","特力屋","特力和樂","UNIQLO","NET","大樹藥局","丁丁藥妝","momo購物網","蝦皮購物","淘寶網","Coupang酷澎","東森購物","雅虎奇摩購物中心","博客來","玉山Wallet愛心捐款-單筆捐款","玉山Wallet愛心捐款-定期定額","特斯拉","Gogoro電池資費","YouBike 2.0","日本實體店","韓國實體店","泰國實體店","越南實體店","新加坡實體店","中國實體店","香港實體店","澳門實體店","美國實體店","英國實體店","法國實體店","德國實體店","義大利實體店"],me={rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7}]}},rt=[{name:"UniCard 卡",description:"",cardUrl:"https://www.esunbank.com/zh-tw/personal/credit-card/intro/bank-card/unicard",storeBlackList:re,paymentBlackList:ie,pointExchangeStrategies:[{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:200,milesPerUnit:300}],plans:[{name:"任意選 (需要切換店家)",rewards:[{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2.5,limit:500}]},stores:ue,payments:["信用卡","Apple Pay","Samsung Pay","Google Pay"]},{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2.5,limit:500}]},payments:["Line Pay","街口支付","悠遊付","橘子支付","icash pay"]},me]},{name:"簡單選",rewards:[{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2,limit:500}]},stores:ue,payments:["信用卡","Apple Pay","Samsung Pay","Google Pay"]},{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:2,limit:500}]},payments:["Line Pay","街口支付","悠遊付","橘子支付","icash pay"]},me]},{name:"UP選",rewards:[{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:3.5,limit:2e3}]},stores:ue,payments:["信用卡","Apple Pay","Samsung Pay","Google Pay"]},{rewardStrategy:{type:"TruncatedPercentageReward",name:null,pointBackRates:[{rate:.3},{rate:.7},{rate:3.5,limit:2e3}]},payments:["Line Pay","街口支付","悠遊付","橘子支付","icash pay"]},me]}],updateAt:new Date("2024/12/01 00:00:00").toISOString()}],it=rt[0],ye=["政府稅款","公共事業代扣繳","交通違規罰鍰","分期付款"],ge=["全盈+PAY","icash pay","OPEN錢包","My FamiPay"],ot=[{name:"旅人無限卡",description:"",cardUrl:"https://www.hsbc.com.tw/credit-cards/products/travel/visa-infinite/",storeBlackList:ye,paymentBlackList:ge,pointExchangeStrategies:[{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:1,milesPerUnit:1}],plans:[{name:null,rewards:[{rewardStrategy:{type:"AccumulatedPointsReward",name:"國外消費",spendingPerPoint:10},transactionType:"Foreign"},{rewardStrategy:{type:"AccumulatedPointsReward",name:"國內消費",spendingPerPoint:18},transactionType:"Domestic"}]}],updateAt:new Date("2024/12/01 00:00:00").toISOString()},{name:"旅人御璽卡",description:"",cardUrl:"https://www.hsbc.com.tw/credit-cards/products/travel/visa-signature/",storeBlackList:ye,paymentBlackList:ge,pointExchangeStrategies:[{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:1,milesPerUnit:1}],plans:[{name:null,rewards:[{rewardStrategy:{type:"AccumulatedPointsReward",name:"國外消費",spendingPerPoint:15},transactionType:"Foreign"},{rewardStrategy:{type:"AccumulatedPointsReward",name:"國內消費",spendingPerPoint:18},transactionType:"Domestic"}]}],updateAt:new Date("2024/12/01 00:00:00").toISOString()},{name:"旅人輕旅卡",description:"",cardUrl:"https://www.hsbc.com.tw/credit-cards/products/travel/visa-light/",storeBlackList:ye,paymentBlackList:ge,pointExchangeStrategies:[{name:"長榮航空哩程",airlineCode:"EVA",pointsPerMile:1,milesPerUnit:1}],plans:[{name:null,rewards:[{rewardStrategy:{type:"AccumulatedPointsReward",name:"國外消費",spendingPerPoint:20},transactionType:"Foreign"},{rewardStrategy:{type:"AccumulatedPointsReward",name:"國內消費",spendingPerPoint:20},transactionType:"Domestic"}]}],updateAt:new Date("2024/12/01 00:00:00").toISOString()}],lt=ot[2],ct=[st,lt,it],we=o=>Array.isArray(o)&&o.every(e=>Array.isArray(e)&&e.length===2&&typeof e[0]=="string"&&Array.isArray(e[1])&&e[1].every(a=>typeof a=="string")),Ce=[["7-ELEVEN",["7-11","Seven Eleven","統一超商","小7"]],["ANA全日空",["ANA","全日空","All Nippon Airways","NH"]],["ATT 4 FUN",["ATT4FUN","ATT信義"]],["App Store",["蘋果應用商店"]],["Apple Arcade",["蘋果遊戲訂閱服務"]],["Apple Music",["蘋果音樂","Apple音樂"]],["Apple One",["蘋果One訂閱"]],["Apple TV+",["Apple TV Plus"]],["Apple Wallet ICOCA",["ICOCA電子票","Apple錢包ICOCA"]],["Apple Wallet PASMO",["PASMO電子票","Apple錢包PASMO"]],["Apple Wallet SUICA",["SUICA電子票","Apple錢包SUICA"]],["CITYLINK",["City Link"]],["Disney+",["Disney Plus","迪士尼+"]],["Google Play",["Google應用商店"]],["Grab",["Grab Taxi","Grab叫車"]],["MITSUI OUTLET PARK 台中港",["三井台中港","三井OUTLET台中"]],["MITSUI OUTLET PARK 台南",["三井台南","三井OUTLET台南"]],["MITSUI OUTLET PARK 林口",["三井林口","三井OUTLET林口"]],["Mitsui Shopping Park LaLaport 台中",["LaLaport台中","三井LaLaport台中"]],["Netflix",["網飛"]],["Nintendo",["任天堂","Switch","老任"]],["PChome 24h購物(不含儲值及電子票券)",["PChome","PChome購物"]],["Tiger City",["老虎城","Tiger City購物中心"]],["Trip.com",["攜程"]],["Uber Eats (不含 Uber One)",["優步外送"]],["foodpanda",["熊貓外送","Food Panda"]],["iCloud",["蘋果雲端","iCloud雲端"]],["iRent",["i Rent"]],["iTunes",["蘋果iTunes"]],["中友百貨",["中友"]],["中華航空",["China Airlines","CAL","CI","華航"]],["亞洲航空",["AirAsia","亞航","AXM","AK"]],["京站",["Q Square","京站商場"]],["全家便利商店",["FamilyMart","全家"]],["全球迪士尼飯店",["Disney Hotels"]],["全聯福利中心",["PX Mart"]],["南紡購物中心",["Tainan Spinnery Mall","南紡"]],["博客來",["Books.com.tw"]],["卡達航空",["Qatar Airways","卡航","QTR","QR"]],["可樂旅遊",["Cola Travel","可樂旅行社"]],["台北101",["Taipei 101","101大樓"]],["台灣中油-直營",["中油直營","直營中油"]],["台灣大車隊",["Taiwan Taxi","大車隊"]],["台灣虎航",["Tigerair Taiwan","台虎","TWA","IT"]],["台灣高鐵",["Taiwan High Speed Rail"]],["台茂購物中心",["TaiMall"]],["吉卜力公園",["Ghibli Park"]],["國泰航空",["Cathay Pacific","國泰","CPA","CX","Cathay Pacific Airways"]],["土耳其航空",["Turkish Airlines","土航","THY","TK"]],["夢時代",["Dream Mall"]],["大阪環球影城(USJ)",["Universal Studios Japan"]],["大韓航空",["Korean Air","韓航","KAL","KE"]],["大魯閣新時代",["Taroko Mall","大魯閣"]],["太平洋百貨",["Pacific Department Store","太平洋"]],["好樂迪KTV",["Holiday"]],["家樂福",["Carrefour"]],["屈臣氏",["Watsons"]],["康是美",["Cosmed"]],["捷星航空",["JST","JQ","Jetstar Airways"]],["新加坡航空",["SIA","SQ","Singapore Airlines"]],["日本航空",["JAL","JL","Japan Airlines"]],["星宇航空",["starlux","SJX","JX","STARLUX Airlines"]],["樂桃航空",["APJ","MM","Peach Aviation"]],["法國航空",["AFR","AF","Air France"]],["聯合航空",["UAL","UA","United Airlines"]],["蝦皮購物",["shopee"]],["越捷航空",["VJC","VJ","VietJet Air"]],["達美航空",["DAL","DL","Delta Air Lines"]],["遠東百貨",["遠百"]],["酷航",["SCO","TR","Scoot"]],["長榮航空",["EVA","BR","EVA Airlines","EVA Air"]],["阿聯酋航空",["UAE","EK","Emirates"]],["麥當勞",["McDonald's"]],["IKEA",["宜家家居"]],["星巴克",["starbucks"]]],dt=o=>o==="AllPlanRewardMiles"||o==="CurrentPlanRewardMiles",O=new Ke(localStorage,{showRewardMilesType:dt,commonPaymentMethods:(()=>{const o=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]);return e=>Array.isArray(e)&&e.every(a=>o.has(a)===!0)})(),cardConfigs:(()=>{const o=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]),e=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]),a=new Set(["信用卡","Apple Pay","Samsung Pay","Google Pay","Line Pay","Fitbit Pay","Garmin Pay","Hami Pay","街口支付","全盈+PAY","全支付","Pi錢包","橘子支付","歐付寶","icash pay","OPEN錢包","My FamiPay","悠遊付","ezPay","GOMAJI Pay","friday wallet","PayPal","PX Pay","中油Pay","台灣Pay","支付寶"]),n=t=>typeof t.name=="string"&&typeof t.description=="string"&&(t.cardUrl===null||typeof t.cardUrl=="string")&&(t.storeBlackList===void 0||Array.isArray(t.storeBlackList)&&t.storeBlackList.every(r=>typeof r=="string"))&&(t.paymentBlackList===void 0||Array.isArray(t.paymentBlackList)&&t.paymentBlackList.every(r=>o.has(r)===!0))&&Array.isArray(t.plans)&&t.plans.every(r=>typeof r=="object"&&r!==null&&i(r))&&typeof t.updateAt=="string"&&RegExp(/^[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\x2d[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\x2d[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?T[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?:[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?:[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\.[+-]?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?Z$/).test(t.updateAt)&&Array.isArray(t.pointExchangeStrategies)&&t.pointExchangeStrategies.every(r=>typeof r=="object"&&r!==null&&y(r)),i=t=>(t.name===null||typeof t.name=="string")&&Array.isArray(t.rewards)&&t.rewards.every(r=>typeof r=="object"&&r!==null&&P(r))&&(t.condition===null||t.condition===void 0||t.condition==="Birthday"),P=t=>typeof t.rewardStrategy=="object"&&t.rewardStrategy!==null&&A(t.rewardStrategy)&&(t.transactionType===null||t.transactionType===void 0||t.transactionType==="Domestic"||t.transactionType==="Foreign")&&(t.stores===void 0||Array.isArray(t.stores)&&t.stores.every(r=>typeof r=="string"))&&(t.storeBlackList===void 0||Array.isArray(t.storeBlackList)&&t.storeBlackList.every(r=>typeof r=="string"))&&(t.payments===void 0||Array.isArray(t.payments)&&t.payments.every(r=>e.has(r)===!0))&&(t.paymentBlackList===void 0||Array.isArray(t.paymentBlackList)&&t.paymentBlackList.every(r=>a.has(r)===!0))&&(t.condition===null||t.condition===void 0||t.condition==="Birthday"),c=t=>Array.isArray(t.pointBackRates)&&t.pointBackRates.every(r=>typeof r=="object"&&r!==null&&d(r))&&(t.name===null||typeof t.name=="string")&&t.type==="RoundedPercentageReward",d=t=>typeof t.rate=="number"&&(t.limit===void 0||typeof t.limit=="number"),p=t=>Array.isArray(t.pointBackRates)&&t.pointBackRates.every(r=>typeof r=="object"&&r!==null&&d(r))&&(t.name===null||typeof t.name=="string")&&t.type==="TruncatedPercentageReward",w=t=>typeof t.spendingPerPoint=="number"&&(t.name===null||typeof t.name=="string")&&t.type==="AccumulatedPointsReward",u=t=>typeof t.spendingPerPoint=="number"&&(t.name===null||typeof t.name=="string")&&t.type==="FixedRatePointsReward",y=t=>(t.name===null||typeof t.name=="string")&&typeof t.airlineCode=="string"&&typeof t.pointsPerMile=="number"&&typeof t.milesPerUnit=="number",A=t=>t.type==="TruncatedPercentageReward"?p(t):t.type==="RoundedPercentageReward"?c(t):t.type==="FixedRatePointsReward"?u(t):t.type==="AccumulatedPointsReward"?w(t):!1;return t=>Array.isArray(t)&&t.every(r=>typeof r=="object"&&r!==null&&n(r))})(),conditionTypes:o=>Array.isArray(o)&&o.every(e=>e==="Birthday"),aliasType:o=>o==="default"||o==="additional"||o==="custom",customAliases:we},"bestMileageCards"),Ee=["default","additional","custom"],Se=Je("BestMileageCards",()=>{Ie(()=>{const g=O.get("cardConfigs")??[];i.value=new Map(g.map(R=>[ve(),R]))});const o=E(O.get("showRewardMilesType")??"AllPlanRewardMiles");function e(g){O.set("showRewardMilesType",g),o.value=g}const a=E(O.get("commonPaymentMethods")??["信用卡","Apple Pay","Line Pay","街口支付"]);function n([...g]){g=[...new Set(g)],O.set("commonPaymentMethods",g),a.value=g}const i=E(new Map),P=q(()=>(i.value.size===0?ct:[...i.value.values()]).map(R=>nt(R)));function c(g,R){i.value.set(g,R),O.set("cardConfigs",[...i.value.values()])}const d=q(()=>Te(Ae(P.value.flatMap(g=>g.storeList)),"asc")),p=E(O.get("conditionTypes")??[]);function w([...g]){p.value=g,O.set("conditionTypes",g)}const u=E(O.get("aliasType")??"default");function y(g){Ee.includes(g)&&(u.value=g,O.set("aliasType",g))}const A=E(new Map(O.get("customAliases")??[]));function t(g,R){R.length===0?A.value.delete(g):A.value.set(g,R),O.set("customAliases",[...A.value])}function r(g){A.value=new Map(g),O.set("customAliases",g)}const F=q(()=>{const g=[];["default","additional"].includes(u.value)&&g.push(...Ce),["additional","custom"].includes(u.value)&&g.push(...A.value);const R=new Map;for(const[G,T]of g){const m=R.get(G)??new Set;for(const s of T)m.add(s);R.set(G,m)}return R});return{showRewardMilesType:Q(o),updateShowRewardMilesType:e,commonPaymentMethods:Q(a),updateCommonPaymentMethods:n,cards:P,updateCardConfig:c,storeList:Q(d),conditionTypes:Q(p),updateConditionTypes:w,aliasType:Q(u),storeAliases:F,updateAliasType:y,customAliases:Q(A),updateCustomAliases:t,updateAllCustomAliases:r}}),pt={class:"flex-col gap-24px my-16px"},ut={class:"flex-center gap-8px"},mt={class:"flex mx-16px"},yt=oe({__name:"CommonSettings",setup(o){const e=Se(),{showRewardMilesType:a,commonPaymentMethods:n,conditionTypes:i}=fe(e);return(P,c)=>{const d=_("v-label"),p=_("v-radio"),w=_("v-radio-group"),u=_("v-select"),y=_("v-switch");return h(),L("div",pt,[f("div",ut,[v(d,{text:"回饋顯示"}),v(w,{"model-value":C(a),"hide-details":"",inline:"","onUpdate:modelValue":c[0]||(c[0]=A=>A!==null&&C(e).updateShowRewardMilesType(A))},{default:x(()=>[v(p,{density:"compact",label:"全部方案",value:"AllPlanRewardMiles"}),v(p,{density:"compact",label:"當前方案",value:"CurrentPlanRewardMiles"})]),_:1},8,["model-value"])]),f("div",null,[v(u,{"model-value":C(n),items:C(Te)(C(qe),"asc"),label:"使用中的付款方式",multiple:"","hide-details":"","onUpdate:modelValue":c[1]||(c[1]=A=>A!==null&&C(e).updateCommonPaymentMethods(A))},null,8,["model-value","items"])]),f("div",null,[v(d,{text:"其他設定"}),f("div",mt,[v(y,{"model-value":C(i),label:"生日中",value:"Birthday","hide-details":"",color:"blue","onUpdate:modelValue":c[2]||(c[2]=A=>A!==null&&C(e).updateConditionTypes(A))},null,8,["model-value"])])])])}}}),gt={};function Pt(o,e){return"管理信用卡的設定"}const vt=Le(gt,[["render",Pt]]),_t={class:"gap-8px h-full flex-col"},ht={class:"flex items-center flex-wrap gap-x-8px"},wt={class:"gap-8px flex-center"},ft={ref:"rewardCardList",class:"flex-col gap-4px flex-grow-1 overflow-y-auto"},At={class:"flex items-center justify-between"},St={class:"flex gap-4px items-end"},kt={class:"text-12px opacity-50 p-4px"},xt={key:0,class:"fa-solid fa-circle-check"},Rt={class:"flex-col gap-8px"},Tt={class:"text-0.75rem"},bt={class:"text-wrap"},Lt={class:"flex-col"},Bt={class:"flex justify-between"},Ct=["href"],Et={key:0},Mt={key:1},Ut="其他店家",It=oe({__name:"SearchReward",setup(o){const e=te(0),a=te(2),n=be(0),{showRewardMilesType:i,commonPaymentMethods:P,cards:c,conditionTypes:d,storeAliases:p,storeList:w}=fe(Se()),u=E(0),y=E(null),A=E("Domestic"),t=E([]),r=Pe("rewardCardList"),F=Pe("storeAutoComplete"),g=q(()=>{const s=w.value.map(l=>({store:l,aliases:[...p.value.get(l)??[]]}));return[{store:Ut},...s]});function R(s,l,B){return l=l.toLowerCase(),[s,...(B==null?void 0:B.raw.aliases)??[]].map(N=>N.toLowerCase()).some(N=>N.includes(l))}const G=q(()=>{var B;const s={amount:u.value,acceptedPayments:t.value,transactionAttributesType:A.value,currentConditions:[...d.value]};_e(y.value)&&(s.transactionStore=y.value);const l=[];for(const $ of c.value){const N=$.getRewardInfos(s,i.value==="CurrentPlanRewardMiles"?{onlyCurrentExchangeStrategy:!0,onlyCurrentPlan:!0}:{});for(const b of N){const U={cardName:$.name,planName:b.planName,rewardName:b.rewardName,miles:b.miles,payments:b.payments,airLinesCode:b.airlineCode,isSelectedPlan:i.value==="AllPlanRewardMiles"&&b.planId===$.selectedPlanId,calculateDetail:m(b.rewardStrategy,b.pointExchangeStrategy),description:b.rewardStrategy===null?null:`${b.rewardStrategy.description}，${b.pointExchangeStrategy.description}`,cardUrl:$.cardUrl,cardDescription:$.description,pointExchangeName:b.pointExchangeName};l.push(U)}}return(B=r.value)==null||B.scrollTo({top:0,behavior:"smooth"}),Re(Re(l,"isSelectedPlan","desc"),"miles","desc")}),T=E(null);function m(s,l){const{pointsPerMile:B,milesPerUnit:$,airlineCode:N}=l,b="回饋計算:";switch(s==null?void 0:s.type){case"RoundedPercentageReward":case"TruncatedPercentageReward":{const U=s.type==="RoundedPercentageReward"?e:n;let z=0;return[b,...s.pointBackRates.map(({rate:j,limit:X})=>{const Z=Math.min(U(u.value*j/100),X??1/0);z+=Z;const S=X!==void 0?` (limit ${X})`:"";return`${u.value} * ${j}% = ${Z}${S}`}),`總計 ${z} points`,`${z} / ${B} * ${$} = ${l.calculateMiles(z)} ${N}`]}case"AccumulatedPointsReward":{const U=a(u.value/s.spendingPerPoint);return[b,`${u.value} / ${s.spendingPerPoint} = ${U} points`,`${U} / ${B} * ${$} = ${l.calculateMiles(U)} ${N}`]}case"FixedRatePointsReward":{const U=n(u.value/s.spendingPerPoint);return[b,`${u.value} / ${s.spendingPerPoint} = ${U} points (小數省略)`,`${U} / ${B} * ${$} = ${l.calculateMiles(U)} ${N}`]}default:return[]}}return(s,l)=>{const B=_("v-text-field"),$=_("v-autocomplete"),N=_("v-label"),b=_("v-checkbox"),U=_("v-radio"),z=_("v-radio-group"),j=_("v-card"),X=_("v-btn"),Z=_("v-dialog");return h(),L(K,null,[f("div",_t,[v(B,{"model-value":u.value,class:"flex-grow-0",density:"comfortable","hide-details":"",label:"交易金額",inputmode:"decimal",clearable:u.value!==0,"onUpdate:modelValue":l[0]||(l[0]=S=>u.value=isNaN(parseFloat(S))?0:parseFloat(S))},null,8,["model-value","clearable"]),v($,{ref:"storeAutoComplete",modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=S=>y.value=S),"custom-filter":R,class:"flex-grow-0",density:"comfortable","hide-details":"","item-value":"store","item-title":"store",label:"消費店家",items:g.value,clearable:C(_e)(y.value),placeholder:"全部店家","onUpdate:menu":l[2]||(l[2]=S=>{var J;return!S&&((J=C(F))==null?void 0:J.blur())})},null,8,["modelValue","items","clearable"]),f("div",null,[v(N,{text:"支援的付款方式"}),f("div",ht,[(h(!0),L(K,null,Y(C(P),(S,J)=>(h(),V(b,{key:J,modelValue:t.value,"onUpdate:modelValue":l[3]||(l[3]=ce=>t.value=ce),density:"compact",value:S,"hide-details":"",label:S},null,8,["modelValue","value","label"]))),128))])]),f("div",wt,[v(N,{text:"交易類型"}),v(z,{modelValue:A.value,"onUpdate:modelValue":l[4]||(l[4]=S=>A.value=S),"hide-details":"",inline:""},{default:x(()=>[v(U,{density:"compact",label:"國內交易",value:"Domestic"}),v(U,{density:"compact",label:"國外交易",value:"Foreign"})]),_:1},8,["modelValue"])]),f("div",ft,[(h(!0),L(K,null,Y(G.value,(S,J)=>(h(),V(j,{key:J,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined",onClick:()=>T.value=S},{title:x(()=>[f("div",At,[f("div",St,[H(I(S.miles)+" ",1),f("p",kt,I(S.airLinesCode),1)]),S.isSelectedPlan?(h(),L("i",xt)):W("",!0)])]),text:x(()=>[f("div",Rt,[f("p",Tt,I(`${S.cardName} ${S.planName??""} ${S.rewardName??""}`)+" "+I(S.payments.length===0?"":` (支付方式: ${S.payments.join(", ")})`),1)])]),_:2},1032,["onClick"]))),128))],512)]),v(Z,{"model-value":!!T.value,"onUpdate:modelValue":l[6]||(l[6]=S=>T.value=null)},{default:x(()=>[T.value?(h(),V(j,{key:0,class:"mx-auto reward-detail-dialog","min-width":"100%",title:`${T.value.cardName} ${T.value.planName??""} ${T.value.rewardName??""}`},{subtitle:x(()=>[f("p",bt,I(T.value.description??""),1)]),text:x(()=>[f("div",Lt,[f("p",Bt,[l[7]||(l[7]=H(" 卡片說明： ")),T.value.cardUrl!==null?(h(),L("a",{key:0,target:"_blank",class:"underline",href:T.value.cardUrl}," 網站 ",8,Ct)):W("",!0)]),T.value.cardDescription!==""?(h(),L("p",Et,I(T.value.cardDescription),1)):W("",!0),T.value.pointExchangeName!==""?(h(),L("p",Mt,I(T.value.pointExchangeName),1)):W("",!0),l[8]||(l[8]=f("br",null,null,-1)),f("p",null,"消費金額: "+I(u.value),1),f("p",null,"哩程預估: "+I(T.value.miles)+" "+I(T.value.airLinesCode),1),l[9]||(l[9]=f("br",null,null,-1)),(h(!0),L(K,null,Y(T.value.calculateDetail,(S,J)=>(h(),L("p",{key:J},I(S),1))),128))])]),actions:x(()=>[v(X,{class:"ms-auto",text:"Close",onClick:l[5]||(l[5]=S=>T.value=null)})]),_:1},8,["title"])):W("",!0)]),_:1},8,["model-value"])],64)}}}),$t=Le(It,[["__scopeId","data-v-8877d240"]]),Nt={class:"flex-col h-full overflow-hidden gap-8px"},Ot={class:"flex-shrink-0 flex-col gap-8px"},Vt={key:0,class:"flex justify-between items-center"},Ft={class:"flex gap-8px"},Jt={key:0,class:"gap-4px flex-col flex-grow-1 overflow-y-auto"},Dt={class:"text-1rem"},Kt={class:"text-0.8rem"},Gt={key:1,class:"flex-grow-1"},zt={class:"flex-col gap-24px m-8px"},jt={class:"flex-col gap-4px"},Xt=oe({__name:"StoreAliasManagement",setup(o){const e=Se(),{aliasType:a,customAliases:n,storeAliases:i}=fe(e),P=Pe("storeList"),c={default:"系統預設",additional:"預設+自定義",custom:"自定義"},d=E(!0),p=E(!1),w=E(!0),u=E("[]"),y=E(null),A=q(()=>{let m;return a.value==="default"?m=Ce:a.value==="additional"?m=[...i.value].map(([s,l])=>[s,[...l]]):m=[...n.value],m.map(([s,l])=>({title:s,aliases:[...l]}))});xe(()=>{var m;return(m=y.value)==null?void 0:m.title},m=>{if(m==null||y.value===null)return;const s=[...n.value.get(m)??[]];s[s.length-1]!==""&&s.push(""),y.value.aliases=s}),xe(d,G),$e(()=>{G(),p.value=!1,w.value=!0,d.value=!0});function t(m,s){if(y.value===null)return;let l=y.value.aliases;l[s]=m,l[l.length-1]!==""&&l.push("")}function r(m){if(a.value!=="default")if(m===null)y.value={title:null,aliases:[]};else{const s=[...n.value.get(m)??[]];s[s.length-1]!==""&&s.push(""),y.value={title:m,aliases:s}}}function F(){const{title:m,aliases:s}=y.value??{};m==null||s===void 0||(e.updateCustomAliases(m,[...new Set(s)].filter(_e)),y.value=null)}function g(m){if(m=m.trim(),u.value=m,p.value=!0,m===""){w.value=!0;return}try{const s=JSON.parse(m);w.value=we(s)}catch(s){console.error(s),w.value=!1}}function R(){let m;if(d.value)m=!0;else{u.value===""&&(u.value="[]");try{const s=JSON.parse(u.value);we(s)?(e.updateAllCustomAliases(s),m=!0):m=!1}catch(s){console.error(s),m=!1}}m?(alert("儲存成功"),p.value=!1):alert(`儲存失敗${d.value?"":"，JSON 不符合規則"}`)}function G(){u.value=JSON.stringify([...n.value],null,2)}function T(m){p.value||(m==="default"&&(d.value=!0),e.updateAliasType(m))}return(m,s)=>{const l=_("v-label"),B=_("v-btn"),$=_("v-btn-toggle"),N=_("v-switch"),b=_("v-card"),U=_("v-textarea"),z=_("v-toolbar-title"),j=_("v-spacer"),X=_("v-toolbar-items"),Z=_("v-toolbar"),S=_("v-autocomplete"),J=_("v-text-field"),ce=_("v-dialog");return h(),L(K,null,[f("div",Nt,[f("div",Ot,[v(l,{text:"別名設定"}),v($,{"model-value":C(a),rounded:"0",group:"",class:"w-full flex justify-center",disabled:p.value,"onUpdate:modelValue":T},{default:x(()=>[(h(!0),L(K,null,Y(C(Ee),(M,D)=>(h(),V(B,{key:D,class:"flex-1",value:M},{default:x(()=>[H(I(c[M]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["model-value","disabled"]),C(a)!=="default"?(h(),L("div",Vt,[f("div",Ft,[d.value?(h(),V(B,{key:0,onClick:s[0]||(s[0]=M=>r(null))},{default:x(()=>s[6]||(s[6]=[H(" Add ")])),_:1})):(h(),V(B,{key:1,onClick:R},{default:x(()=>s[7]||(s[7]=[H(" Save ")])),_:1}))]),v(N,{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=M=>d.value=M),disabled:p.value,"hide-details":"",label:"圖示"},null,8,["modelValue","disabled"])])):W("",!0)]),d.value?(h(),L("div",Jt,[(h(!0),L(K,null,Y(A.value,(M,D)=>(h(),V(b,{key:D,density:"compact",class:"mx-auto w-full flex-shrink-0",variant:"outlined",onClick:ee=>r(M.title)},{text:x(()=>[f("p",Dt,I(M.title),1),f("p",Kt,I(M.aliases.join(", ")),1)]),_:2},1032,["onClick"]))),128))])):(h(),L("div",Gt,[v(U,{"model-value":u.value,clearable:u.value!=="","auto-grow":"",disabled:C(a)==="default","max-rows":15,messages:p.value?"上方儲存完成後才能執行其他動作，離開這頁不會存檔":"","error-messages":w.value?"":"json 無效",label:"自定義別名設定檔","onUpdate:modelValue":g},null,8,["model-value","clearable","disabled","messages","error-messages"])]))]),v(ce,{"model-value":!!y.value,fullscreen:"","onUpdate:modelValue":s[5]||(s[5]=M=>y.value=null)},{default:x(()=>[y.value?(h(),V(b,{key:0,class:"reward-detail-dialog"},{default:x(()=>[v(Z,null,{default:x(()=>[v(B,{icon:"mdi-close",onClick:s[2]||(s[2]=M=>y.value=null)}),v(z,null,{default:x(()=>s[8]||(s[8]=[H("編輯商店別名")])),_:1}),v(j),v(X,null,{default:x(()=>[v(B,{text:"Save",variant:"text",onClick:F})]),_:1})]),_:1}),f("div",zt,[v(S,{ref:"storeList",modelValue:y.value.title,"onUpdate:modelValue":s[3]||(s[3]=M=>y.value.title=M),class:"flex-grow-0","hide-details":"",label:"目標店家",items:C(e).storeList,placeholder:"選擇店家","onUpdate:menu":s[4]||(s[4]=M=>{var D;return!M&&((D=C(P))==null?void 0:D.blur())})},null,8,["modelValue","items"]),f("div",jt,[v(l,{text:"自定義別名列表"}),(h(!0),L(K,null,Y(y.value.aliases,(M,D)=>(h(),V(J,{key:D,"hide-details":"",clearable:"","model-value":M,"onUpdate:modelValue":ee=>t(ee,D),"onClick:clear":()=>{var ee;return(ee=y.value)==null?void 0:ee.aliases.splice(D,1)}},null,8,["model-value","onUpdate:modelValue","onClick:clear"]))),128))])])]),_:1})):W("",!0)]),_:1},8,["model-value"])],64)}}}),Wt={style:{height:"calc(100dvh - 56px)"},class:"overflow-hidden mt-56px p-8px"},Ht=oe({__name:"App",setup(o){const e={查詢回饋:$t,信用卡管理:vt,商家別名:Xt,喜好設定:yt},a=Object.keys(e),n=E(!1),i=E(a[0]);return(P,c)=>{const d=_("v-app-bar-nav-icon"),p=_("v-app-bar-title"),w=_("v-app-bar"),u=_("v-list-item"),y=_("v-divider"),A=_("v-navigation-drawer"),t=_("v-app");return h(),V(t,null,{default:x(()=>[v(w,{density:"comfortable",elevation:2},{prepend:x(()=>[v(d,{onClick:c[0]||(c[0]=r=>n.value=!n.value)},{default:x(()=>c[2]||(c[2]=[f("i",{class:"fa-solid fa-bars"},null,-1)])),_:1}),v(p,null,{default:x(()=>[H(I(i.value),1)]),_:1})]),_:1}),v(A,{modelValue:n.value,"onUpdate:modelValue":c[1]||(c[1]=r=>n.value=r)},{default:x(()=>[(h(!0),L(K,null,Y(C(a),(r,F)=>(h(),L(K,{key:F},[v(u,{title:r,class:Ne(["h-48px",{"text-emphasis":i.value===r}]),onClick:()=>{i.value=r,n.value=!1}},null,8,["title","class","onClick"]),v(y)],64))),128))]),_:1},8,["modelValue"]),f("main",Wt,[(h(),V(Oe,null,[(h(),V(Ve(e[i.value])))],1024))])]),_:1})}}}),ke=Fe(Ht);ke.use(Ge);ke.use(De());ke.mount("#app");
//# sourceMappingURL=bestMileageCards-5NxZNSLU.js.map
